#####-----> Rt56 Soviet Tree. Made By SpicyAlfredo et al<><> <><> <><>
focus_tree = {
	id = soviet_focus_old

	country = {
		factor = 0

		modifier = {
			add = 100
			tag = SOV
			has_global_flag = sov_old_focus_tree
		}
	}

	continuous_focus_position = { x = 400 y = 850 }

	default = no

#	focus = {
#		id = SOV_
#		icon = GFX_
#		prerequisite = { focus = }
#		mutually_exclusive = { focus =  }
#		x = -3
#		y = 0
#		relative_position_id =
#
#		cost = 10
#
#		ai_will_do = {
#			factor = 1
#		}
#
#		available = {
#
#		}
#
#		bypass = {
#
#		}
#
#		
#		
#		
#
#		complete_tooltip = {
#
#		}
#
#		completion_reward = {
#
#		}
#	}

###---> Continue the Five Year Plan Branch <><> <><> <><>

focus = {
		id = SOV_finish_the_five_year_plan_old
		text = SOV_finish_the_five_year_plan
		icon = GFX_five_year_plan_continue
		x = -3
		y = 0
		cost = 10
		ai_will_do = {
			factor = 20
		}

		available = {
			has_full_control_of_state = 219
			has_full_control_of_state = 195
			has_full_control_of_state = 217
		}

		bypass = {
			has_country_flag = SOV_five_year_punishment_fired
		}

		
		
		
		select_effect = {
			country_event = { id = r56.soviet.1 days = 1 }
		}
		complete_tooltip = {
			195 = {
				if = {
					limit = {
					has_state_flag = SOV_finished_five_year_plan
					}
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
					}
				}
			}
			219 = {
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			217 = {
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
		completion_reward = {
			random_owned_controlled_state = {
			prioritize = { 195 }
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
				set_state_flag = SOV_finished_five_year_plan
			}
		random_owned_controlled_state = {
			prioritize = { 219 }
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		random_owned_controlled_state = {
			prioritize = { 217 }
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 50
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 50
				}
			}
			search_filters = { FOCUS_FILTER_INDUSTRY }
		}

	focus = {
		id = SOV_siberian_railnetworks
		icon = GFX_cold_railway
		prerequisite = { focus = SOV_finish_the_five_year_plan_old }
		x = -2
		y = 1
		cost = 5
		ai_will_do = {
			factor = 30
			modifier = {
				is_historical_focus_on = no
				factor = 20
			}
		}

		available = {
			#
		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = infrastructure_effort_tt
				all_owned_state = {
					free_building_slots = {
						building = infrastructure
						size < 1
					}
				}
			}
		}

  		
		
		

 		complete_tooltip = {
 			random_state = {
				limit = {
					has_state_flag = SOV_east_rail_1
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_state = {
				limit = {
					has_state_flag = SOV_east_rail_2
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_state = {
				limit = {
					has_state_flag = SOV_east_rail_3
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_state = {
				limit = {
					has_state_flag = SOV_east_rail_4
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_state = {
				limit = {
					has_state_flag = SOV_east_rail_5
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_state = {
				limit = {
					has_state_flag = SOV_east_rail_6
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_state = {
				limit = {
					has_state_flag = SOV_east_rail_7
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}

		completion_reward = {
		if = {
				limit = {
					has_idea = SOV_poor_railnetworks_0
				}
				swap_ideas = { remove_idea = SOV_poor_railnetworks_0 add_idea = SOV_poor_railnetworks_1 }
			else = {
					if = {
						limit = {
							has_idea = SOV_poor_railnetworks_1
						}
						swap_ideas = { remove_idea = SOV_poor_railnetworks_1 add_idea = SOV_poor_railnetworks_2 }
				}
			}
		}
		random_owned_controlled_state = {
				prioritize = { 409 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				set_state_flag = SOV_east_rail_1
			}
			random_owned_controlled_state = {
				prioritize = { 657 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				set_state_flag = SOV_east_rail_2
			}
			random_owned_controlled_state = {
				prioritize = { 561 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				set_state_flag = SOV_east_rail_3
			}
			random_owned_controlled_state = {
				prioritize = { 563 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				set_state_flag = SOV_east_rail_4
			}
			random_owned_controlled_state = {
				prioritize = { 565 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				set_state_flag = SOV_east_rail_5
			}
			random_owned_controlled_state = {
				prioritize = { 564 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				set_state_flag = SOV_east_rail_6
			}
			random_owned_controlled_state = {
				prioritize = { 566 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				set_state_flag = SOV_east_rail_7
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 30
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 30
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	focus = {
		id = SOV_improve_western_railnetworks
		icon = GFX_cold_railway
		prerequisite = { focus = SOV_finish_the_five_year_plan_old }
		x = -4
		y = 1
		cost = 5
		ai_will_do = {
			factor = 30
			modifier = {
				is_historical_focus_on = no
				factor = 20
			}
		}

		available_if_capitulated = yes

		bypass = {
			custom_trigger_tooltip = {
				tooltip = infrastructure_effort_tt
				all_owned_state = {
					free_building_slots = {
						building = infrastructure
						size < 1
					}
				}
			}
		}

  		
		
		

 		complete_tooltip = {
 			random_state  = {
				limit = {
					has_state_flag = SOV_western_rail_1
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_state  = {
				limit = {
					has_state_flag = SOV_western_rail_2
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_state  = {
				limit = {
					has_state_flag = SOV_western_rail_3
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_state  = {
				limit = {
					has_state_flag = SOV_western_rail_4
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_state  = {
				limit = {
					has_state_flag = SOV_western_rail_5
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_state  = {
				limit = {
					has_state_flag = SOV_western_rail_6
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_state  = {
				limit = {
					has_state_flag = SOV_western_rail_7
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
		
		completion_reward = {
			if = {
				limit = {
					has_idea = SOV_poor_railnetworks_0
				}
				swap_ideas = { remove_idea = SOV_poor_railnetworks_0 add_idea = SOV_poor_railnetworks_1 }
				else = {
						if = {
							limit = {
								has_idea = SOV_poor_railnetworks_1
							}
							swap_ideas = { remove_idea = SOV_poor_railnetworks_1 add_idea = SOV_poor_railnetworks_2 }
					}
				}
			}
			# Moscow - Rostov on Don
			build_railway = {
				path = { 9330 3356 6279 6230 6398 6341 413 3527 11475 11412 6591 3540 3519 11459 11450 11434 9417 }
			}
			# Stalingrad-Rostov on Don
			build_railway = {
				path = { 3529 9504 533 9516 509 500 11459 } #(Stalingrad - Conjunction near Millerovo)
			}
			# Stalingrad-Mikhaylovka 
			build_railway = {
				path = { 9504 3582 9436 11485 3539 9564 11408 } #(Conjunction right next to Stalingrad - Conjunction in West Saratov)
			}
			# Stalingrad - Astrakhan
			build_railway = {
				path = { 3529 11474 520 6516 6486 9455 11429 6620 9753 }
			}
			# Tbilisi - Yerevan
			build_railway = {
				path = { 1599 9702 12441 3564 12320 }
			}

			#Supply Hub in Yerevan
			230 = {
				add_building_construction = {
					type = supply_node
					level = 1
					province = 12320
					instant_build = yes
				}
			}
			#Supply Hub in Kandalaksha
			213 = {
				add_building_construction = {
					type = supply_node
					level = 1
					province = 6181
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				prioritize = { 208 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				set_state_flag = SOV_western_rail_1
			}
			random_owned_controlled_state = {
				prioritize = { 263 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				set_state_flag = SOV_western_rail_2
			}
			random_owned_controlled_state = {
				prioritize = { 246 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				set_state_flag = SOV_western_rail_3
			}
			random_owned_controlled_state = {
				prioritize = { 254 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				set_state_flag = SOV_western_rail_4
			}
			random_owned_controlled_state = {
				prioritize = { 257 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				set_state_flag = SOV_western_rail_5
			}
			random_owned_controlled_state = {
				prioritize = { 260 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				set_state_flag = SOV_western_rail_6
		}
		random_owned_controlled_state = {
				prioritize = { 265 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				set_state_flag = SOV_western_rail_7
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 30
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 30
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	focus = {
		id = SOV_Improve_TransSiberian_Railway
		icon = GFX_focus_generic_public_works_A
		prerequisite = { focus = SOV_improve_western_railnetworks }
		prerequisite = { focus = SOV_siberian_railnetworks }
		x = -3
		y = 2
		cost = 10

		ai_will_do = {
			factor = 30
			modifier = {
				is_historical_focus_on = no
				factor = 20
			}
		}

		available_if_capitulated = yes

		bypass = {
			custom_trigger_tooltip = {
				tooltip = infrastructure_effort_tt
				all_owned_state = {
					free_building_slots = {
						building = infrastructure
						size < 1
					}
				}
			}
		}

  		
		
		

 		complete_tooltip = {
 		remove_ideas = SOV_poor_railnetworks_2
 			random_state  = {
				limit = {
					has_state_flag = SOV_middle_rail_1
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_state  = {
				limit = {
					has_state_flag = SOV_middle_rail_2
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_state  = {
				limit = {
					has_state_flag = SOV_middle_rail_3
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_state  = {
				limit = {
					has_state_flag = SOV_middle_rail_4
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_state  = {
				limit = {
					has_state_flag = SOV_middle_rail_5
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_state  = {
				limit = {
					has_state_flag = SOV_middle_rail_6
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_state  = {
				limit = {
					has_state_flag = SOV_middle_rail_7
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_state  = {
				limit = {
					has_state_flag = SOV_middle_rail_8
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_state  = {
				limit = {
					has_state_flag = SOV_middle_rail_9
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}

		completion_reward = {
			#Stops Industry slowdown events from firing
			hidden_effect = {
				set_country_flag = SOV_fixed_choo_choo
			}
			if = {
				limit = {
					has_idea = SOV_industry_slow_down
				}
				remove_ideas = SOV_industry_slow_down
			}
			remove_ideas = SOV_poor_railnetworks_2

			random_owned_controlled_state = {
				prioritize = { 567 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				set_state_flag = SOV_middle_rail_1
			}
		random_owned_controlled_state = {
				prioritize = { 568 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				set_state_flag = SOV_middle_rail_2
			}
		random_owned_controlled_state = {
				prioritize = { 569 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				set_state_flag = SOV_middle_rail_3
			}
		random_owned_controlled_state = {
				prioritize = { 570 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				set_state_flag = SOV_middle_rail_4
			}
		random_owned_controlled_state = {
				prioritize = { 571 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				set_state_flag = SOV_middle_rail_5
			}
		random_owned_controlled_state = {
				prioritize = { 589 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				set_state_flag = SOV_middle_rail_6
		}
		random_owned_controlled_state = {
				prioritize = { 404 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				set_state_flag = SOV_middle_rail_7
			}
		random_owned_controlled_state = {
				prioritize = { 402 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				set_state_flag = SOV_middle_rail_8
			}
		random_owned_controlled_state = {
				prioritize = { 407 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				set_state_flag = SOV_middle_rail_8
			}
			random_owned_controlled_state = {
				prioritize = { 406 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				set_state_flag = SOV_middle_rail_9
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 60
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 60
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	focus = {
		id = SOV_Siberian_Industry
		icon = GFX_goal_generic_construct_mil_factory
		prerequisite = { focus = SOV_Improve_TransSiberian_Railway }
		x = -3
		y = 3
		cost = 10
		ai_will_do = {
			factor = 3
		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = production_effort_tt
				all_owned_state = {
					free_building_slots = {
						building = arms_factory
						size < 1
						include_locked = yes
					}
				}
			}
		}

		available = {
			OR = {
				date > 1938.1.1
				has_defensive_war = yes
				}
			has_full_control_of_state = 564
			has_full_control_of_state = 571
			has_full_control_of_state = 590
			has_full_control_of_state = 568
			has_full_control_of_state = 570
		}

		available_if_capitulated = yes

		
		

		completion_reward = {
			564 = {
				if = {
					limit = {
						has_state_flag = SOV_middle_rail_9
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			571 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			590 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			568 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			570 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}

			if = {
				limit = {
					has_completed_focus = SOV_Invest_in_Engineering_old
				}
				add_timed_idea = {
					idea = SOV_engineering_push
					days = 30
				}
			}

			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 100
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 100
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = SOV_Develop_Vladivstok
		icon = GFX_goal_generic_construct_civilian
		prerequisite = { focus = SOV_Siberian_Industry }
		x = -3
		y = 4
		cost = 10
		ai_will_do = {
			factor = 5
		}

		available = {
			NOT = {
					has_war_with = JAP
			}
			has_full_control_of_state = 408
		}

		bypass = {
			AND = {
			custom_trigger_tooltip =  {
				tooltip = construction_effort_tt
				all_owned_state = {
					free_building_slots = {
						building = industrial_complex
						size < 2
						include_locked = yes
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = production_effort_tt
				all_owned_state = {
					free_building_slots = {
						building = arms_factory
						size < 1
						include_locked = yes
						}
					}
				}
			custom_trigger_tooltip = {
				tooltip = infrastructure_effort_tt
				all_owned_state = {
					free_building_slots = {
						building = infrastructure
						size < 1
						}
					}
				}
			}
		}

		
		
		

		complete_tooltip = {
		random_state  = {
				limit = {
					has_state_flag = SOV_vladivstok_inf
				}
				add_extra_state_shared_building_slots = 4
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}


			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 120
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 120
			}

		}

		completion_reward = {

			random_owned_controlled_state = {
				prioritize = { 408 }
				add_extra_state_shared_building_slots = 4
				set_state_flag = SOV_vladivstok_inf
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				prioritize = { 408 }
				set_state_flag = SOV_vladivstok_inf
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}		
			random_owned_controlled_state = {
				prioritize = { 408 }
				set_state_flag = SOV_vladivstok_inf
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			if = {
				limit = {
						has_completed_focus = SOV_Invest_in_Engineering_old
				}
				add_timed_idea = {
					idea = SOV_engineering_push
					days = 30
				}
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 120
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 120
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	##---> Shared Industry Branch <><> <><> <><>
	focus = {
		id = SOV_Develop_The_Ural_Moutain_Region
		icon = GFX_goal_generic_construction2
		prerequisite = { focus = SOV_improve_western_railnetworks }
		x = -1
		y = 2

		cost = 10
		ai_will_do = {
			factor = 4
		}


		bypass = {
			#
		}


		
		
		available_if_capitulated = yes

		available = {
			has_full_control_of_state = 582
			has_full_control_of_state = 573
			has_full_control_of_state = 581
		}


		complete_tooltip = {
		random_state  = {
				limit = {
					has_state_flag = SOV_ural_dev_1
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
		random_state  = {
				limit = {
					has_state_flag = SOV_ural_dev_2
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
		 random_state  = {
				limit = {
					has_state_flag = SOV_ural_dev_3
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}

			if = {
				limit = {
					has_completed_focus = SOV_Invest_in_Engineering_old
				}
				add_timed_idea = {
					idea = SOV_engineering_push
					days = 30
				}
			}

			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 50
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 50
			}
		}


		completion_reward = {
			if = {
				limit = {
					NOT = {
						all_owned_state = {
						free_building_slots = {
						building = infrastructure
						size < 1
						}
					}
				}
			}
			random_owned_controlled_state = {
			add_extra_state_shared_building_slots = 2
				prioritize = { 582 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 1
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
					}
				set_state_flag = SOV_ural_dev_1
				}
			}
			add_resource = {
					type = oil
					amount = 2
					state = 582
					}
			if = {
				limit = {
					NOT = {
						all_owned_state = {
						free_building_slots = {
						building = infrastructure
						size < 1
						}
					}
				}
			}
			random_owned_controlled_state = {
			add_extra_state_shared_building_slots = 2
				prioritize = { 573 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 1
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
				set_state_flag = SOV_ural_dev_2
				}
			}
			add_resource = {
					type = chromium
					amount = 3
					state = 573
					}
			if = {
				limit = {
					NOT = {
						all_owned_state = {
						free_building_slots = {
						building = infrastructure
						size < 1
						}
					}
				}
			}
			random_owned_controlled_state = {
			add_extra_state_shared_building_slots = 2
				prioritize = { 581 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 1
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
					}
				set_state_flag = SOV_ural_dev_3
				}
			}
			add_resource = {
					type = aluminium
					amount = 1
					state = 581
					}

			if = {
				limit = {
					has_completed_focus = SOV_Invest_in_Engineering_old
				}
				add_timed_idea = {
					idea = SOV_engineering_push
					days = 30
				}
			}

			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 50
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 50
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_OIL FOCUS_FILTER_CHROMIUM FOCUS_FILTER_ALUMINIUM}
	}
	focus = {
		id = SOV_tranformation_of_nature
		icon = GFX_goal_generic_soviet_construction
		prerequisite = { focus = SOV_steel_industry_improvements focus = SOV_workers_culture}
		x = 1
		y = 2
		cost = 10
		ai_will_do = {
			factor = 5
		}

		
		
		available_if_capitulated = yes


		available = {
			has_full_control_of_state = 404
		}

		bypass = {
			NOT = {
				owns_state = 404
			}
		}

		completion_reward = {
		#	add_ai_strategy = {
		#		type = build_building
		#		id = infrastructure
		#		target = 404
		#		value = 1
		#	}
			add_political_power = 25

			add_tech_bonus = {
				name = construction_bonus
				bonus = 1
				uses = 1
				category = construction_tech
			}



			add_resource = {
				type = rubber
				amount = 8
				state = 404
			}

			if = {
				limit = {
					has_completed_focus = SOV_Invest_in_Engineering_old
				}
				add_timed_idea = {
					idea = SOV_engineering_push
					days = 30
				}
			}

			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 50
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 50
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY FOCUS_FILTER_POLITICAL FOCUS_FILTER_RUBBER}
	}
	focus = {
		id = SOV_Develop_Oil_Concern
		icon = GFX_goal_refining
		prerequisite = { focus = SOV_tranformation_of_nature }
		prerequisite = { focus = SOV_Develop_The_Ural_Moutain_Region }
		x = 0
		y = 3
		cost = 10
		ai_will_do = {
			factor = 10
		}

		available = {
			OR = {
				AND = {
					has_tech = excavation1
					has_full_control_of_state = 232
					OR = {
						has_full_control_of_state = 229
						AZR = {
							is_puppet_of = SOV
							has_full_control_of_state = 229
							}
						ARM = {
							is_puppet_of = SOV
							has_full_control_of_state = 229
						}
					}
				}
				has_tech = excavation3
				has_country_flag = prospect_volga_ural_basin
				has_full_control_of_state = 651
				has_full_control_of_state = 249
			}


		}

		
		
		available_if_capitulated = yes


		completion_reward = {
			add_tech_bonus = {
				name = industrial_bonus
				bonus = 1
				uses = 1
				category = refining_tech
			}			
			if = {
				limit = {
	
					has_country_flag = prospect_volga_ural_basin
					
					NOT = {
						all_owned_state = {
							free_building_slots = {
								building = infrastructure
								size < 1
							}
						}
					}
				}
				random_owned_controlled_state = {
					prioritize = { 249 }
					limit = {
						free_building_slots = {
							building = infrastructure
							size > 0
						}
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					set_state_flag = SOV_oil_inf_2
				}
				add_resource = {
					type = oil
					amount = 2
					state = 249
				}				
			}
			if = {
				limit = {
					NOT = {
						has_country_flag = prospect_volga_ural_basin
					}
					NOT = {
						all_owned_state = {
							free_building_slots = {
								building = infrastructure
								size < 1
							}
						}
					}
				}
				random_owned_controlled_state = {
					prioritize = { 232 }
					limit = {
						free_building_slots = {
							building = infrastructure
							size > 0
						}
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					set_state_flag = SOV_oil_inf_2
				}
				add_resource = {
					type = oil
					amount = 2
					state = 232
				}				
			}

			if = {
				limit = {
					has_full_control_of_state = 229
					NOT = {
						has_country_flag = prospect_volga_ural_basin
					}					
				}
				random_owned_controlled_state = {
					prioritize = { 229 }
					limit = {
						free_building_slots = {
							building = infrastructure
							size > 0
						}
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					set_state_flag = SOV_oil_inf_1
				}
				add_resource = {
					type = oil
					amount = 26
					state = 229
				}				
			}
			if = {
				limit = {
					AZR = {
						has_full_control_of_state = 229
						is_puppet_of = SOV
					}
					NOT = {
						has_country_flag = prospect_volga_ural_basin
					}
				}
				229 = {
					if = {
						limit = {
							free_building_slots = {
								building = infrastructure
								size > 0
							}
						}
						add_building_construction = {
							type = infrastructure
							level = 1
							instant_build = yes
						}
						set_state_flag = SOV_oil_inf_1
					}
				}
				add_resource = {
					type = oil
					amount = 26
					state = 229
				}				
			}
			if = {
				limit = {
					ARM = {
						has_full_control_of_state = 229
						is_puppet_of = SOV
					}
					NOT = {
						has_country_flag = prospect_volga_ural_basin
					}					
				}
				229 = {
					if = {
						limit = {
						free_building_slots = {
							building = infrastructure
							size > 0
						}
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					set_state_flag = SOV_oil_inf_1
					}
				}
				add_resource = {
					type = oil
					amount = 26
					state = 229
				}				
			}

			if = {
				limit = {
					has_full_control_of_state = 651
					has_country_flag = prospect_volga_ural_basin
				}
				random_owned_controlled_state = {
					prioritize = { 651 }
					limit = {
						free_building_slots = {
							building = infrastructure
							size > 0
						}
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					set_state_flag = SOV_oil_inf_1
				}
				add_resource = {
					type = oil
					amount = 26
					state = 651
				}				
			}

			if = {
				limit = {
					has_completed_focus = SOV_Invest_in_Engineering_old
				}
				add_timed_idea = {
					idea = SOV_engineering_push
					days = 30
				}
			}
			modify_timed_idea = {
				idea = SOV_revolutionized_industry_1
				days = 100
			}
			modify_timed_idea = {
				idea = SOV_revolutionized_industry_2
				days = 100
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY FOCUS_FILTER_OIL}
	}
	focus = {
		id = SOV_industrial_cities #Form Additional Industrial Cities
		icon = GFX_goal_communist_factory
		prerequisite = { focus = SOV_urbanization }
		prerequisite = { focus = SOV_Develop_Oil_Concern }
		x = 1
		y = 4
		cost = 10
		ai_will_do = {
			factor = 8
		}

		available = {
			NOT = {
				has_idea = SOV_widespread_outbreaks
			}
		}

		
		
		available_if_capitulated = yes

		complete_tooltip = {
			add_tech_bonus = {
				name = industrial_bonus
				bonus = 1
				uses = 1
				category = industry
			}
			random_owned_controlled_state = {
				add_extra_state_shared_building_slots = 4
				set_state_flag = SOV_Industrial_cities_1
			}
			random_owned_controlled_state = {
				add_extra_state_shared_building_slots = 4
				set_state_flag = SOV_Industrial_cities_2
			}
			random_owned_controlled_state = {
				add_extra_state_shared_building_slots = 4
				set_state_flag = SOV_Industrial_cities_3
			}
			random_owned_controlled_state = {
				add_extra_state_shared_building_slots = 4
				set_state_flag = SOV_Industrial_cities_4
			}
		}

		completion_reward = {
			add_tech_bonus = {
				name = industrial_bonus
				bonus = 1
				uses = 1
				category = industry
			}
			random_owned_controlled_state = {
				prioritize = { 398 }
				add_extra_state_shared_building_slots = 4
				set_state_flag = SOV_Industrial_cities_1
			}
			random_owned_controlled_state = {
				prioritize = { 578 }
				add_extra_state_shared_building_slots = 4
				set_state_flag = SOV_Industrial_cities_2
			}
			random_owned_controlled_state = {
				prioritize = { 137 }
				add_extra_state_shared_building_slots = 4
				set_state_flag = SOV_Industrial_cities_3
			}
			random_owned_controlled_state = {
				prioritize = { 263 }
				add_extra_state_shared_building_slots = 4
				set_state_flag = SOV_Industrial_cities_4
			}
			if = {
				limit = {
					has_completed_focus = SOV_Invest_in_Engineering_old
				}
				add_timed_idea = {
					idea = SOV_engineering_push
					days = 30
				}
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 120
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 120
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY }
	}
###---> Finish Five Year Plan Branch <><> <><> <><>

	focus = {
		id = SOV_third_five_year_plan_old #Finish the Five Year Plan
		text = SOV_third_five_year_plan
		icon = GFX_5year_plan_complete
		x = 1
		y = 0
		cost = 10

		ai_will_do = {
			factor = 8
		}

		
		
		available_if_capitulated = yes


		bypass = {
			has_country_flag = SOV_five_year_punishment_fired
		}

		available = {
			has_country_flag = SOV_fixed_choo_choo
			has_full_control_of_state = 137
			has_full_control_of_state = 251
			has_full_control_of_state = 248
		}


		complete_tooltip = {
			137 = {
				if = {
					limit = {
						has_state_flag = SOV_finished_five_year_plan
					}
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
					}
				}
			}
			251 = {
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			248 = {
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}

		completion_reward = {
			random_owned_controlled_state = {
			prioritize = { 137 }
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
				set_state_flag = SOV_finished_five_year_plan
			}
		random_owned_controlled_state = {
			prioritize = { 251 }
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		random_owned_controlled_state = {
			prioritize = { 248 }
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			if = {
				limit = {
					has_completed_focus = SOV_Invest_in_Engineering_old
				}
				add_timed_idea = {
					idea = SOV_engineering_push
					days = 30
				}
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 70
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 70
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	focus = {
		id = SOV_steel_industry_improvements
		icon = GFX_goal_generic_commie_investments
		prerequisite = { focus = SOV_third_five_year_plan_old }
		x = 0
		y = 1
		cost = 10
		ai_will_do = {
			factor = 8
		}

		available = {
			has_full_control_of_state = 582
			has_full_control_of_state = 652
			has_full_control_of_state = 249
		}

		bypass = {

		}

		
		
		

		complete_tooltip = {
			if = {
				limit = {
					has_completed_focus = SOV_Invest_in_Engineering_old
				}
				add_timed_idea = {
					idea = SOV_engineering_push
					days = 30
				}
			}
			add_resource = {
				type = steel
				amount = 10
				state = 582
			}
		#	add_ai_strategy = { # Good idea in theory but risks making hte AI want to build infrastructure in that province so badly that it doesn't do anything else even after reaching 10. Find another solution
		#		type = build_building
		#		id = infrastructure
		#		target = 582
		#		value = 1
		#	}			
			add_resource = {
				type = steel
				amount = 10
				state = 652
			}
		#	add_ai_strategy = { # Good idea in theory but risks making hte AI want to build infrastructure in that province so badly that it doesn't do anything else even after reaching 10. Find another solution
		#		type = build_building
		#		id = infrastructure
		#		target = 652
		#		value = 1
		#	}			
			add_resource = {
				type = steel
				amount = 10
				state = 249
			}
		#	add_ai_strategy = { # Good idea in theory but risks making hte AI want to build infrastructure in that province so badly that it doesn't do anything else even after reaching 10. Find another solution
		#		type = build_building
		#		id = infrastructure
		#		target = 249
		#		value = 1
		#	}			
			
			modify_timed_idea = {
				idea = SOV_revolutionized_industry_1
				days = 50
			}
			modify_timed_idea = {
				idea = SOV_revolutionized_industry_2
				days = 50
			}
		}
		completion_reward = {
			if = {
				limit = {
					has_completed_focus = SOV_Invest_in_Engineering_old
				}
				add_timed_idea = {
					idea = SOV_engineering_push
					days = 30
				}
			}
			if = {
				limit = {
					NOT = { has_tech = assembly_line_production }
				}
				add_tech_bonus = {
					name = industrial_bonus
					bonus = 1
					ahead_reduction = 1
					uses = 1
					technology = assembly_line_production
				}
			}
			if = {
				limit = {
					has_tech = assembly_line_production
				}
				add_tech_bonus = {
					name = construction_bonus
					bonus = 0.5
					uses = 1
					category = construction_tech
				}
			}
            add_tech_bonus = {
                name = industrial_bonus
                bonus = 1
                uses = 1
                category = steel_tech
            }			
			add_resource = {
				type = steel
				amount = 12
				state = 582
			}
			add_resource = {
				type = steel
				amount = 12
				state = 652
			}
			add_resource = {
				type = steel
				amount = 12
				state = 249
			}
			modify_timed_idea = {
				idea = SOV_revolutionized_industry_1
				days = 50
			}
			modify_timed_idea = {
				idea = SOV_revolutionized_industry_2
				days = 50
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY FOCUS_FILTER_STEEL}
	}
	focus = {
		id = SOV_workers_culture
		icon = GFX_goal_workers_support
		prerequisite = { focus = SOV_third_five_year_plan_old }
		x = 2
		y = 1
		cost = 10
		ai_will_do = {
			factor = 5
		}

		available = {
			has_government = communism
		}

		bypass = {
			NOT = { has_government = communism }
		}

		
		
		

		complete_tooltip = {
			add_ideas = workers_culture
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 10
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 10
			}
		}

		completion_reward = {
			add_ideas = workers_culture
			if = {
				limit = {
					has_completed_focus = SOV_Invest_in_Engineering_old
				}
				add_timed_idea = {
					idea = SOV_engineering_push
					days = 30
				}
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 10
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 10
			}

		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
###---> Social Welfare Branch <><> <><> <><>
	focus = {
		id = SOV_Social_Welfare_old
		text = SOV_Social_Welfare
		icon = GFX_social_welfare
		x = 5
		y = 0
		cost = 10
		ai_will_do = {
			factor = 11
		}

		available = {
			if = {
				limit = {
					is_ai = no
				}
				num_of_factories > 99
				surrender_progress < 0.25 #listen if you wanted this long to take this you fucked up
			}
			else = {
				OR = {
					AND = {
						num_of_factories > 99
						surrender_progress < 0.25 
					}
					hidden_trigger = {
						date > 1939.1.1 #ai is dumb saftey vavle
					}
				}
			}
		}


		bypass = {
			NOT = { has_government = communism }
		}

		
		
		


		complete_tooltip = {
			add_political_power = 25
			add_ideas = SOV_social_welfare_focus
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 30
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 30
			}
		}

		completion_reward = {
			add_political_power = 25
			add_ideas = SOV_social_welfare_focus
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 30
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 30
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_STABILITY }
	}
	focus = {
		id = SOV_Education_Initiative
		icon = GFX_goal_SOV_education_initiative
		prerequisite = { focus = SOV_Social_Welfare_old }
		x = 4
		y = 1
		cost = 10
		ai_will_do = {
			factor = 10
		}


		available_if_capitulated = yes

		completion_reward = {
			remove_ideas = SOV_poorly_educated_population
			add_research_slot = 1
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 10
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 10
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}
	focus = {
		id = SOV_Invest_in_Engineering_old
		text = SOV_Invest_in_Engineering
		icon = GFX_focus_generic_socialist_science
		prerequisite = { focus = SOV_workers_culture }
		prerequisite = { focus = SOV_Education_Initiative }
		x = 3
		y = 2
		cost = 14.30
		ai_will_do = {
			factor = 1000
		}

		
		
		


		complete_tooltip = {
			add_tech_bonus = {
				name = electronics_bonus
				bonus = 1
				uses = 1
				category = electronics
				}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 50
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 50
			}
		}

		completion_reward = {
			hidden_effect = {
				add_timed_idea = {
					idea = SOV_engineering_push
					days = 30
				}
			}
			add_ideas = SOV_invest_in_engineering_focus
			add_tech_bonus = {
				name = electronics_bonus
				bonus = 0.5
				uses = 1
				category = electronics
				}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 100
				}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 100
				}
			}
			search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }
		}
	focus = {
		id = SOV_urbanization_old #Forced Urbanization
		text = SOV_urbanization
		icon = GFX_forced_urbanization
		prerequisite = { focus = SOV_Invest_in_Engineering_old }
		x = 2
		y = 3
		cost = 10
		ai_will_do = {
			factor = 1000
		}

		available = {
		NOT = {
			has_idea = SOV_widespread_outbreaks
			}
		}

		available_if_capitulated = yes
		
		

		complete_tooltip = {
			add_ideas = SOV_urbanization_focus
			add_timed_idea = {
					idea = SOV_urbanization_focus_debuff
					days = 350
				}
			if = {
				limit = {
						has_completed_focus = SOV_Invest_in_Engineering_old
				}
				add_timed_idea = {
					idea = SOV_engineering_push
					days = 30
				}
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 100
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 100
			}
		}


		completion_reward = {
			add_ideas = SOV_urbanization_focus
			add_timed_idea = {
					idea = SOV_urbanization_focus_debuff
					days = 350
				}
			if = {
				limit = {
						has_completed_focus = SOV_Invest_in_Engineering_old
				}
				add_timed_idea = {
					idea = SOV_engineering_push
					days = 30
				}
			}

			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 100
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 100
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_MANPOWER }
	}
	focus = {
		id = SOV_Mass_Immunizations_old
		text = SOV_Mass_Immunizations
		icon = GFX_goal_medicine
		prerequisite = { focus = SOV_Social_Welfare_old }
		x = 6
		y = 1
		cost = 10
		ai_will_do = {
			factor = 10
		}

		bypass = {
			has_country_flag = SOV_mass_immunizations_happened_1
		}

		available = {
			#
		}


		available_if_capitulated = yes
		
		

		select_effect = {
			set_country_flag = SOV_mass_immunizations_happened
		}

		completion_reward = {
		set_country_flag = SOV_mass_immunizations_happened_1
			if = {
				limit = {
					has_idea = SOV_risk_of_disease
				}
			 remove_ideas = SOV_risk_of_disease
			}
			if = {
				limit = {
					has_idea = SOV_proliferation_of_disease
				}
			 remove_ideas = SOV_proliferation_of_disease
			}
			if = {
				limit = {
					has_idea = SOV_widespread_outbreaks
				}
			 remove_ideas = SOV_widespread_outbreaks
			}
			add_tech_bonus = {
				name = hospital_bonus
				bonus = 1
				uses = 1
				category = hospital_tech
			}
			if = {
				limit = {
						has_completed_focus = SOV_Invest_in_Engineering_old
				}
				add_timed_idea = {
					idea = SOV_engineering_push
					days = 30
				}
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 10
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 10
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}
	focus = {
		id = SOV_progress_cult_old
		text = SOV_progress_cult
		icon = GFX_focus_generic_socialist_science
		prerequisite = { focus = SOV_Education_Initiative }
		prerequisite = { focus = SOV_Mass_Immunizations_old }
		x = 5
		y = 2
		cost = 10
		ai_will_do = {
			factor = 7
		}

		available = {
			num_of_factories > 105
		}

		available_if_capitulated = yes
		
		

		completion_reward = {
			add_ideas = progress_cult_focus
			add_research_slot = 1
			if = {
				limit = {
					has_completed_focus = SOV_Invest_in_Engineering_old
				}
				add_timed_idea = {
					idea = SOV_engineering_push
					days = 30
				}
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 100
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 100
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}
	focus = {
		id = SOV_socialist_science
		icon = GFX_socialist_science
		prerequisite = { focus = SOV_progress_cult_old }
		prerequisite = { focus = SOV_Invest_in_Engineering_old }
		x = 4
		y = 3
		cost = 10
		ai_will_do = {
			factor = 500
		}

		available = {
			NOT = {
				has_idea = SOV_widespread_outbreaks
				}
		}

		available_if_capitulated = yes
		
		

		completion_reward = {
		add_ideas = socialist_science_focus
		if = {
				limit = {
					has_completed_focus = SOV_Invest_in_Engineering_old
				}
				add_timed_idea = {
					idea = SOV_engineering_push
					days = 30
				}
			}
		modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 100
			}
		modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 100
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_MANPOWER }
	}
	focus = {
		id = SOV_copy_yaroslav_rubber_factory
		icon = GFX_focus_generic_rubber
		prerequisite = { focus = SOV_socialist_science }
		prerequisite = { focus = SOV_urbanization }
		prerequisite = { focus = SOV_Develop_Oil_Concern }
		relative_position_id = SOV_socialist_science
		x = -1
		y = 1
		cost = 10
		ai_will_do = {
			factor = 500
		}

		available = {

		}

		available_if_capitulated = yes
		
		

		completion_reward = {
			add_tech_bonus = {
				name = USA_rubber_reserve_company
				bonus = 2.0
				uses = 2
				technology = oil_processing
				technology = rubber_plant_a
				technology = rubber_plant_b
				technology = rubber_plant_c
				technology = rubber_plant_d
			}
			if = {
                limit = {
                    has_completed_focus = SOV_Invest_in_Engineering_old
                }
                add_timed_idea = {
                    idea = SOV_engineering_push
                    days = 30
                }
            }
            modify_timed_idea = {
                    idea = SOV_revolutionized_industry_1
                    days = 100
            }
            modify_timed_idea = {
                    idea = SOV_revolutionized_industry_2
                    days = 100
            }			
		}
		search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_RUBBER }
	}	
	focus = {
		id = SOV_rocket_focus #Rocket Experiments
		icon = GFX_goal_soviet_rocketry
		prerequisite = { focus = SOV_progress_cult_old }
		x = 6
		y = 3
		cost = 10
		ai_will_do = {
			factor = 7
		}

		available = {
			#
		}

		bypass = {
		has_tech = nuke_rocket_engines
		}

		available_if_capitulated = yes
		
		

		completion_reward = {
			add_tech_bonus = {
				name = rocket_bonus
				ahead_reduction = 2
				uses = 1
				category = rocketry
			}
			add_tech_bonus = {
				name = mot_rockets_bonus
				ahead_reduction = 2
				uses = 1
				category = mot_rockets
			}
			if = {
				limit = {
					has_completed_focus = SOV_Invest_in_Engineering_old
				}
				add_timed_idea = {
					idea = SOV_engineering_push
					days = 30
				}
			}

			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 100
				}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 100
				}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SOV_nuke_focus #Laboratory NO.2 laboratory
		icon = GFX_focus_wonderweapons
		prerequisite = { focus = SOV_socialist_science }
		prerequisite = { focus = SOV_rocket_focus }

		x = 5
		y = 4
		cost = 10
		ai_will_do = {
			factor = 500
			modifier = {
				factor = 0.005
				date < 1942.06.06
			}
		}

		available = {
			num_of_factories > 120
		}

		bypass = {
		has_tech = nukes_3
		}

		
		
		

		completion_reward = {
			add_tech_bonus = {
				name = nuclear_bonus
				bonus = 3
				uses = 1
				category = nuclear
			}
			if = {
				limit = {
					has_completed_focus = SOV_Invest_in_Engineering_old
				}
				add_timed_idea = {
					idea = SOV_engineering_push
					days = 30
				}
			}

			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 100
				}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 100
				}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}
	focus = {
		id = SOV_further_the_progress_cult
		icon = GFX_goal_supremacy_of_will
		prerequisite = { focus = SOV_industrial_cities }
		prerequisite = { focus = SOV_nuke_focus }
		prerequisite = { focus = SOV_copy_yaroslav_rubber_factory }
		x = 3
		y = 5
		cost = 14.30
		ai_will_do = {
			factor = 7
		}

		available = {
			num_of_factories > 275
		}

		available_if_capitulated = yes
		
		

		completion_reward = {
			swap_ideas = { remove_idea = progress_cult_focus add_idea = progress_cult_focus_2 }
			add_tech_bonus = {
				name = nuclear_bonus
				bonus = 0.25
				uses = 1
				category = nuclear
			}
			add_tech_bonus = {
				name = nuclear_bonus
				bonus = 0.25
				uses = 1
				category = rocketry
			}
			
			if = {
				limit = {
					has_completed_focus = SOV_Invest_in_Engineering_old
				}
				add_timed_idea = {
					idea = SOV_engineering_push
					days = 30
				}
			}

			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 365
				}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 365
				}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}
###---> Defense Branch <><> <><> <><>

	focus = {
		id = SOV_motherland_defense
		icon = GFX_goal_generic_soviet_assistance
		available = {
			any_country = {
				OR = {
					is_major = yes
					num_of_factories > 100
				}
				has_war_with = ROOT
			}
			has_civil_war = no
			OR = {
				AND = {
					has_offensive_war = no
					surrender_progress > 0.05
				}
				AND = {
					has_offensive_war = yes
					surrender_progress > 0.20
				}
			}
		}
		x = 12
		y = 0
		cost = 5

		ai_will_do = {
			factor = 0
			modifier = {
				has_war = yes
				add = 5000
			}
		}

		completion_reward = {
			add_timed_idea = {
				idea = SOV_defense_of_the_motherland
				days = 1095
			}
		}
		search_filters = { FOCUS_FILTER_MANPOWER FOCUS_FILTER_WAR_SUPPORT }
	}
	focus = {
		id = SOV_move_industry_to_urals
		icon = GFX_goal_generic_construct_civilian
		prerequisite = { focus = SOV_motherland_defense }
		prerequisite = { focus = SOV_peoples_commissariat }
		relative_position_id = SOV_motherland_defense
		x = 2
		y = 2
		cost = 3
		ai_will_do = {
			factor = 50
			modifier = {
				factor = 0
				NOT = {
					#Needs a general way to do this.
					OR = {
						has_war_with = GER
						AND = {
							has_war_with = POL
							POL = {
								is_major = yes
							}
						}
						AND = {
							has_war_with = ROM
							ROM = {
								is_major = yes
							}
						}	
					} 
				}
			}
		}

		available = {
			has_war = yes
			has_civil_war = no
			573 = {
				is_owned_and_controlled_by = SOV
			}
			582 = {
				is_owned_and_controlled_by = SOV
			}
		}

		bypass = {
			NOT = { 219 = { is_owned_and_controlled_by = ROOT } }
			NOT = { 195 = { is_owned_and_controlled_by = ROOT } }
			NOT = { 242 = { is_owned_and_controlled_by = ROOT } }
		}

		select_effect = {
			add_equipment_to_stockpile = {
				type = train_equipment
				amount = SOV_industrial_relocation_trains_focus_negative
				producer = SOV
			}
			#Factories are removed immediately to keep consistency with how decisions work
			219 = { #Moscow
				remove_building = {
					type = arms_factory
					level = 1
				}
				remove_building = {
					type = industrial_complex
					level = 1
				}
			}
			if = {
				limit = {
					has_full_control_of_state = 195
				}
				195 = { #Leningrad
					remove_building = {
						type = arms_factory
						level = 1
					}
					remove_building = {
						type = industrial_complex
						level = 1
					}
				}
			}
			if = {
				limit = {
					has_full_control_of_state = 202
				}
				202 = { #Kiev
					remove_building = {
						type = arms_factory
						level = 1
					}
					remove_building = {
						type = industrial_complex
						level = 1
					}
				}
			}
		}

		completion_reward = {
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = train_equipment
					amount = SOV_industrial_relocation_trains_focus
					producer = SOV
				}
			}
			custom_effect_tooltip = SOV_focus_select_effect_tt
			effect_tooltip = {
				219 = { #Moscow
					remove_building = {
						type = arms_factory
						level = 1
					}
					remove_building = {
						type = industrial_complex
						level = 1
					}
				}
				if = {
					limit = {
						has_full_control_of_state = 195
					}
					195 = { #Leningrad
						remove_building = {
							type = arms_factory
							level = 1
						}
						remove_building = {
							type = industrial_complex
							level = 1
						}
					}
				}
				if = {
					limit = {
						has_full_control_of_state = 202
					}
					202 = { #Kiev
						remove_building = {
							type = arms_factory
							level = 1
						}
						remove_building = {
							type = industrial_complex
							level = 1
						}
					}
				}
			}
			custom_effect_tooltip = SOV_move_industry_to_the_urals_trains_tt

			custom_effect_tooltip = SOV_focus_complete_effect_tt
			unlock_decision_category_tooltip = SOV_industry_relocation

			random_controlled_state = {
				limit = {
					SOV_is_industrial_relocation_destiny_state = yes
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			
				hidden_effect = {
					damage_building = { type = arms_factory damage = 0.5 }
					damage_building = { type = industrial_complex damage = 0.5 }
				}
			}
			if = {
				limit = {
					ROOT = { has_full_control_of_state = 195 } #Leningrad
				}
				random_controlled_state = { #Different State please thanks
					limit = {
						NOT = { state = PREV }
						SOV_is_industrial_relocation_destiny_state = yes
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				
					hidden_effect = {
						damage_building = { type = arms_factory damage = 0.5 }
						damage_building = { type = industrial_complex damage = 0.5 }
					}
				}
			}
			if = {
				limit = {
					ROOT = { has_full_control_of_state = 202 } #Leningrad
				}
				random_controlled_state = { #Different State please thanks
					limit = {
						NOT = { state = PREV }
						SOV_is_industrial_relocation_destiny_state = yes
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				
					hidden_effect = {
						damage_building = { type = arms_factory damage = 0.5 }
						damage_building = { type = industrial_complex damage = 0.5 }
					}
				}
			}
			custom_effect_tooltip = SOV_relocate_industry_repair_tt
		}
	}

	focus = {
		id = SOV_defense_of_moscow
		icon = GFX_goal_generic_fortify_city
		prerequisite = { focus = SOV_motherland_defense }
		available = {
			#any_owned_state = {
			#	any_neighbor_state = { state = 219 } # Moscow
			#	NOT = { is_controlled_by = ROOT }
			#}
			219 = {
				is_controlled_by = ROOT
				OR = {
					SOV = { surrender_progress > 0.15 }
					any_neighbor_state = {
						NOT = { is_controlled_by = ROOT }
					}
				}
			}
		}
		bypass = {
			NOT = { 219 = { is_owned_and_controlled_by = ROOT } }
		}
		x = -3
		y = 1
		relative_position_id = SOV_motherland_defense
		cost = 5
		ai_will_do = {
			factor = 2 #likely less threatened
			modifier = {
				219 = {
					any_neighbor_state = {
						NOT = { is_controlled_by = ROOT }
					}
				}
				factor = 3
			}
		}

		completion_reward = {
			army_experience = 10
			division_template = {
				name = "Vspomogatel'nyye Sily Oborony"
				priority = 1
				division_names_group = SOV_INF_01
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 0 y = 3 }
					
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }
					infantry = { x = 1 y = 3 }
				}
				support = {
					engineer = { x = 0 y = 0 }
					artillery = { x = 0 y = 1 }
				}
			}
			division_template = {
				name = "Vspomogatel'naya Bronetankovaya Sila"
				priority = 1
				division_names_group = SOV_INF_01
				regiments = {
					light_armor = { x = 0 y = 0 }
					light_armor = { x = 0 y = 1 }

					light_armor = { x = 1 y = 0 }
					light_armor = { x = 1 y = 1 }

					cavalry = { x = 2 y = 0 }
					cavalry = { x = 2 y = 1 }
				}
			}
			219 = {
				custom_effect_tooltip = SOV_defense_of_moscow_forts
				custom_effect_tooltip = SOV_defense_divisions_12
				hidden_effect = {	
					219 = {
						create_unit = {
							division = "name = \"1ya Vspomogatel'nyye sily oborony Moskvy\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = SOV
						}
						create_unit = {
							division = "name = \"2ya Vspomogatel'nyye sily oborony Moskvy\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = SOV
						}
						create_unit = {
							division = "name = \"3ya Vspomogatel'nyye sily oborony Moskvy\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = SOV
						}
						create_unit = {
							division = "name = \"4ya Vspomogatel'nyye sily oborony Moskvy\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = SOV
						}
						create_unit = {
							division = "name = \"5ya Vspomogatel'nyye sily oborony Moskvy\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = SOV
						}
						create_unit = {
							division = "name = \"6ya Vspomogatel'nyye sily oborony Moskvy\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = SOV
						}
						create_unit = {
							division = "name = \"7ya Vspomogatel'nyye sily oborony Moskvy\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = SOV
						}
						create_unit = {
							division = "name = \"8ya Vspomogatel'nyye sily oborony Moskvy\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = SOV
						}
						create_unit = {
							division = "name = \"9ya Vspomogatel'nyye sily oborony Moskvy\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = SOV
						}
						create_unit = {
							division = "name = \"10ya Vspomogatel'nyye sily oborony Moskvy\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = SOV
						}
						create_unit = {
							division = "name = \"1ya Moskva Vspomogatel'naya bronetankovaya sila\" division_template = \"Vspomogatel'naya Bronetankovaya Sila\" start_experience_factor = 0 start_equipment_factor = 0.6 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = SOV
						}
						create_unit = {
							division = "name = \"2ya Moskva Vspomogatel'naya bronetankovaya sila\" division_template = \"Vspomogatel'naya Bronetankovaya Sila\" start_experience_factor = 0 start_equipment_factor = 0.6 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = SOV
						}
				
						
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 3391
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 6414
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 9348
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 301
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 9378
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 6283
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 3259
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 11282
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 5
						province = 6380
						instant_build = yes
					}
					add_building_construction = {
						type = anti_air_building
						level = 3
						instant_build = yes
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	focus = {
		id = SOV_defense_of_stalingrad_old
		text = SOV_defense_of_leningrad
		icon = GFX_goal_generic_construct_military
		prerequisite = { focus = SOV_defense_of_moscow }
		available = {
			217 = {
				is_controlled_by = ROOT
				OR = {
					SOV = { surrender_progress > 0.15 }
					any_neighbor_state = {
						NOT = { is_controlled_by = ROOT }
					}
				}
			}
		}
		bypass = {
			NOT = { 217 = { is_owned_and_controlled_by = ROOT } }
		}
		x = -1
		y = 1
		relative_position_id = SOV_defense_of_moscow
		cost = 5
		ai_will_do = {
			factor = 4 #high importance
			modifier = {
				217 = {
					any_neighbor_state = {
						NOT = { is_controlled_by = ROOT }
					}
				}
				factor = 3 #more natural barriers
			}
		}

		completion_reward = {
			army_experience = 10
			217 = {
				custom_effect_tooltip = SOV_defense_of_stalingrad_forts
				custom_effect_tooltip = SOV_defense_divisions		
				hidden_effect = {
					create_unit = {
						division = "name = \"1ya Vspomogatel'nyye sily oborony Stalingradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"2ya Vspomogatel'nyye sily oborony Stalingradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"3ya Vspomogatel'nyye sily oborony Stalingradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"4ya Vspomogatel'nyye sily oborony Stalingradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"5ya Vspomogatel'nyye sily oborony Stalingradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"6ya Vspomogatel'nyye sily oborony Stalingradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"7ya Vspomogatel'nyye sily oborony Stalingradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"1ya Stalingradskaya Vspomogatel'naya bronetankovaya sila\" division_template = \"Vspomogatel'naya Bronetankovaya Sila\" start_experience_factor = 0 start_equipment_factor = 0.6 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 9501
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 3555
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 11484
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 11474
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 498
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 6527
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 9504
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 4
						province = 3529
						instant_build = yes
					}
					add_building_construction = {
						type = anti_air_building
						level = 2
						instant_build = yes
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	focus = {
		id = SOV_defense_of_leningrad_old
		text = SOV_defense_of_leningrad
		icon = GFX_focus_generic_coastal_fort
		prerequisite = { focus = SOV_defense_of_moscow }
		available = {
			195 = {
				is_controlled_by = ROOT
				OR = {
					SOV = { surrender_progress > 0.15 }
					any_neighbor_state = {
						NOT = { is_controlled_by = ROOT }
					}
				}
			}
		}
		bypass = {
			NOT = { 195 = { is_owned_and_controlled_by = ROOT } }
		}
		x = 1
		y = 1
		relative_position_id = SOV_defense_of_moscow
		cost = 5
		ai_will_do = {
			factor = 3 #slightly lower importance
			modifier = {
				195 = {
					any_neighbor_state = {
						NOT = { is_controlled_by = ROOT }
					}
				}
				factor = 4 #but less barriers
			}
		}

		completion_reward = {
			army_experience = 10
			195 = {
				custom_effect_tooltip = SOV_defense_of_leningrad_forts
				custom_effect_tooltip = SOV_defense_divisions
				hidden_effect = {
					create_unit = {
						division = "name = \"1ya Vspomogatel'nyye sily oborony Leningradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"2ya Vspomogatel'nyye sily oborony Leningradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"3ya Vspomogatel'nyye sily oborony Leningradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"4ya Vspomogatel'nyye sily oborony Leningradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"5ya Vspomogatel'nyye sily oborony Leningradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"6ya Vspomogatel'nyye sily oborony Leningradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"7ya Vspomogatel'nyye sily oborony Leningradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"1ya Leningradskaya Vspomogatel'naya bronetankovaya sila\" division_template = \"Vspomogatel'naya Bronetankovaya Sila\" start_experience_factor = 0 start_equipment_factor = 0.6 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					add_building_construction = {
						type = bunker
						level = 2
						province = 6174
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 2
						province = 79
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 2
						province = 11068
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 4
						province = 149
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 4
						province = 3151
						instant_build = yes
					}
					add_building_construction = {
						type = anti_air_building
						level = 2
						instant_build = yes
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_MANPOWER }
	}
	focus = {
		id = SOV_move_capital_to_sverdlovsk_old
		text = SOV_move_capital_to_sverdlovsk
		icon = GFX_goal_plan
		prerequisite = { focus = SOV_defense_of_stalingrad_old }
		prerequisite = { focus = SOV_defense_of_leningrad_old }
		x = 0
		y = 2

		relative_position_id = SOV_defense_of_moscow
		cost = 5
		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				NOT = { has_war_with = GER }
			}
		}


		available = {
			SOV = { surrender_progress > 0.4 }
			219 = {
				NOT = { is_owned_and_controlled_by = ROOT }
			}
			653 = {
				is_owned_and_controlled_by = SOV
			}
		}

		completion_reward = {
			army_experience = 10
			custom_effect_tooltip = SOV_move_capital_to_sverdlovsk_effect
			add_victory_points = {
				province = 1821
				value = 15    
			}			
			custom_effect_tooltip = SOV_defense_divisions_4
			hidden_effect = {
				set_capital = { state = 653 }
				653 = {
					add_building_construction = {	#new supply source, so they don't struggle
						type = infrastructure
						level = 5
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 4
						province = 1821
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 10133
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 12567
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 1
						province = 9553
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 1
						province = 307
						instant_build = yes
					}
					create_unit = {
						division = "name = \"1ya Vspomogatel'nyye sily oborony Sverdlovsk\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"2ya Vspomogatel'nyye sily oborony Sverdlovsk\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"3ya Vspomogatel'nyye sily oborony Sverdlovsk\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"1ya Sverdlovsk Vspomogatel'naya bronetankovaya sila\" division_template = \"Vspomogatel'naya Bronetankovaya Sila\" start_experience_factor = 0 start_equipment_factor = 0.6 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					add_extra_state_shared_building_slots = 4
					set_state_flag = SOV_capital_moved_1
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_MANPOWER }
	}
	focus = {
		id = SOV_purchase_allied_weaponry_old
		text = SOV_purchase_allied_weaponry
		icon = GFX_allies
		prerequisite = { focus = SOV_motherland_defense }
		x = 0
		y = 1

		relative_position_id = SOV_motherland_defense
		cost = 10
		ai_will_do = {
			factor = 4
			modifier = {
				factor = 0
				NOT = { has_war_with = GER }
			}
		}

		available = {
			surrender_progress > 0.2
			OR = {
				USA = {
					exists = yes
					NOT = {
						has_war_with = ROOT
					}
				}
				ENG = {
					exists = yes
					NOT = {
						has_war_with = ROOT
					}
				}
			}
		}

		completion_reward = {
			if = {
				limit = {
					ENG = {
						exists = yes
						NOT = {
							has_war_with = SOV
						}
					}
				}
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 5000
					producer = ENG
				}
				add_equipment_to_stockpile = {
					type = artillery_equipment
					amount = 1000
					producer = ENG
				}
				add_equipment_to_stockpile = {
					type = light_tank_chassis
					amount = 100
					producer = ENG
				}
			}
			if = {
				limit = {
					USA = {
						exists = yes
						NOT = {
							has_war_with = SOV
						}
					}
				}
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 10000
					producer = USA
				}
				add_equipment_to_stockpile = {
					type = artillery_equipment
					amount = 200
					producer = USA
				}
				add_equipment_to_stockpile = {
					type = light_tank_chassis
					amount = 250
					producer = USA
				}
			}
		}
		search_filters = { FOCUS_FILTER_MILITARY_EQUIPMENT }
	}
	focus = {
		id = SOV_lease_british_planes_old
		text = SOV_lease_british_planes
		icon = GFX_goal_fighters_uk
		prerequisite = { focus = SOV_purchase_allied_weaponry_old }
		x = 0
		y = 1

		relative_position_id = SOV_purchase_allied_weaponry_old
		cost = 10
		ai_will_do = {
			factor = 2
			modifier = {
				factor = 0
				NOT = { has_war_with = GER }
			}
		}


		available = {
			ENG = {
				exists = yes
				NOT = {
					has_war_with = SOV
				}
			}		
		}

		available_if_capitulated = yes
		cancel_if_invalid = no
		continue_if_invalid = yes

		bypass = {
			
		}

		completion_reward = {
				add_equipment_to_stockpile = {
					type = fighter_equipment
					amount = 250
					producer = ENG
				}
				add_equipment_to_stockpile = {
					type = CAS_equipment
					amount = 100
					producer = ENG
				}
		}
		search_filters = { FOCUS_FILTER_MILITARY_EQUIPMENT }
	}

###---> Military Research branch <><> <><> <><>
	focus = {
		id = SOV_transpolar_flights_old
		text = SOV_transpolar_flights
		icon = GFX_goal_generic_air_fighter2
		x = 16
		y = 0
		cost = 5
		ai_will_do = {
			factor = 8
		}

		available = {
				has_war = no
		}

		bypass = {
			AND = {
				date > 1939.1.1
				has_war = yes
			}
		}

		completion_reward = {
			air_experience = 25
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				add_tech_bonus = {
					bonus = 1.0
					uses = 1
					category = air_equipment
				}				
			}				
			add_tech_bonus = {
				name = air_doctrine_tech_bonus_name
				bonus = 1
				uses = 1
				category = air_doctrine
			}
			add_timed_idea = {
				idea = SOV_transpolar_flights_idea
				days = 435
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}
	focus = {
		id = SOV_ocean_going_navy
		icon = GFX_goal_generic_navy_battleship
		relative_position_id = SOV_transpolar_flights_old
		x = 4
		y = 0
		cost = 5
		ai_will_do = {
			factor = 8
		}

		available_if_capitulated = yes

		completion_reward = {
			add_tech_bonus = {
				name = bb_focus
				bonus = 1
				uses = 2
				category = bb_tech
				category = bc_tech
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 10
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 10
				}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}
	# focus = { #waste of focus time, easy tech
	# 	id = SOV_bt7_development
	# 	icon = GFX_goal_tank_offensive
	# 	x = 16
	# 	y = 0
	# 	cost = 5
	# 	ai_will_do = {
	# 		factor = 9
	# 	}

	# 	available_if_capitulated = yes

	# 	bypass = {
	# 		has_tech = improved_light_tank
	# 	}


	# 	completion_reward = {
	# 		army_experience = 5
	# 		add_tech_bonus = {
	# 			name = SOV_bt7_development
	# 			bonus = 3
	# 			uses = 1
	# 			technology = improved_light_tank
	# 		}
	# 		custom_effect_tooltip = available_designer
	# 		show_ideas_tooltip = morozov_design_bureau
	# 		modify_timed_idea = {
	# 				idea = SOV_revolutionized_industry_1
	# 				days = 10
	# 		}
	# 		modify_timed_idea = {
	# 				idea = SOV_revolutionized_industry_2
	# 				days = 10
	# 		}
	# 	}
	# 	search_filters = { FOCUS_FILTER_RESEARCH }
	# }
	focus = {
		id = SOV_peoples_commissariat
		icon = GFX_goal_support_communism
		prerequisite = { focus = SOV_transpolar_flights_old focus = SOV_ocean_going_navy}
		x = 2
		y = 1
		relative_position_id = SOV_transpolar_flights_old
		cost = 5
		ai_will_do = {
			factor = 8
		}

		available_if_capitulated = yes

		completion_reward = {
			add_ideas = peoples_commissariat_focus

			add_tech_bonus = {
				name = construction_bonus
				bonus = 1
				uses = 1
				category = construction_tech
				}

			if = {
				limit = {
					has_completed_focus = SOV_Invest_in_Engineering_old
				}
				add_timed_idea = {
					idea = SOV_engineering_push
					days = 30
				}
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 20
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 20
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }
	}
	# Air Branch #
	focus = {
		id = SOV_aviation_cult
		icon = GFX_aviation_cult
		prerequisite = { focus = SOV_peoples_commissariat }
		prerequisite = { focus = SOV_transpolar_flights_old }
		x = 0
		y = 2
		relative_position_id = SOV_transpolar_flights_old
		cost = 10
		ai_will_do = {
			factor = 3
		}


		available_if_capitulated = yes

		completion_reward = {
			air_experience = 50

			add_tech_bonus = {
				name = air_bonus
				bonus = 1
				uses = 1
				category = air_equipment
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}
	focus = {
		id = SOV_women_pilots
		icon = GFX_focus_SOV_women_in_aviation
		prerequisite = { focus = SOV_aviation_cult }
		x = -1
		y = 1
		relative_position_id = SOV_aviation_cult
		cost = 5
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 3
				has_war = yes
			}			
		}

		available = {
			NOT = {
				has_idea = SOV_widespread_outbreaks
			}
		}

		available_if_capitulated = yes

		completion_reward = {
			air_experience = 25
			set_rule = {
				can_generate_female_aces = yes
			}
			if = {
				limit = {
					SOV = { has_full_control_of_state = 219 }
				}
				custom_effect_tooltip = SOV_night_witches_tt
				hidden_effect = {
					load_oob = "SOV_night_witches"
				}
			}
		}
		search_filters = { FOCUS_FILTER_MANPOWER }
	}
	focus = {
		id = SOV_militarized_schools_old
		text = SOV_militarized_schools
		icon = GFX_goal_generic_army_doctrines
		prerequisite = { focus = SOV_peoples_commissariat }
		x = 0
		y = 1
		relative_position_id = SOV_peoples_commissariat
		cost = 10
		ai_will_do = {
			factor = 2
			modifier = {
				factor = 15
				has_war = yes
			}				
		}

		available = {
		NOT = {
			has_idea = SOV_widespread_outbreaks
			}
		}

		available_if_capitulated = yes

		completion_reward = {
			army_experience = 5
			every_army_leader = {
				add_planning = 1
				}
			add_ideas = militarized_schools
			add_tech_bonus = {
				name = land_doc_bonus
				bonus = 1
				uses = 1
				category = land_doctrine
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_MANPOWER }
	}

	focus = {
		id = SOV_expand_the_agitprop_old
		text = SOV_expand_the_agitprop
		icon = GFX_goal_generic_army_mobilization2
		prerequisite = { focus = SOV_militarized_schools_old }
		prerequisite = { focus = SOV_aviation_cult }
		x = -1
		y = 1
		relative_position_id = SOV_militarized_schools_old
		cost = 5
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_PROPAGANDA}

		completion_reward = {
			add_political_power = 25
			add_popularity = {
				ideology = communism
				popularity = 0.1
			}

			hidden_effect = {
				SOV_unlock_propaganda_campaign_slot_effect = yes
			}
			unlock_decision_category_tooltip = SOV_propaganda_campaigns
		}
	}
	
	focus = {
		id = SOV_positive_heroism_old
		text = SOV_positive_heroism
		icon = GFX_postive_heroism
		prerequisite = {
			focus = SOV_expand_the_agitprop_old
		}
		mutually_exclusive = {
			focus = SOV_collectivist_propaganda_old
		}
		cost = 5
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 4
				has_war = yes
			}				
		}
		relative_position_id = SOV_expand_the_agitprop_old
		x = -1
		y = 1
		available = {
			NOT = {
				has_idea = SOV_widespread_outbreaks
			}
		}
		available_if_capitulated = yes

		completion_reward = {
			custom_effect_tooltip = kamikaze_focus_tooltip
			# REVISIT Might want to add more
			add_ideas = SOV_positive_heroism_idea
			if = {
				limit = {
					NOT = { has_country_flag = counter_purge }
				}
				custom_effect_tooltip = available_military_high_command
				show_ideas_tooltip = konstantin_rokossovsky
				custom_effect_tooltip = available_theorist
				show_ideas_tooltip = georgy_zhukov
			}
			if = {
				limit = {
					NOT = { has_country_flag = purge_1_group_a }
				}
				custom_effect_tooltip = available_military_high_command
				show_ideas_tooltip = mikhail_tukhachevsky
			}
			custom_effect_tooltip = unlock_propaganda_campaign_tt
			unlock_decision_tooltip = SOV_propaganda_heroes_forward
			custom_effect_tooltip = unlock_propaganda_campaign_slot_tt
			SOV_unlock_propaganda_campaign_slot_effect = yes

			hidden_effect = {
				set_rule = {
					can_use_kamikaze_pilots = yes
				}
			}
		}
	}
	focus = {
		id = SOV_collectivist_propaganda_old
		text = SOV_collectivist_propaganda
		icon = GFX_goal_generic_worker_support
		prerequisite = { focus = SOV_expand_the_agitprop_old }
		x = -3
		y = 1
		relative_position_id = SOV_expand_the_agitprop_old
		cost = 10

		mutually_exclusive = { focus = SOV_positive_heroism_old }
		
		search_filters = {FOCUS_FILTER_MANPOWER FOCUS_FILTER_PROPAGANDA}

		completion_reward = {
			add_political_power = 25
			add_ideas = SOV_collectivist_propaganda_ns

			custom_effect_tooltip = unlock_propaganda_campaign_tt
			unlock_decision_tooltip = SOV_propaganda_for_the_motherland
			custom_effect_tooltip = unlock_propaganda_campaign_slot_tt
			SOV_unlock_propaganda_campaign_slot_effect = yes
		}
	}
	focus = {
		id = SOV_tank_programs
		icon = GFX_goal_tank_map
		prerequisite = { focus = SOV_militarized_schools_old }
		x = 0
		y = 2
		cost = 10
		ai_will_do = {
			factor = 15
			modifier = {
				factor = 8
				has_war = yes
			}				
		}
		relative_position_id = SOV_militarized_schools_old
		# available = {
		# 	date > 1939.01.01
		# }

		available_if_capitulated = yes

		completion_reward = {			
			add_tech_bonus = {
				name = GER_counter_sloped_armor
				bonus = 1
				uses = 1
				category = cat_light_armor
			}			
			add_tech_bonus = {
				name = GER_counter_sloped_armor
				bonus = 1
				ahead_reduction = 1
				uses = 1
				category = cat_medium_armor
			}
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = SOV_plant_37	
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}
	focus = {
		id = SOV_mass_tank_production_old
		text = SOV_mass_tank_production
		icon = GFX_focus_generic_tank_production
		prerequisite = { focus = SOV_tank_programs }
		mutually_exclusive = { focus = SOV_tank_improvements }
		x = -1
		y = 1
		cost = 14.30
		ai_will_do = {
			factor = 20			
		}
		relative_position_id = SOV_tank_programs
		cancel_if_invalid = no
		available = {
			OR = {
				has_idea = war_economy
				has_idea = tot_economic_mobilisation
			}
			has_war = yes
			any_enemy_country = {
				is_major = yes
			}
		}

		
		completion_reward = {
			add_ideas = SOV_mass_tank_procution_idea
		}
	}
	focus = {
		id = SOV_establish_tankograd
		icon = GFX_goal_SOV_tankograd
		prerequisite = { focus = SOV_mass_tank_production_old }
		x = 0
		y = 1
		cost = 10
		ai_will_do = {
			factor = 50
		}
		relative_position_id = SOV_mass_tank_production_old
		cancel_if_invalid = no
		available = {
			OR = {
				has_idea = war_economy
				has_idea = tot_economic_mobilisation
			}
			has_war = yes
			any_enemy_country = {
				is_major = yes
			}
			has_global_flag = relocate_industry_from_leningrad
		}

		completion_reward = {			
			random_owned_controlled_state = {
				prioritize = { 572 }
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			if = {
				limit = {
					has_completed_focus = SOV_Invest_in_Engineering_old
				}
				add_timed_idea = {
					idea = SOV_engineering_push
					days = 30
				}
			}
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = SOV_tankograd		
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}			
	focus = {
		id = SOV_tank_improvements
		icon = GFX_goal_generic_license_tanks
		prerequisite = { focus = SOV_tank_programs }
		mutually_exclusive = { focus = SOV_mass_tank_production_old }
		x = 1
		y = 1
		cost = 10
		ai_will_do = {
			factor = 15
		}
		relative_position_id = SOV_tank_programs
		cancel_if_invalid = no
		available = {
			OR = {
				has_idea = war_economy
				has_idea = tot_economic_mobilisation
			}
			
		}

		

		completion_reward = {
			add_ideas = SOV_tank_improvements_idea
			if = {
				limit = {
					has_completed_focus = SOV_Invest_in_Engineering_old
				}
				add_timed_idea = {
					idea = SOV_engineering_push
					days = 30
				}
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 70
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 70
			}			
			
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = SOV_uralmash
						
		}
	}
	focus = {
		id = SOV_cat_killers
		icon = GFX_focus_generic_army_tanks2
		prerequisite = { focus = SOV_tank_improvements }
		x = 0
		y = 1
		cost = 5
		ai_will_do = {
			factor = 10
		}
		relative_position_id = SOV_tank_improvements
		cancel_if_invalid = no
		available = {
			OR = {
				has_idea = war_economy
				has_idea = tot_economic_mobilisation
			}
			has_war = yes
			any_enemy_country = {
				is_major = yes
			}
		}

		

		completion_reward = {
			add_tech_bonus = {
				name = GER_counter_sloped_armor
				bonus = 1
				uses = 1
				category = cat_anti_tank
			}
            add_tech_bonus = {
                name = tank_bonus
                bonus = 2
                uses = 1
                technology = improved_light_td
				technology = advanced_light_td
			}
            add_tech_bonus = {
                name = tank_bonus
                bonus = 2
				uses = 1
				technology = basic_medium_td
                technology = improved_medium_td
				technology = advanced_medium_td
			}
            add_tech_bonus = {
                name = tank_bonus
                bonus = 2
				uses = 1
				technology = basic_heavy_td
                technology = improved_heavy_td
				technology = advanced_heavy_td
            }												
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}	
	#tblra_tank_destroyers_expertise
	# Navy branch #
	focus = {

		id = SOV_expand_red_fleet
		icon = GFX_goal_generic_build_navy
		prerequisite = { focus = SOV_peoples_commissariat }
		prerequisite = { focus = SOV_ocean_going_navy }
		available = { has_offensive_war = no }
		x = 0
		y = 2
		relative_position_id = SOV_ocean_going_navy
		cost = 10
		ai_will_do = {
			factor = 1
		}

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit = { has_state_flag = SOV_expand_red_fleet_2dockyards }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
			add_tech_bonus = {
				name = ships_bonus
				bonus = 1
				uses = 2
				category = naval_equipment
			}
		}

		completion_reward = {
			navy_experience = 25
			random_owned_controlled_state = {
				limit = {
					dockyard > 0
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
				set_state_flag = SOV_expand_red_fleet_2dockyards
			}
			random_owned_controlled_state = {
				limit = {
					dockyard > 0
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
				set_state_flag = SOV_expand_red_fleet_2dockyards
			}
			add_tech_bonus = {
				name = ships_bonus
				bonus = 1
				uses = 2
				category = naval_equipment
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_1
					days = 50
			}
			modify_timed_idea = {
					idea = SOV_revolutionized_industry_2
					days = 50
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SOV_improve_our_naval_doctrine_old
		text = SOV_improve_our_naval_doctrine
		icon = GFX_goal_generic_navy_doctrines_tactics
		prerequisite = { focus = SOV_expand_red_fleet }
		prerequisite = { focus = SOV_militarized_schools_old }
		x = -1
		y = 1
		relative_position_id = SOV_expand_red_fleet
		cost = 10

		available_if_capitulated = yes


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				all_owned_state = {
					OR = {
						is_coastal = no
						dockyard < 1
					}
				}
			}
		}

		completion_reward = {
			navy_experience = 25
			add_tech_bonus = {
				name = naval_doctrine_bonus
				bonus = 1
				uses = 2
				category = naval_doctrine
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}


####---> Ported army tree <><> <><> <><>
focus = {
    id = SOV_strengthen_the_mobilization_plan_old
	text = SOV_strengthen_the_mobilization_plan
    icon = GFX_focus_SOV_mobilization_plan
    x = 10
    y = 0
    relative_position_id = SOV_transpolar_flights_old
    cost = 5

    ai_will_do = {
        factor = 1
    }

    available = {

    }
    
    search_filters = {FOCUS_FILTER_MANPOWER}

    completion_reward = {
        remove_ideas = SOV_soviet_mobilization
    }
}

# focus = {
#     id = SOV_restore_cossack_units_old
# 	text = SOV_restore_cossack_units
#     icon = GFX_focus_SOV_restore_cossack_units
#     prerequisite = { focus = SOV_strengthen_the_mobilization_plan_old }
#     x = -1
#     y = 1
#     relative_position_id = SOV_strengthen_the_mobilization_plan_old
#     cost = 5

#     #mutually_exclusive = { focus = SOV_cohesion_first_old }

#     available = {

#     }

#     completion_reward = {
#         # add_to_variable = { SOV_the_red_army_modifier_army_sub_unit_cavalry_speed_factor = 0.05 }
#         # add_to_variable = { SOV_the_red_army_cavalry_attack_factor = 0.05 }
#         # custom_effect_tooltip = SOV_restore_cossack_units_ns_tt

#         # show_unit_leaders_tooltip = SOV_lev_dovator

#         #Spawn Cossack divisions
#         custom_effect_tooltip = SOV_restore_cossack_units_spawn_tt
#         hidden_effect = {
#             division_template = {
#                 name = "Kazachya Kavaleryskaya Diviziya"
#                 division_names_group = SOV_CAV_02

#                 regiments = {
#                     cavalry = { x = 0 y = 0 }
#                     cavalry = { x = 0 y = 1 }
#                     cavalry = { x = 1 y = 0 }
#                     cavalry = { x = 1 y = 1 }
#                     mot_artillery_brigade = { x = 2 y = 0 }
#                     light_armor = { x = 3 y = 0 }
#                 }
#                 support = {
#                     engineer = { x = 0 y = 0 }
#                     artillery = { x = 0 y = 1 }
#                     recon = { x = 0 y = 2 }
#                 }
#             }

#             capital_scope = {
#                 #Cossack Cavalry
#                 create_unit = { 
#                     division = "name = \"4ya Donskaya Kazachya Kav. Div.\" division_template = \"Kazachya Kavaleryskaya Diviziya\" start_experience_factor = 0.8 start_equipment_factor = 1.0" owner = ROOT
#                 }
#                 create_unit = { 
#                     division = "name = \"6ya Kubansko-Terskaya Kazachya Kav. Div.\" division_template = \"Kazachya Kavaleryskaya Diviziya\" start_experience_factor = 0.8 start_equipment_factor = 1.0" owner = ROOT
#                 }
#                 create_unit = { 
#                     division = "name = \"10ya Tersko-Stavropolskaya Kazachya Kav. Div\" division_template = \"Kazachya Kavaleryskaya Diviziya\" start_experience_factor = 0.8 start_equipment_factor = 1.0" owner = ROOT
#                 }
#                 create_unit = { 
#                     division = "name = \"12ya Kubanskaya Kazachya Kav. Div.\" division_template = \"Kazachya Kavaleryskaya Diviziya\" start_experience_factor = 0.8 start_equipment_factor = 1.0" owner = ROOT
#                 }

#                 #Cossack Infantry
#                 create_unit = {
#                     division = "name = \"13ya Donskaya Kazachya Div.\" division_template = \"Strelkovaya Diviziya\" start_experience_factor = 0.7 start_equipment_factor = 1.0" owner = ROOT
#                 }
#             }
#         }
#     }
# }

# focus = {
#     id = SOV_cohesion_first_old
# 	text = SOV_cohesion_first
#     icon = GFX_focus_secret_rearmament
#     prerequisite = { focus = SOV_strengthen_the_mobilization_plan_old }
#     x = 1
#     y = 1
#     relative_position_id = SOV_strengthen_the_mobilization_plan_old
#     cost = 5

#     mutually_exclusive = { focus = SOV_restore_cossack_units_old }

#     available = {
#     }

#     completion_reward = {
#         # add_to_variable = { SOV_the_red_army_army_org_factor = 0.05 }
#         # add_to_variable = { SOV_the_red_army_training_time_factor = 0.1 }
#         # custom_effect_tooltip = SOV_cohesion_first_ns_tt
#     }
# }

focus = {
    id = SOV_rehabilitated_military_old
	text = SOV_rehabilitated_military
    icon = GFX_goal_generic_small_arms
    prerequisite = { focus = SOV_strengthen_the_mobilization_plan_old }
    x = 0
    y = 1
    relative_position_id = SOV_strengthen_the_mobilization_plan_old
    cost = 10

    available = {
        NOT = { has_idea = trotskyite_plot_nsb }
    }
	bypass = {
		NOT = {	#went non-commie
			has_idea = SOV_politicized_military_1
		}
	}
    completion_reward = {
		swap_ideas = {
			remove_idea = SOV_politicized_military_1
			add_idea = SOV_politicized_military_2
		}
    }
}

focus = {
    id = SOV_military_reorganization_old
	text = SOV_military_reorganization
    icon = GFX_focus_generic_military_mission
    prerequisite = { focus = SOV_rehabilitated_military_old }
    x = 0
    y = 1
    relative_position_id = SOV_rehabilitated_military_old
    cost = 10

    select_effect = {
        add_ideas = SOV_military_reorganization_ns
    }

    available = {

    }
    
    search_filters = {FOCUS_FILTER_ARMY_XP}

    completion_reward = {
        #Tooltip purposes (Select Effect)
        custom_effect_tooltip = SOV_focus_select_effect_tt
        effect_tooltip = {
            add_ideas = SOV_military_reorganization_ns
        }

        #(Complete Effect)
        custom_effect_tooltip = SOV_focus_complete_effect_tt
        hidden_effect = {
            remove_ideas = SOV_military_reorganization_ns
        }

        # add_to_variable = { SOV_the_red_army_unit_infantry_design_cost_factor = -0.1 }
        # add_to_variable = { SOV_the_red_army_unit_artillery_brigade_design_cost_factor = -0.1 }
        # custom_effect_tooltip = SOV_military_reorganization_ns_tt

        army_experience = 50
        add_command_power = 25
    }
}

focus = {
    id = SOV_desperate_measures_old
	text = SOV_desperate_measures
    icon = GFX_goal_manpower
    prerequisite = { focus = SOV_strengthen_the_mobilization_plan_old }
    x = 2
    y = 1
    relative_position_id = SOV_strengthen_the_mobilization_plan_old
    cost = 5

    available = {
        any_enemy_country = {
            SOV_is_major_not_original_sov = yes
        }
    }

    completion_reward = {
        add_timed_idea = {
            idea = SOV_desperate_measures_ns
            days = 365
        }

        custom_effect_tooltip = SOV_desperate_measures_decisions_unlocked_tt
    }
}

focus = {
    id = SOV_an_adaptable_army_old
	text = SOV_an_adaptable_army
    icon = GFX_focus_prc_infiltration
    prerequisite = { focus = SOV_rehabilitated_military_old }
    #prerequisite = { focus = SOV_desperate_measures_old }
    x = -2
    y = 1
    relative_position_id = SOV_rehabilitated_military_old
    cost = 10

    available = {
		#always = no
    }

    completion_reward = {
		add_ideas = SOV_terrain_expertise_1
    }
}

focus = {
    id = SOV_lessons_of_war_old
	text = SOV_lessons_of_war
    icon = GFX_goal_generic_army_elite
    prerequisite = { focus = SOV_rehabilitated_military_old }
    prerequisite = { focus = SOV_desperate_measures_old }
    x = 0
    y = 1
    relative_position_id = SOV_desperate_measures_old
    cost = 5

    available = {
        NOT = { has_idea = SOV_desperate_measures_ns }
    }
    
    search_filters = {FOCUS_FILTER_ARMY_XP}

    completion_reward = {
        # add_to_variable = { SOV_the_red_army_army_org_factor = 0.05 }
        # set_variable = { SOV_the_red_army_experience_gain_army_factor = 0 }
        # set_variable = { SOV_the_red_army_experience_loss_factor = 0 }

        # custom_effect_tooltip = SOV_lessons_of_war_ns_tt

        unlock_decision_tooltip = SOV_order_227
        custom_effect_tooltip = SOV_lessons_of_war_unlock_military_operations_tt
		army_experience = 20
		add_tech_bonus = {
			name = armor_bonus
			bonus = 1
			uses = 1
			category = armor
		}
		add_tech_bonus = {
			name = armor_bonus
			bonus = 1
			category = land_doctrine
		}
		if = { limit = { has_idea = officers_purged } remove_ideas = officers_purged }
		if = { limit = { has_idea = officers_purged_2 } remove_ideas = officers_purged_2 }
		if = { limit = { has_idea = officers_purged_3 } remove_ideas = officers_purged_3 }
		if = { limit = { has_idea = officers_purged_4 } remove_ideas = officers_purged_4 }
		if = { limit = { has_idea = officers_purged_5 } remove_ideas = officers_purged_5 }
		if = { limit = { has_idea = officers_purged_6 } remove_ideas = officers_purged_6 }
		if = { limit = { has_idea = officers_purged_7 } remove_ideas = officers_purged_7 }
		if = { limit = { has_idea = officers_purged_8 } remove_ideas = officers_purged_8 }
		if = { limit = { has_idea = officers_purged_9 } remove_ideas = officers_purged_9 }
		if = { limit = { has_idea = officers_purged_10 } remove_ideas = officers_purged_10 }
		if = { limit = { has_idea = SOV_great_patriotic_war } remove_ideas = SOV_great_patriotic_war }
		if = { limit = { has_idea = SOV_great_patriotic_war_2 } remove_ideas = SOV_great_patriotic_war_2 }
		if = { limit = { has_idea = SOV_great_patriotic_war_3 } remove_ideas = SOV_great_patriotic_war_3 }
		if = { limit = { has_idea = SOV_great_patriotic_war_4 } remove_ideas = SOV_great_patriotic_war_4 }
		if = { limit = { has_idea = SOV_great_patriotic_war_5 } remove_ideas = SOV_great_patriotic_war_5 }
    }
}

focus = {
    id = SOV_penal_battalions_old
	text = SOV_penal_battalions
    icon = GFX_focus_SOV_penal_battalions
    prerequisite = { focus = SOV_desperate_measures_old }
    x = 2
    y = 1
    relative_position_id = SOV_desperate_measures_old
    cost = 5

    available = {
        has_war = yes
    }

    completion_reward = {
        #Spawn Penal divisions
        custom_effect_tooltip = SOV_penal_battalions_spawn_tt
        hidden_effect = {
            set_technology = { penal_infantry = 1 popup = no }

            division_template = {
                name = "Shtrafnaya Chast"
                division_names_group = SOV_PEN_01
                is_locked = yes

                regiments = {
                    penal_battalion = { x = 0 y = 0 }
                    penal_battalion = { x = 0 y = 1 }
                    penal_battalion = { x = 0 y = 2 }
                    penal_battalion = { x = 1 y = 0 }
                    penal_battalion = { x = 1 y = 1 }
                    penal_battalion = { x = 1 y = 2 }
                    penal_battalion = { x = 2 y = 0 }
                    penal_battalion = { x = 2 y = 1 }
                    penal_battalion = { x = 2 y = 2 }
                }
                support = {
                    artillery = { x = 0 y = 0 }
                }
            }

            SOV_spawn_penal_divisions_effect = yes
        }
    }
}

focus = {
    id = SOV_organization_of_the_partisans_old
	text = SOV_organization_of_the_partisans
    icon = GFX_focus_focus_fra_maquis
    prerequisite = { focus = SOV_lessons_of_war_old }
    x = 0
    y = 1
    relative_position_id = SOV_lessons_of_war_old
    cost = 10

    available = {
        any_owned_state = {
            controller = {
                has_war_with = ROOT
            }
        }
    }
    
    search_filters = {FOCUS_FILTER_PROPAGANDA}

    completion_reward = {
        # add_to_variable = { SOV_the_red_army_operative_slot  = 1 }
        custom_effect_tooltip = SOV_organization_of_the_partisans_ns_tt

        if = {
            limit = {
                has_government = communism
            }
            show_unit_leaders_tooltip = SOV_vasily_korzh
            show_unit_leaders_tooltip = SOV_sidor_kovpak
        }

        if = {
            limit = {
                has_dlc = "La Resistance"
            }
            if = {
                limit = {
                    has_government = communism
                }
                create_operative_leader = {
                    name = "Dmitry Medvedev"
                    GFX = GFX_Portrait_dmitry_medvedev
                    female = yes
                    traits = { operative_demolition_expert operative_commando }
                    bypass_recruitment = no
                    available_to_spy_master = yes
                    nationalities = { SOV }
                }
            }

            add_timed_idea = {
                idea = SOV_central_headquarters_of_the_partisan_movement
                days = 720
            }
        }
        else = {
            add_timed_idea = {
                idea = SOV_central_headquarters_of_the_partisan_movement_no_lar
                days = 720
            }
        }

        if = {
            limit = {
                has_government = communism
            }
            custom_effect_tooltip = unlock_propaganda_campaign_tt
            unlock_decision_tooltip = SOV_propaganda_glory_to_partisans
            unlock_decision_tooltip = SOV_propaganda_death_to_invaders
            custom_effect_tooltip = propaganda_campaign_requirement_tt
        }
    }
}

focus = {
    id = SOV_experts_in_camouflage_old
	text = SOV_experts_in_camouflage
    icon = GFX_goal_infantry_flames
    prerequisite = { focus = SOV_an_adaptable_army_old }
    x = 0
    y = 1
    relative_position_id = SOV_an_adaptable_army_old
    cost = 5

    available = {

    }

    completion_reward = {
        swap_ideas = {
			remove_idea = SOV_terrain_expertise_1
			add_idea = SOV_terrain_expertise_2
		}
    }
}

focus = {
    id = SOV_swap_to_political_advisors_old
	text = "Phase Out Political Commisars"
    icon = GFX_postive_heroism
    prerequisite = { focus = SOV_military_reorganization_old }
    prerequisite = { focus = SOV_lessons_of_war_old }
    x = -2
    y = 1
    relative_position_id = SOV_lessons_of_war_old
    cost = 10

    available = {
		has_idea = SOV_politicized_military_2
    }

	bypass = {
		NOT = {
			has_idea = SOV_politicized_military_2 
		}
	}

    
    search_filters = {FOCUS_FILTER_ARMY_XP}

    completion_reward = {
		remove_ideas = SOV_politicized_military_2 
    }
}

focus = {
    id = SOV_the_glory_of_the_red_army_old
	text = SOV_the_glory_of_the_red_army
    icon = GFX_focus_SOV_the_glory_of_the_red_army_communism
    prerequisite = { focus = SOV_swap_to_political_advisors_old }
    x = 0
    y = 1
    relative_position_id = SOV_swap_to_political_advisors_old
    cost = 10

    allow_branch = {
        NOT = {
            has_government = fascism
            has_government = neutrality
        }
    }

    available = {
        any_enemy_country = {
            SOV_is_major_not_original_sov = yes
        }
        surrender_progress < 0.05
    }
    
    search_filters = {FOCUS_FILTER_ARMY_XP}

    completion_reward = {
        # add_to_variable = { SOV_the_red_army_special_forces_cap = 0.1 }
        # add_to_variable = { SOV_the_red_army_land_doctrine_cost_factor = -0.1 }
        # custom_effect_tooltip = SOV_the_glory_of_the_red_army_ns_tt

        army_experience = 75
        
        show_unit_leaders_tooltip = SOV_pavel_rybalko
        
        #New
        hidden_effect = {
            set_technology = { masterful_blitz = 1 popup = no }
        }
        custom_effect_tooltip = SOV_the_glory_of_the_red_army_masterful_blitz_tactic_tt
    }
}

focus = {
    id = SOV_the_glory_of_the_red_army_alt_old
	text = SOV_the_glory_of_the_red_army_alt
    icon = GFX_focus_SOV_the_glory_of_the_red_army_alternative
    prerequisite = { focus = SOV_swap_to_political_advisors_old }
    x = 0
    y = 1
    relative_position_id = SOV_swap_to_political_advisors_old
    cost = 10

    allow_branch = {
        OR = {
            has_government = fascism
            has_government = neutrality
        }
    }

    available = {
        any_enemy_country = {
            SOV_is_major_not_original_sov = yes
        }
        surrender_progress < 0.05
    }
    
    search_filters = {FOCUS_FILTER_ARMY_XP}

    completion_reward = {
        # add_to_variable = { SOV_the_red_army_special_forces_cap = 0.1 }
        # add_to_variable = { SOV_the_red_army_land_doctrine_cost_factor = -0.1 }
        # custom_effect_tooltip = SOV_the_glory_of_the_red_army_ns_tt

        army_experience = 75

        #New
        hidden_effect = {
            set_technology = { masterful_blitz = 1 popup = no }
        }
        custom_effect_tooltip = SOV_the_glory_of_the_red_army_masterful_blitz_tactic_tt
    }
}

focus = {
	id = SOV_great_purge
	icon = GFX_goal_generic_backstab
	mutually_exclusive = { focus = SOV_form_a_fifth_column_old }
	available = {
		NOT = { has_country_flag = counter_purge }
		has_government = communism
	}
	x = 33
	y = 0
	cost = 28.7
	ai_will_do = {
		factor = 9
	}

	bypass = {
		OR = {
			has_country_flag = SOV_soviet.48_notrotsky
			has_country_flag = SOV_khruschev_flag
		}
	}

	select_effect = {
		country_event = { id = soviet.24 days = 1 }
		set_country_flag = SOV_purge_started
	}
	completion_reward = {
		custom_effect_tooltip = SOV_great_purge_tt
		custom_effect_tooltip = SOV_great_purge_tt2

		#Full military purge. Hardest penalty
		if = {
			limit = {
				OR = {
					has_country_flag = purge_1_group_a
					has_country_flag = purge_1_group_b
				}
				OR = {
					has_country_flag = purge_2_group_a
					has_country_flag = purge_2_group_b
				}
			}
			add_timed_idea = {
				idea = officers_purged
				days = 1460
			}
			hidden_effect = {
				country_event = { id = soviet.37 days = 146 }
			}
			hidden_effect = {
				news_event = { hours = 6 id = news.219 }
			}
		}

		#1 military purge. Lower penalty
		if = {
			limit = {
				OR = {
					AND = {
						NOT = {
							has_country_flag = purge_1_group_a
							has_country_flag = purge_1_group_b
						}
						OR = {
							has_country_flag = purge_2_group_a
							has_country_flag = purge_2_group_b
						}
					}
					AND = {
						OR = {
							has_country_flag = purge_1_group_a
							has_country_flag = purge_1_group_b
						}
						NOT = {
							has_country_flag = purge_2_group_a
							has_country_flag = purge_2_group_b
						}
					}
				}
			}
			add_timed_idea = {
				idea = officers_purged_4
				days = 1021
			}
			hidden_effect = {
				country_event = { id = soviet.40 days = 146 }
			}
		}

		#No military purge. Lowest penalty.
		if = {
			limit = {
				NOT = {
					has_country_flag = purge_1_group_a
					has_country_flag = purge_1_group_b
				}
				NOT = {
					has_country_flag = purge_2_group_a
					has_country_flag = purge_2_group_b
				}
			}
			add_timed_idea = {
				idea = officers_purged_7
				days = 583
			}
			hidden_effect = {
				country_event = { id = soviet.43 days = 146 }
			}
		}
		swap_ideas = { remove_idea = trotskyite_plot_nsb add_idea = trotskyite_plot_purged }

		hidden_effect = {
			if = {
				limit = {
					any_other_country = {
						is_major = yes
						has_offensive_war_with = SOV
					}
				}
				country_event = { id = soviet.46 days = 3 }
			}
			mark_focus_tree_layout_dirty = yes
		}
	}
	search_filters = { FOCUS_FILTER_STABILITY }
}

focus = {
	id = SOV_stalin_constitution
	icon = GFX_goal_stalin
	prerequisite = { focus = SOV_great_purge }
	relative_position_id = SOV_great_purge
	x = 0
	y = 1
	cost = 10
	ai_will_do = {
		factor = 10
	}
	bypass = {
		NOT = {
			has_country_leader = { ruling_only = yes name = "Iosif Stalin" }
		}
	}
	available_if_capitulated = yes

	completion_reward = {
		add_political_power = 300
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}


	focus = {
	id = SOV_nkvd_primacy_old
	text = SOV_nkvd_primacy
	icon = GFX_goal_HON_nkvd_assistance
	prerequisite = { focus = SOV_stalin_constitution }
	x = -1
	y = 1
	relative_position_id = SOV_stalin_constitution
	cost = 10
	ai_will_do = {
		factor = 10
		modifier = {
			factor = 1000
			any_claim = yes
			has_war = yes
		}
	}

	available_if_capitulated = yes

	completion_reward = {
		if = {
			limit = {
				has_dlc = "La Resistance"
				NOT = {
					has_intelligence_agency = yes
				}
			}
			create_intelligence_agency = yes				
		}			
		add_ideas = nkvd
		add_tech_bonus = {
			name = mp_tech_bonus_name
			bonus = 1
			uses = 1
			category = military_police_tech
		}			
	}
	search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_POLITICAL FOCUS_FILTER_ESPIONAGE }
}

focus = {
	id = SOV_nkvd_divisions
	icon = GFX_goal_generic_secret_police
	prerequisite = { focus = SOV_nkvd_primacy_old }
	x = 0
	y = 1
	relative_position_id = SOV_nkvd_primacy_old
	cost = 10
	ai_will_do = {
		factor = 1
		modifier = {
			factor = 1000
			any_claim = yes
			has_war = yes
		}
	}

	available_if_capitulated = yes

	completion_reward = {
		custom_effect_tooltip = SOV_nkvd_upgrade_tooltip
		if = {
			limit = {
				has_dlc = "La Resistance"
			}
			swap_ideas = {
				remove_idea = nkvd
				add_idea = nkvd_2_lar
			}				
		}
		else = {
			swap_ideas = {
				remove_idea = nkvd
				add_idea = nkvd_2
			}
		}

	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

### ALT HIST

focus = {
	id = SOV_form_a_fifth_column_old
	text = SOV_form_a_fifth_column
	icon = GFX_goal_SOV_trot_destalinization
	mutually_exclusive = { focus = SOV_great_purge }
	x = 30
	y = 0
	relative_position_id = SOV_great_purge
	cost = 14.30

	ai_will_do = {
		factor = 5
	}

	allow_branch = {
		if = {
			limit = {
				has_game_rule = {
					rule = obsolete_focus_branches_visibility
					option = HIDE
				}
			}
			NOT = {
				has_completed_focus = SOV_great_purge
			}
		}
	}

	available = {
		date < 1937.2.1
		custom_trigger_tooltip = {
			tooltip = SOV_no_major_purge_tt		
			check_variable = { SOV_great_purge_counter < 1 }
		}
	}

	bypass = {
		has_country_flag = trotsky_check
	}

	cancel_if_invalid = no
	continue_if_invalid = yes
	

	select_effect = {
		if = {
			limit = {
				OR = {
					has_country_leader = { name = "Iosif Stalin" }
					has_country_leader = { name = "Kliment Voroshilov" }
				}	
			}
			country_event = { id = r56.soviet.18 days = 1 }
		}
		set_country_flag = SOV_fifth_column_started
		set_country_flag = SOV_no_purge_events
		remove_ideas = SOV_genrikh_yagoda
		add_ideas = SOV_nikolay_yezhov
	}

	completion_reward = {
		custom_effect_tooltip = SOV_fifth_column_tt
		hidden_effect = {
			set_country_flag = trotsky_check
			217 = { set_state_name = "Volgograd" }  #rename province too
			set_province_name = { id = 3529 name = "Volgograd"}
			country_event = { id = r56.soviet.24 days = 7 }
			news_event = { id = r56.soviet.27 days = 1 }
			if = {
				limit = {
					has_country_flag = vlasov_yes
				}
				set_country_flag = vlasov_help_coup
			}
			if = {
				limit = {
					has_country_flag =  yes_politcal_people
				}
				#set_country_flag = yes_politcal_people_open
				SOV_pavel_milyukov = { #required by next focus
					clr_character_flag = SOV_exiled_flag
				}
			}
			if = {
				limit = {
					has_country_flag = yes_generals
				}
				#set_country_flag = yes_generals_open
				SOV_anatoly_rogozhin = {
					clr_character_flag = SOV_exiled_flag
				}
				SOV_konstantin_nechaev = {
					clr_character_flag = SOV_exiled_flag
				}
				SOV_ivan_smirnov = {
					clr_character_flag = SOV_imprisoned_flag
				}
			}
			if = {
				limit = {
					has_country_flag = yes_to_exiles_1
					NOT = {
						has_country_flag = yes_to_exiles_2
						has_country_flag = yes_to_exiles_3
					}
				}
				add_ideas = SOV_internal_chaos_1
				add_timed_idea = {
					idea = officers_purged_civil_war
					days = 2040
				}
				add_popularity = {
					ideology = democratic
					popularity = 0.02
				}
				add_popularity = {
					ideology = neutrality
					popularity = 0.06
				}
				add_popularity = {
					ideology = fascism
					popularity = 0.02
				}
			}
			if = {
				limit = {
					has_country_flag = yes_to_exiles_1
					has_country_flag = yes_to_exiles_2
					NOT = {
						has_country_flag = yes_to_exiles_3
					}
				}
				add_ideas = SOV_internal_chaos_2
				add_timed_idea = {
					idea = officers_purged_civil_war
					days = 1940
				}
				add_popularity = {
					ideology = democratic
					popularity = 0.05
				}
				add_popularity = {
					ideology = neutrality
					popularity = 0.14
				}
				add_popularity = {
					ideology = fascism
					popularity = 0.07
				}
			}
			if = {
				limit = {
					has_country_flag = yes_to_exiles_1
					has_country_flag = yes_to_exiles_2
					has_country_flag = yes_to_exiles_3
				}
				add_ideas = SOV_internal_chaos_3
				add_timed_idea = {
					idea = officers_purged_civil_war
					days = 1840
				}
				add_popularity = {
					ideology = democratic
					popularity = 0.09
				}
				add_popularity = {
					ideology = neutrality
					popularity = 0.29
				}
				add_popularity = {
					ideology = fascism
					popularity = 0.1
				}
			}
			remove_ideas = trotskyite_plot_nsb
			set_global_flag = soviet_civil_war_1
			country_event = { id = r56.soviet.24 days = 7 }
			clr_country_flag = SOV_fifth_column_started
			set_cosmetic_tag = SOV2
			set_country_flag = counter_purge
			retire_character = SOV_konstantin_rokossovsky
			remove_ideas = mikhail_kalinin
			remove_ideas = ivan_konev
			remove_unit_leader = 408
			remove_ideas = pavel_zhigarev
			remove_ideas = stepan_krasovsky
			remove_ideas = arseniy_golovko
			remove_unit_leader = 409
			remove_ideas = georgy_zhukov
			remove_unit_leader = 410
			remove_ideas = sergey_gorshkov
			remove_unit_leader = 411
			kill_country_leader = yes
			create_country_leader = {
				name = "Nikolai Yezhov"
				desc = "POLITICS_NIKOLAI_YEZHOV_DESC"
				picture = "gfx/leaders/SOV/r56_portrait_SOV_Nikolai_Yezhov.dds"
				expire = "1965.1.1"
				ideology = leninism
				traits = {
					political_dancer
				}
			}
		}
	}
	search_filters = { FOCUS_FILTER_STABILITY FOCUS_FILTER_POLITICAL }
}
focus = {
	id = SOV_counter_coup_old
	text = SOV_counter_coup
	icon = GFX_counter_coup
	prerequisite = { focus = SOV_form_a_fifth_column_old }
	mutually_exclusive = { focus = SOV_trotskyite_victory  }
	relative_position_id = SOV_form_a_fifth_column_old
	x = 5
	y = 1

	cost = 10

	ai_will_do = {
		factor = 50
	}

	available = {
		if = {
			limit = {
				is_ai = no
			}
			date < 1939.01.1
		}
		has_civil_war = no
	#	has_idea = SOV_pavel_milyukov
	#	has_idea = SOV_andrey_vlasov
	#	has_idea = SOV_anatoly_rogozhin
	#	has_idea = SOV_konstantin_nechaev
	}

	bypass = {
		#
	}

	
	
	

	complete_tooltip = {
		#
	}

	completion_reward = {
		custom_effect_tooltip = SOV_counter_coup_tt
		hidden_effect = {
			set_country_flag = counter_coup_purge
			retire_character = SOV_vyacheslav_molotov
			retire_character = SOV_boris_shaposhnikov
			retire_character = SOV_nikolay_yezhov
			retire_character = SOV_mikhail_kalinin
			retire_character = SOV_kliment_voroshilov
			retire_character = SOV_georgy_zakharov
			retire_character = SOV_andrey_yeryomenko
			retire_character = SOV_ivan_fedyuninsky
			retire_character = SOV_kuzma_galitsky
			retire_character = SOV_semyon_budyonny
			retire_character = SOV_grigory_kulik
			217 = { set_state_name = "Tsaritsyn" }  #rename provinces too
			195 = { set_state_name = "St.Petersburg" }  
			252 = { set_state_name = "Nijni Novgorod" }
			247 = { set_state_name = "Tver" }
			653 = { set_state_name = "Yekaterinburg" }
			250 = { set_state_name = "Simbirsk" }
			251 = { set_state_name = "Samara" }
			set_province_name = { id = 3529 name = "Tsaritsyn"}
			set_province_name = { id = 3151 name = "St.Petersburg"}
			set_province_name = { id = 11375 name = "Nijni Novgorod"}
			set_province_name = { id = 6245 name = "Tver"}
			set_province_name = { id = 1821 name = "Yekaterinburg"}
			set_province_name = { id = 392 name = "Simbirsk"}
			set_province_name = { id = 11225 name = "Samara"}
			
			#TAJ
			742 = { set_state_name = "Dushanbe" }

			#UKR
			227 = { set_state_name = "Donetsk" }
			228 = { set_state_name = "Luhansk" }
			set_province_name = { id = 6474 name = "Donetsk"}
			set_province_name = { id = 9461 name = "Luhansk"}
			set_capital = { state = 195 }
			news_event = { id = r56.soviet.28 days = 1 }
			remove_unit_leader = 1408
			remove_unit_leader = 405
			remove_unit_leader = 1420
			remove_unit_leader = 1421
			remove_unit_leader = 1422
			remove_unit_leader = 1423
			remove_unit_leader = 1424
			remove_unit_leader = 1425
			remove_ideas = SOV_revolutionized_industry_ghost
			remove_ideas = SOV_revolutionized_industry_1
			remove_ideas = SOV_revolutionized_industry_2
			remove_ideas = SOV_engineering_push
			remove_ideas = SOV_social_welfare_focus
			remove_ideas = SOV_invest_in_engineering_focus
			remove_ideas = SOV_transpolar_flights_idea
			remove_ideas = SOV_urbanization_focus
			remove_ideas = SOV_urbanization_focus_debuff
			remove_ideas = militarized_schools
			remove_ideas = workers_culture
			remove_ideas = progress_cult_focus
			remove_ideas = progress_cult_focus_2
			remove_ideas = socialist_science_focus
			remove_ideas = rehabilitated_military_focus
			remove_ideas = home_of_revolution
			remove_ideas = SOV_collectivist_propaganda
			remove_ideas = peoples_commissariat_focus
			dismantle_faction = yes
			add_popularity = {
				ideology = neutrality
				popularity = 0.27
			}
			set_politics = { ruling_party = neutrality }
			set_cosmetic_tag = SOV3
			kill_country_leader = yes
			create_country_leader = {
				name = "Andrey Vlasov"
				desc = "POLITICS_ANDREY_VLASOV_DESC"
				picture = "Portrait_Soviet_Andrey_Vlasov.dds"
				expire = "1965.1.1"
				ideology = moderatism
				traits = {
					resilient_nationalist
				}
			}
			modify_timed_idea = {
				idea = officers_purged_civil_war
				days = 90
			}
			SOV_konstantin_rodzayevsky = {
				clr_character_flag = SOV_exiled_flag
			}
			SOV_aleksandr_kerensky = {
				clr_character_flag = SOV_exiled_flag
			}
			SOV_aleksandr_verkhovsky = {
				clr_character_flag = SOV_exiled_flag
			}
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

### COUNTER COUP

focus = {
	id = SOV_power_struggle_old
	text = SOV_power_struggle
	icon = GFX_goal_centralize_power
	allow_branch = {
		tag = SOV
		if = {
			limit = {
				has_game_rule = {
					rule = obsolete_focus_branches_visibility
					option = HIDE
				}
			}
			NOT = {
				has_completed_focus = SOV_great_purge
			}
		}
	}
	relative_position_id = SOV_counter_coup_old
	x = 0
	y = 1

	prerequisite = { focus = SOV_counter_coup_old }

	cost = 10

	ai_will_do = {
		factor = 10
		}
	available = {
		#
	}

	bypass = {
		is_subject = yes
	}

	
	
	available_if_capitulated = yes


	completion_reward = {
		if = {
			limit = {
				has_idea = SOV_internal_chaos_1
			}
			remove_ideas = SOV_internal_chaos_1
		}
		if = {
			limit = {
				has_idea = SOV_internal_chaos_3
			}
			remove_ideas = SOV_internal_chaos_3
		}	
		if = {
			limit = {
				has_idea = SOV_internal_chaos_2
			}
			remove_ideas = SOV_internal_chaos_2
		}
		country_event = { id = r56.soviet.26 days = 1 }
	}
}

focus = {
	id = SOV_in_the_name_of_the_czar_old
	icon = GFX_goal_SOV_russian_monarchy
	mutually_exclusive = { focus = SOV_new_vozhd_old }
	mutually_exclusive = { focus = SOV_peoples_virtue_old }
	prerequisite = { focus = SOV_power_struggle_old }
	x = -4
	y = 1
	relative_position_id = SOV_power_struggle_old
	cost = 10

	ai_will_do = {
		factor = 10
	}
	available = {
		has_idea = SOV_boris_smyslovsky
		has_government = neutrality
		has_country_flag = SOV_czar_flag
	}

	bypass = {

	}

	
	
	


	completion_reward = {
		# DLC restricted portrait of course
		if = {
			limit = {
				NOT = {
					has_dlc = "No Step Back"
				}
			}
			SOV_tsar_vladimir_kirillovich = { 
				set_portraits = {
					civilian = {
						large = "gfx/leaders/SOV/r56_portrait_SOV_Vladimir_Kirillovich.dds"
					}
				}
			}
		}
		#hidden_effect = {
		#	retire_country_leader = yes
		#}
		set_party_name = {
			ideology = neutrality
			long_name = r56_SOV_neu
			name = r56_SOV_neu
		}
		create_country_leader = { #dies in '38 but has event for replacement
			name = "Kirill Vladimirovich"
			desc = "POLITICS_KIRIL_VLADIMIROVICH_DESC"
			picture = "r56_portrait_SOV_Kirill_Vladimirovich_Romanov.dds"
			expire = "1965.1.1"
			ideology = absolute_monarchism
			traits = {
				anti_communist
			}
		}
		add_political_power = 150
		set_cosmetic_tag = SOV3
	}
	search_filters = {  FOCUS_FILTER_POLITICAL  }
}

focus = {
	id = SOV_purge_splinter_factions_old
	text = SOV_purge_splinter_factions
	icon = GFX_goal_generic_backstab
	prerequisite = { focus = SOV_in_the_name_of_the_czar_old}
	relative_position_id = SOV_in_the_name_of_the_czar_old
	x = -1
	y = 1

	cost = 5

	ai_will_do = {
		factor = 1
	}
	available = {
		
	}

	bypass = {

	}

	
	
	


	completion_reward = {
		add_popularity = {
			ideology = neutrality
			popularity = 0.15
		}
		add_political_power = 150
	}
	search_filters = {  FOCUS_FILTER_POLITICAL  }
}

focus = {
	id = SOV_white_exiles_old
	text = SOV_white_exiles
	icon = GFX_goal_generic_into_fire
	prerequisite = { focus = SOV_purge_splinter_factions_old }
	x = -1
	y = 1
	relative_position_id = SOV_purge_splinter_factions_old

	cost = 5

	ai_will_do = {
		factor = 1
	}
	available = {

	}

	bypass = {

	}

	
	
	

	completion_reward = {
		#Fascist list, could/should be modified.
		FAK = {
			every_unit_leader = {
				
				limit = {
					OR = {
						has_id = 6200
						has_id = 6201
						has_id = 6202
						has_id = 6203
						has_id = 6204
						has_id = 6206
						has_id = 6207
						has_id = 6210
						has_id = 6211
						has_id = 6212
						has_id = 6213
						has_id = 6214
						has_id = 6215
						has_id = 6216	
						has_id = 6218						
					}
				}
				set_nationality = ROOT
			}				
		}

		create_corps_commander = {
			name = "Boris Shteifon"
			portrait_path = "gfx/leaders/SOV/r56_portrait_SOV_Boris_A._Shteifon.dds"
			traits = {
				meticulous
			}
			skill = 2
			attack_skill = 3
			defense_skill = 1
			planning_skill = 2
			logistics_skill = 1
		}
		army_experience = 20
		modify_timed_idea = {
			idea = officers_purged_civil_war
			days = -100
		}
	}
}

focus = {
	id = SOV_adopt_soviet_policies_old
	text = SOV_adopt_soviet_policies
	icon = GFX_goal_constitution
	prerequisite = { focus = SOV_in_the_name_of_the_czar_old }
	relative_position_id = SOV_in_the_name_of_the_czar_old
	x = 1
	y = 1

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {

	}

	bypass = {

	}

	
	
	

	completion_reward = {
		add_ideas = SOV_adopt_soviet_policies
	}
}

focus = {
	id = SOV_orthadox_resurgance_old
	text = SOV_orthadox_resurgance
	icon = GFX_goal_orthodoxy
	prerequisite = { focus = SOV_adopt_soviet_policies_old}
	relative_position_id = SOV_adopt_soviet_policies_old
	x = 1
	y = 1

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {

	}

	bypass = {

	}

	
	
	

	completion_reward = {
		add_war_support = 0.15
		#custom_effect_tooltip = available_political_advisor	#quite useless
		   #show_ideas_tooltip = SOV_patriarch_sergius
	}
}

focus = {
	id = SOV_reinstate_royal_exiles_old
	text = SOV_reinstate_royal_exiles
	icon = GFX_focus_generic_monarchy_1
	prerequisite = { focus = SOV_adopt_soviet_policies_old focus = SOV_purge_splinter_factions_old }
	relative_position_id = SOV_adopt_soviet_policies_old
	x = -1
	y = 1

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {

	}

	bypass = {

	}

	
	
	

	completion_reward = {
		add_ideas = SOV_reinstate_royal_exiles
	}
}

focus = {
	id = SOV_accept_constituion_old
	text = SOV_accept_constituion
	icon = GFX_focus_GRE_monarchist_fervour
	prerequisite = { focus = SOV_orthadox_resurgance_old focus = SOV_white_exiles_old }
	relative_position_id = SOV_orthadox_resurgance_old
	x = -2
	y = 1

	cost = 10

	ai_will_do = {
		factor = 1
	}

	available = {

	}

	bypass = {

	}

	
	
	

	completion_reward = {
		add_country_leader_trait = controversial_figurehead
	}
}


focus = {
	id = SOV_new_vozhd_old
	text = SOV_new_vozhd
	icon = GFX_goal_SOV_russian_nationalism
	mutually_exclusive = { focus = SOV_in_the_name_of_the_czar_old }
	mutually_exclusive = { focus = SOV_peoples_virtue_old }
	prerequisite = { focus = SOV_power_struggle_old }
	x = 2
	y = 1
	relative_position_id = SOV_power_struggle_old
	cost = 10

	ai_will_do = {
		factor = 0
	}
	available = {
		has_idea = konstantin_rodzaevsky
		has_government = fascism
	}


	
	
	


	completion_reward = {
		add_country_leader_trait = new_vozhd
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

focus = {
	id = SOV_form_the_white_emigres_old
	text = SOV_form_the_white_emigres
	icon = GFX_goal_generic_multinational_army
	prerequisite = { focus = SOV_new_vozhd_old }
	x = -1
	y = 1
	relative_position_id = SOV_new_vozhd_old
	mutually_exclusive = { focus = SOV_promote_the_asno_detachment_old }

	cost = 10

	ai_will_do = {
		factor = 0
	}
	available = {

	}

	bypass = {

	}

	
	
	

	completion_reward = {
		add_ideas = SOV_form_the_white_emigres
		custom_effect_tooltip = SOV_emigres_tt
		hidden_effect = {	
			division_template = {
				name = "White Émigrés"
				priority = 2
				division_names_group = SOV_INF_01
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
	
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }
	
					infantry = { x = 2 y = 0 }
					infantry = { x = 2 y = 1 }
					infantry = { x = 2 y = 2 }
				}
			}
			random_owned_controlled_state = {
				prioritize = { 219 }
				create_unit = {
					division = "name = \"1. White Émigrés\" division_template = \"White Émigrés\" start_experience_factor = 1.0" 
					owner = SOV
				}
				create_unit = {
					division = "name = \"1. White Émigrés\" division_template = \"White Émigrés\" start_experience_factor = 1.0" 
					owner = SOV
				}
			}
		}
		FAK = {
			every_unit_leader = {
				
				limit = {
					OR = {
						has_id = 6200
						has_id = 6202
						has_id = 6203
						has_id = 6204
						has_id = 6206
						has_id = 6207
						has_id = 6210
						has_id = 6211
						has_id = 6212
						has_id = 6213
						has_id = 6214
						has_id = 6215
						has_id = 6217
					}
				}
				set_nationality = ROOT
			}				
		}
		create_corps_commander = {
			name = "Boris Shteifon"
			portrait_path = "gfx/leaders/SOV/r56_portrait_SOV_Boris_A._Shteifon.dds"
			traits = {
				meticulous
			}
			skill = 2
			attack_skill = 3
			defense_skill = 1
			planning_skill = 2
			logistics_skill = 1
		}
	}
}

focus = {
	id = SOV_promote_the_asno_detachment_old
	text = SOV_promote_the_asno_detachment
	icon = GFX_goal_generic_partisans
	prerequisite = { focus = SOV_new_vozhd_old }
	x = 1
	y = 1
	relative_position_id = SOV_new_vozhd_old
	mutually_exclusive = { focus = SOV_form_the_white_emigres_old }

	cost = 10

	ai_will_do = {
		factor = 5
	}
	available = {

	}

	bypass = {

	}

	
	
	

	completion_reward = {
		add_ideas = SOV_promote_the_asno_detachment
	}
}

focus = {
	id = SOV_follow_corportism_old
	text = SOV_follow_corportism
	icon = GFX_goal_generic_fascist_bills
	prerequisite = { focus = SOV_promote_the_asno_detachment_old focus = SOV_form_the_white_emigres_old }
	x = -1
	y = 1
	relative_position_id = SOV_promote_the_asno_detachment_old

	cost = 5

	ai_will_do = {
		factor = 5
	}
	available = {

	}

	bypass = {

	}

	
	
	

	completion_reward = {
		add_ideas = SOV_follow_corportism
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

focus = {
	id = SOV_impose_national_unions_old
	text = SOV_impose_national_unions
	icon = GFX_goal_generic_citizens
	prerequisite = { focus = SOV_follow_corportism_old }
	x = 0
	y = 1
	relative_position_id = SOV_follow_corportism_old

	cost = 10

	ai_will_do = {
		factor = 0
	}
	available = {
		
	}

	bypass = {
		
	}

	
	
	

	completion_reward = {
		random_owned_controlled_state  = {
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = arms_factory
				level = 2
				instant_build = yes
			}
		}
		random_owned_controlled_state  = {
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = arms_factory
				level = 2
				instant_build = yes
			}
		}
		random_owned_controlled_state  = {
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = arms_factory
				level = 2
				instant_build = yes
			}
		}
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

focus = {
	id = SOV_reject_cosmopolitanism_old
	text = SOV_reject_cosmopolitanism
	icon = GFX_goal_generic_uprising
	#GFX_goal_generic_uprising
	prerequisite = { focus = SOV_follow_corportism_old }
	x = -2
	y = 1
	relative_position_id = SOV_follow_corportism_old

	cost = 5

	ai_will_do = {
		factor = 0
	}
	available = {

	}

	bypass = {

	}

	
	
	

	completion_reward = {
		add_political_power = 150
		add_stability = 0.1
		add_popularity = {
			ideology = fascism
			popularity = 0.15
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY }
}

focus = {
	id = SOV_russian_women_fascist_movement_old
	text = SOV_russian_women_fascist_movement
	icon = GFX_goal_womens_rights
	prerequisite = { focus = SOV_reject_cosmopolitanism_old }
	x = 1
	y = 1
	relative_position_id = SOV_reject_cosmopolitanism_old
	mutually_exclusive = { focus = SOV_union_of_fascist_little_ones_old } 

	cost = 10

	ai_will_do = {
		factor = 0
	}
	available = {

	}

	bypass = {

	}

	
	
	

	completion_reward = {
		add_ideas = SOV_russian_women_fascist_movement
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}

focus = {
	id = SOV_commit_to_the_orthodox_church_old
	text = SOV_commit_to_the_orthodox_church
	icon = GFX_goal_orthodoxy
	prerequisite = { focus = SOV_follow_corportism_old }
	x = 2
	y = 1
	relative_position_id = SOV_follow_corportism_old

	cost = 5

	ai_will_do = {
		factor = 0
	}
	available = {

	}

	bypass = {

	}

	
	
	

	completion_reward = {
		add_ideas = SOV_commit_to_the_orthodox_church
	}
	search_filters = { FOCUS_FILTER_POLITICAL  }
}


focus = {
	id = SOV_union_of_fascist_little_ones_old
	text = SOV_union_of_fascist_little_ones
	icon = GFX_goal_small_infantry
	prerequisite = { focus = SOV_commit_to_the_orthodox_church_old }
	x = -1
	y = 1
	relative_position_id = SOV_commit_to_the_orthodox_church_old
	mutually_exclusive = { focus = SOV_russian_women_fascist_movement_old }

	cost = 10

	ai_will_do = {
		factor = 0
	}
	available = {

	}

	bypass = {

	}

	
	
	

	completion_reward = {
		add_ideas = SOV_union_of_fascist_little_ones
	}
}

focus = {
	id = SOV_all_russian_alligences_old
	text = SOV_all_russian_alligences
	icon = GFX_goal_morale_bonus
	prerequisite = { focus = SOV_union_of_fascist_little_ones_old focus = SOV_russian_women_fascist_movement_old }
	x = -1
	y = 1
	relative_position_id = SOV_union_of_fascist_little_ones_old

	cost = 10

	ai_will_do = {
		factor = 0
	}
	available = {

	}

	bypass = {

	}

	
	
	

	completion_reward = {
		custom_effect_tooltip = SOV_alligences_tt
		if = {
			limit = { has_idea = SOV_union_of_fascist_little_ones}
			swap_ideas = {
				remove_idea = SOV_union_of_fascist_little_ones
				add_idea = SOV_union_of_fascist_little_ones_2
			}
		}
		if = {
			limit = { has_idea = SOV_russian_women_fascist_movement}
			swap_ideas = {
				remove_idea = SOV_russian_women_fascist_movement
				add_idea = SOV_russian_women_fascist_movement_2
			}
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_MANPOWER }
}


focus = {
	id = SOV_peoples_virtue_old
	text = SOV_peoples_virtue
	icon = GFX_focus_generic_russian_deal
	mutually_exclusive = { focus = SOV_in_the_name_of_the_czar_old  }
	mutually_exclusive = { focus = SOV_new_vozhd_old }
	prerequisite = { focus = SOV_power_struggle_old }
	x = 7
	y = 1
	relative_position_id = SOV_power_struggle_old
	cost = 10

	ai_will_do = {
		factor = 1
	}

	available = {
		has_idea = SOV_aleksandr_kerensky
		has_government = democratic
	}


	
	
	

	completion_reward = {
		custom_effect_tooltip = SOV_bypass_tt
	}
	search_filters = {  FOCUS_FILTER_POLITICAL }
}

focus = {
	id = SOV_form_solider_committees_old
	text = SOV_form_solider_committees
	icon = GFX_goal_generic_army_mobilization
	prerequisite = { focus = SOV_peoples_virtue_old }
	x = -1
	y = 1
	relative_position_id = SOV_peoples_virtue_old

	cost = 10

	ai_will_do = {
		factor = 1
	}

	available = {
		
	}

	
	
	

	completion_reward = {
		add_ideas = SOV_defenders_of_democracy
		FAK = {
			every_unit_leader = {
				
				limit = {
					OR = {
						has_id = 6200
						has_id = 6201
						has_id = 6202
						has_id = 6203
						has_id = 6204
						has_id = 6206
						has_id = 6207
						has_id = 6210
						has_id = 6211
						has_id = 6212
						has_id = 6213
						has_id = 6214
						has_id = 6215
						has_id = 6216	
						has_id = 6218						
					}
				}
				set_nationality = ROOT
			}				
		}			
	}
}

focus = {
	id = SOV_amnesty_for_political_opponents_old
	text = SOV_amnesty_for_political_opponents
	icon = GFX_goal_generic_foreign_diplomacy
	prerequisite = { focus = SOV_peoples_virtue_old }
	x = 1
	y = 1
	relative_position_id = SOV_peoples_virtue_old

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {
		
	}

	
	
	

	completion_reward = {
		add_ideas = SOV_amnesty_for_political_opponents
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}

focus = {
	id = SOV_cultural_autonomy_old
	text = SOV_cultural_autonomy
	icon = GFX_focus_generic_diplomatic_treaty
	prerequisite = { focus = SOV_amnesty_for_political_opponents_old }
	prerequisite = { focus = SOV_form_solider_committees_old }
	x = -1
	y = 1
	relative_position_id = SOV_form_solider_committees_old

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {
		
	}

	
	
	

	completion_reward = {
		add_popularity = {
			ideology = democratic
			popularity = 0.15
		}
		add_war_support = 0.15
	}
	search_filters = { FOCUS_FILTER_STABILITY FOCUS_FILTER_POLITICAL }
}

focus = {
	id = SOV_abolish_death_penalty_old
	text = SOV_abolish_death_penalty
	icon = GFX_goal_generic_deadly_treaty
	prerequisite = { focus = SOV_amnesty_for_political_opponents_old }
	prerequisite = { focus = SOV_form_solider_committees_old }
	x = 1
	y = 1
	relative_position_id = SOV_form_solider_committees_old

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {
		
	}

	
	
	

	completion_reward = {
		add_political_power = 250
		add_stability = 0.1
	}
}

focus = {
	id = SOV_agrarian_socialism_old
	text = SOV_agrarian_socialism
	icon = GFX_goal_generic_wheat
	prerequisite = { focus = SOV_amnesty_for_political_opponents_old }
	prerequisite = { focus = SOV_form_solider_committees_old }
	x = 1
	y = 1
	relative_position_id = SOV_amnesty_for_political_opponents_old

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {
		
	}

	
	
	

	completion_reward = {
		add_ideas = SOV_agrarian_socialism
		random_owned_controlled_state  = {
			prioritize = { 221 }
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
		}
		random_owned_controlled_state  = {
			prioritize = { 218 }
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
		}
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

focus = {
	id = SOV_create_a_national_directory_old
	text = SOV_create_a_national_directory
	icon = GFX_goal_generic_state_economy
	prerequisite = { focus = SOV_agrarian_socialism_old }
	prerequisite = { focus = SOV_abolish_death_penalty_old }
	prerequisite = { focus = SOV_cultural_autonomy_old }
	x = 1
	y = 1
	relative_position_id = SOV_cultural_autonomy_old

	cost = 10

	ai_will_do = {
		factor = 1
	}

	available = {
		
	}

	
	
	

	completion_reward = {
		swap_ideas = {
			remove_idea = SOV_agrarian_socialism
			add_idea = SOV_create_a_national_directory
		}
	}
	search_filters = { FOCUS_FILTER_STABILITY FOCUS_FILTER_POLITICAL }
}

focus = {
	id = SOV_purge_religous_beurocracy_old
	text = SOV_purge_religous_beurocracy
	icon = GFX_goal_generic_backstab
	prerequisite = { focus = SOV_agrarian_socialism_old }
	prerequisite = { focus = SOV_abolish_death_penalty_old }
	prerequisite = { focus = SOV_cultural_autonomy_old }
	x = -1
	y = 1
	relative_position_id = SOV_agrarian_socialism_old

	cost = 6

	ai_will_do = {
		factor = 1
	}

	available = {
		
	}

	
	
	

	completion_reward = {
		swap_ideas = {
			remove_idea = SOV_amnesty_for_political_opponents
			add_idea = SOV_purge_religous_beurocracy
		}
	}
	search_filters = { FOCUS_FILTER_STABILITY FOCUS_FILTER_POLITICAL }
}

focus = {
	id = SOV_the_free_russian_people_old
	text = SOV_the_free_russian_people
	icon = GFX_goal_generic_democratic_army
	prerequisite = { focus = SOV_create_a_national_directory_old }
	prerequisite = { focus = SOV_purge_religous_beurocracy_old }
	x = -1
	y = 1
	relative_position_id = SOV_purge_religous_beurocracy_old

	cost = 10

	ai_will_do = {
		factor = 1
	}

	available = {
		NOT = {
			is_in_faction = yes
		}
	}

	bypass = {
		is_in_faction = yes
	}

	completion_reward = {
		set_rule = {
			can_create_factions = yes
		}
		create_faction = free_russian_peoples_faction
		if = {
			limit = {
				has_global_flag = sov_yes_pact
				FIN = {
					exists = yes
					is_in_faction = no
					is_subject = no
				}
			}
			SOV = {
				remove_state_claim = 146
				remove_state_claim = 147
				remove_state_claim = 722
			}
		}
		if = {
			limit = {
				FIN = {
					exists = yes
					is_in_faction = no
					is_subject = no
				}
			}
			FIN = {
				country_event = { id = r56.soviet.38 }
			}
		}
	}
}

focus = {
	id = SOV_increased_autonomy
	icon = GFX_goal_flag_ukraine2
	prerequisite = { focus = SOV_the_free_russian_people_old }
	x = 1
	y = 2
	relative_position_id = SOV_the_free_russian_people_old

	cost = 10

	ai_will_do = {
		factor = 1
	}

	available = {
		is_subject = no
		any_owned_state = {
			OR = {
				is_core_of = UKR
				is_core_of = BLR
			}
		}
		OR = {
			if = {
				limit = {
					UKR = {
						exists = yes
					}
				}
				NOT = {
					has_war_with = UKR
				}
			}
			if = {
				limit = {
					BLR = {
						exists = yes
					}
				}
				NOT = {
					has_war_with = BLR
				}
			}
		}
	}

	completion_reward = {
		custom_effect_tooltip = SOV_autonomous_soviet_republics_tt
		# Ukraine
		if = {
			limit = {
				UKR = {
					exists = no
				}
			}
			if = {
				limit = {
					has_dlc = "Together for Victory"
				}
				ROOT = {
					release_autonomy = {
						target = UKR
						autonomy_state = autonomy_dominion
						freedom_level = 0.4
					}
				}
			}
			else = {
				ROOT = {
					release_puppet = UKR
				}
			}
			UKR = {
				add_opinion_modifier = { target = ROOT modifier = SOV_peaceful_liberation }
			}
			hidden_effect = {
				UKR = {
					inherit_technology = ROOT
					202 = {
						create_unit = {
							division = "name = \"1ya Strelkovaya Diviziya\" division_template = \"Strelkovaya Diviziya\" start_experience_factor = 0.1 start_equipment_factor = 0.6 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = UKR
						}
						create_unit = {
							division = "name = \"2ya Strelkovaya Diviziya\" division_template = \"Strelkovaya Diviziya\" start_experience_factor = 0.1 start_equipment_factor = 0.6 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = UKR
						}
						create_unit = {
							division = "name = \"1ya Mekhanizirovaniy Korpus\" division_template = \"Mekhanizirovaniy Korpus\" start_experience_factor = 0.1 start_equipment_factor = 0.5 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = UKR
						}
					}
					221 = {
						create_unit = {
							division = "name = \"3ya Strelkovaya Diviziya\" division_template = \"Strelkovaya Diviziya\" start_experience_factor = 0.1 start_equipment_factor = 0.6 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = UKR
						}
						create_unit = {
							division = "name = \"4ya Strelkovaya Diviziya\" division_template = \"Strelkovaya Diviziya\" start_experience_factor = 0.1 start_equipment_factor = 0.6 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = UKR
						}
					}
					226 = {
						create_unit = {
							division = "name = \"5ya Strelkovaya Diviziya\" division_template = \"Strelkovaya Diviziya\" start_experience_factor = 0.1 start_equipment_factor = 0.6 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = UKR
						}
					}
					226 = {
						create_unit = {
							division = "name = \"6ya Strelkovaya Diviziya\" division_template = \"Strelkovaya Diviziya\" start_experience_factor = 0.1 start_equipment_factor = 0.6 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = UKR
						}
					}
					198 = {
						create_unit = {
							division = "name = \"7ya Strelkovaya Diviziya\" division_template = \"Strelkovaya Diviziya\" start_experience_factor = 0.1 start_equipment_factor = 0.6 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = UKR
						}
					}
					227 = {
						create_unit = {
							division = "name = \"8ya Strelkovaya Diviziya\" division_template = \"Strelkovaya Diviziya\" start_experience_factor = 0.1 start_equipment_factor = 0.6 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = UKR
						}
					}
				}
				every_other_country = {
					limit = {
						has_war_with = ROOT
					}
					UKR = {
						add_to_war = { targeted_alliance = ROOT enemy = PREV hostility_reason = asked_to_join }
					}
				}
			}
		}
		else_if = {
			limit = {
				UKR = {
					exists = yes
					NOT = {
						has_war_with = ROOT
					}
				}
			}
			release = UKR
			UKR = {
				add_opinion_modifier = { target = ROOT modifier = SOV_returned_our_territory }
			}
		}
		# Belarus
		if = {
			limit = {
				BLR = {
					exists = no
				}
			}
			if = {
				limit = {
					has_dlc = "Together for Victory"
				}
				ROOT = {
					release_autonomy = {
						target = BLR
						autonomy_state = autonomy_dominion
						freedom_level = 0.4
					}
				}
			}
			else = {
				ROOT = {
					release_puppet = BLR
				}
			}
			BLR = {
				add_opinion_modifier = { target = ROOT modifier = SOV_peaceful_liberation }
			}
			hidden_effect = {
				BLR = {
					inherit_technology = ROOT
					206 = {
						create_unit = {
							division = "name = \"1ya Strelkovaya Diviziya\" division_template = \"Strelkovaya Diviziya\" start_experience_factor = 0.1 start_equipment_factor = 0.6 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = BLR
						}
						create_unit = {
							division = "name = \"2ya Strelkovaya Diviziya\" division_template = \"Strelkovaya Diviziya\" start_experience_factor = 0.1 start_equipment_factor = 0.6 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = BLR
						}
					}
					207 = {
						create_unit = {
							division = "name = \"3ya Strelkovaya Diviziya\" division_template = \"Strelkovaya Diviziya\" start_experience_factor = 0.1 start_equipment_factor = 0.6 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = BLR
						}
					}
				}
				every_other_country = {
					limit = {
						has_war_with = ROOT
					}
					BLR = {
						add_to_war = { targeted_alliance = ROOT enemy = PREV hostility_reason = asked_to_join }
					}
				}
			}
		}
		else_if = {
			limit = {
				BLR = {
					exists = yes
					NOT = {
						has_war_with = ROOT
					}
				}
			}
			release = BLR
			BLR = {
				add_opinion_modifier = { target = ROOT modifier = SOV_returned_our_territory }
			}
		}
	}
}

focus = {
	id = SOV_baltic_freedom_old
	text = SOV_baltic_freedom
	icon = GFX_goal_SOV_baltic_aggression
	prerequisite = { focus = SOV_the_free_russian_people_old }
	x = 0
	y = 1
	relative_position_id = SOV_the_free_russian_people_old

	cost = 10

	ai_will_do = {
		factor = 1
	}

	available = {
		LIT = {
			exists = yes
			NOT = { is_in_faction_with = SOV }
			NOT = {
				has_war_with = SOV
			}
			NOT = {
				has_government = fascism
				has_government = communism
			}
		}
		LAT = {
			exists = yes
			NOT = { is_in_faction_with = SOV }
			NOT = {
				has_war_with = SOV
			}
			NOT = {
				has_government = fascism
				has_government = communism
			}
		}
		EST = {
			exists = yes
			NOT = { is_in_faction_with = SOV }
			NOT = {
				has_war_with = SOV
			}
			NOT = {
				has_government = fascism
				has_government = communism
			}
		}
	}

	bypass = {
		is_in_faction_with = LIT
		is_in_faction_with = LAT
		is_in_faction_with = EST
	}

	
	
	

	completion_reward = {
		if = {
			limit = {
				has_global_flag = sov_yes_pact
				LIT = {
					exists = yes
					is_in_faction = no
					is_subject = no
				}
			}
			SOV = {
				remove_state_claim = 11
				remove_state_claim = 189
				remove_state_claim = 784
			}
		}
		if = {
			limit = {
				LIT = {
					exists = yes
					is_in_faction = no
					is_subject = no
				}
			}
			LIT = {
				country_event = { id = r56.soviet.38 hours = 4 }
			}
		}
		if = {
			limit = {
				has_global_flag = sov_yes_pact
				LAT = {
					exists = yes
					is_in_faction = no
					is_subject = no
				}
			}
			SOV = {
				remove_state_claim = 12
				remove_state_claim = 190
			}
		}
		if = {
			limit = {
				LAT = {
					exists = yes
					is_in_faction = no
					is_subject = no
				}
			}
			LAT = {
				country_event = {id = r56.soviet.38 hours = 4 }
			}
		}
		if = {
			limit = {
				has_global_flag = sov_yes_pact
				EST = {
					exists = yes
					is_in_faction = no
					is_subject = no
				}
			}
			SOV = {
				remove_state_claim = 13
				remove_state_claim = 191
			}
		}
		if = {
			limit = {
				EST = {
					exists = yes
					is_in_faction = no
					is_subject = no
				}
			}
			EST = {
				country_event = {id = r56.soviet.38 hours = 4 }
			}
		}
	}
}

focus = {
	id = SOV_polish_autonomy_old
	text = SOV_polish_autonomy
	icon = GFX_focus_generic_treaty
	prerequisite = { focus = SOV_the_free_russian_people_old }
	x = -1
	y = 2
	relative_position_id = SOV_the_free_russian_people_old

	cost = 10

	ai_will_do = {
		factor = 1
	}

	available = {
		POL = {
			exists = yes
			NOT = { is_in_faction_with = SOV }
			NOT = {
				has_war_with = SOV
			}
			NOT = {
				has_government = fascism
				has_government = communism
			}
		}
	}

	bypass = {
		POL = {
			OR = {
				exists = no
				is_subject = yes
				has_government = fascism
				has_government = communism
				has_war_with = ROOT
				is_in_faction_with = ROOT
				is_guaranteed_by = ROOT
			}
		}
	}

	
	
	

	completion_reward = {
		if = {
			limit = {
				has_global_flag = sov_yes_pact
				POL = {
					exists = yes
					NOT = { is_in_faction_with = SOV }
					is_subject = no
				}
			}
			SOV = {
				remove_state_claim = 96
				remove_state_claim = 95
				remove_state_claim = 94
				remove_state_claim = 97
				remove_state_claim = 93
				remove_state_claim = 91
				remove_state_claim = 89
				remove_state_claim = 861
				remove_state_claim = 862
				remove_state_claim = 863
			}
		}
		POL = {
			country_event = { id = r56.soviet.31 hours = 4 }
		}
	}
}

focus = {
	id = SOV_strike_the_eagle_old
	text = SOV_strike_the_eagle
	icon = GFX_focus_attack_germany
	prerequisite = { focus = SOV_polish_autonomy_old focus = SOV_imperial_legacy_old }
	#mutually_exclusive = { focus = SOV_reclaim_bessarabia_old }
	
	available = {
		OR = {
			country_exists = GER
			is_neighbor_of = GER
			if = {
				limit = {
					AND = {
						NOT = {
							country_exists = GER
						}
						country_exists = PRE
					}
				}
				country_exists = PRE
				is_neighbor_of = PRE
			}
		}
		#NOT = { has_idea = trotskyite_plot_nsb }
		custom_trigger_tooltip = {
			tooltip = SOV_has_not_officers_purged_tt
			NOT = { has_idea = officers_purged_civil_war }
			NOT = { has_idea = officers_purged }
			NOT = { has_idea = officers_purged_2 }
			NOT = { has_idea = officers_purged_3 }
			NOT = { has_idea = officers_purged_4 }
			NOT = { has_idea = officers_purged_5 }
			NOT = { has_idea = officers_purged_6 }
			NOT = { has_idea = officers_purged_7 }
			NOT = { has_idea = officers_purged_8 }
			NOT = { has_idea = officers_purged_9 }
			NOT = { has_idea = officers_purged_10 }
		}
	}

	bypass = {
		OR = {
			AND = {
				NOT = { country_exists = GER }
				has_war_with = PRE
			}
			AND = {
				NOT = { country_exists = PRE }
				has_war_with = GER
			}
		}
	}

	will_lead_to_war_with = GER
	will_lead_to_war_with = PRE
	x = 1
	y = 1
	relative_position_id = SOV_polish_autonomy_old
	cost = 5
	ai_will_do = {
		factor = 0.2

		modifier = {
			factor = 0

			OR = {
				any_enemy_country = {
					is_neighbor_of = ROOT
				}
				alliance_strength_ratio > 0.9
			}
		}
	}
	completion_reward = {
		if = {
			limit = {
				ROOT = {
					has_government = democratic
				}
				country_exists = GER
			}
			create_wargoal = {
				type = topple_government
				target = GER
				expire = 0
			}
		}
		if = {
			limit = {
				ROOT = {
					NOT = {
						has_government = democratic
					}
				}
				country_exists = GER
			}
			create_wargoal = {
				type = annex_everything
				target = GER
				expire = 0
			}
		}
		if = {
			limit = {
				ROOT = {
					has_government = democratic
				}
				country_exists = PRE
			}
			create_wargoal = {
				type = topple_government
				target = PRE
				expire = 0
			}
		}
		if = {
			limit = {
				ROOT = {
					NOT = {
						has_government = democratic
					}
				}
				country_exists = PRE
			}
			create_wargoal = {
				type = annex_everything
				target = PRE
				expire = 0
			}
		}
	}
	search_filters = { FOCUS_FILTER_ANNEXATION }
}

focus = {
	id = SOV_imperial_legacy_old
	text = SOV_imperial_legacy
	icon = GFX_goal_SOV_imperial_eagle
	prerequisite = { focus = SOV_accept_constituion_old  focus = SOV_all_russian_alligences_old }
	x = -3
	y = 1
	relative_position_id = SOV_all_russian_alligences_old

	cost = 10

	ai_will_do = {
		factor = 1
	}
	available = {
		is_puppet = no
	}

	completion_reward = {
		add_named_threat = { threat = 4 name = SOV_imperial_legacy_t }
		add_war_support = 0.05

		add_ideas = GEN_Conquer_I
	}
	search_filters = { FOCUS_FILTER_ANNEXATION FOCUS_FILTER_MANPOWER FOCUS_FILTER_WAR_SUPPORT }
}
focus = {
	id = SOV_restore_the_triple_entente_old
	text = SOV_restore_the_triple_entente
	icon = GFX_goal_generic_alliance
	prerequisite = { focus = SOV_polish_autonomy_old focus = SOV_imperial_legacy_old }
	relative_position_id = SOV_imperial_legacy_old
	x = 6
	y = 1
	cost = 10
	available = {
		is_subject = no
		OR = {
			has_government = democratic
			has_government = neutrality
		}
		ENG = {
			NOT = {
				has_government = communism
				has_completed_focus = ENG_alliance_with_germany
				has_war_with = ROOT
			}
		}
		FRA = {
			NOT = {
				has_government = communism
				has_completed_focus = FRA_compromise_with_germany
				has_war_with = ROOT
			}
		}
	}
	completion_reward = {
		FRA = {
			country_event = r56.soviet.102
		}
		ENG = {
			country_event = r56.soviet.102
		}
		effect_tooltip = {
			give_guarantee = FRA
			give_guarantee = ENG
			FRA = {
				give_guarantee = ROOT
			}
			ENG = {
				give_guarantee = ROOT
			}
			custom_effect_tooltip = needs_approval
		}
	}
}
focus = {
	id = SOV_rule_over_the_mongols_old
	text = SOV_rule_over_the_mongols
	icon = GFX_focus_usa_focus_on_asia

	prerequisite = { focus = SOV_imperial_legacy_old }
	x = -4
	y = 1
	relative_position_id = SOV_imperial_legacy_old

	cost = 10

	ai_will_do = {
		factor = 1
	}
	available = {
		is_puppet = no
		r56_script_i_am_sane = yes
		MON = {
			r56_script_target_is_sane = yes
		}
	}
	bypass = {
		MON = {
			r56_script_standard_bypass = yes
		}
	}

	
	
	

	complete_tooltip = {

	}

	completion_reward = {
		if = {
			limit = {
				MON = {
						exists = yes
						owns_state = 330
						}
					}
				create_wargoal = {
				type = take_state_focus
				target = MON
				expire = 0
				generator = { 330 848 849 850 }
				}
		}

		if = {
				limit = {
					TAN = {
						exists = yes
						owns_state = 329
						}
					}
				create_wargoal = {
				type = take_state_focus
				target = TAN
				expire = 0
				generator = { 329 }
				}
		}

		add_state_claim = 618					
	}	
	search_filters = { FOCUS_FILTER_ANNEXATION }
}	
focus = {
	id = SOV_crush_our_eastern_rival_old
	text = SOV_crush_our_eastern_rival
	icon = GFX_focus_AST_war_japan

	prerequisite = { focus = SOV_rule_over_the_mongols_old }
	x = -1
	y = 1
	relative_position_id = SOV_rule_over_the_mongols_old

	cost = 10

	ai_will_do = {
		factor = 1
	}
	available = {
		is_puppet = no
		has_navy_size = {
			size > 15
		}
		r56_script_i_am_sane = yes
		JAP = {
			r56_script_target_is_sane = yes
		}
	}
	bypass = {
		JAP = {
			r56_script_standard_bypass = yes
		}
	}
	
	
	
	

	complete_tooltip = {

	}

	completion_reward = {
		if = {
			limit = {
				MAN = {
					exists = yes
					owns_state = 761
					is_puppet = no
					}
				}
				create_wargoal = {
				type = take_state_focus
				target = MAN
				expire = 0
				generator = { 761 }
			}
		}
		if = {
				limit = {
					JAP = {
						exists = yes
						owns_state = 745
						}
					}
				create_wargoal = {
				type = take_state_focus
				target = JAP
				expire = 0
				generator = { 745 }
				}
		}
		add_state_claim = 537
		add_state_claim = 745			
		add_state_claim = 761
		add_state_claim = 714
		add_state_claim = 715
		add_state_claim = 610
		add_state_claim = 716						
	}	
	search_filters = { FOCUS_FILTER_ANNEXATION }
}	
focus = {
	id = SOV_our_american_holding_old
	text = SOV_our_american_holding
	icon = GFX_focus_generic_strike_at_democracy3

	prerequisite = { focus = SOV_rule_over_the_mongols_old }
	x = 1
	y = 1
	relative_position_id = SOV_rule_over_the_mongols_old

	cost = 10

	ai_will_do = {
		factor = 1
	}

	available = {
		is_puppet = no
		has_navy_size = {
			size > 15
		}

		r56_script_i_am_sane = yes
		USA = {
			r56_script_target_is_sane = yes
		}
	}
	bypass = {
		USA = {
			r56_script_standard_bypass = yes
		}
	}

	
	
	

	complete_tooltip = {

	}

	completion_reward = {
		add_state_claim = 463
		add_state_claim = 650
		if = {
			limit = {
				USA = {
					exists = yes
					owns_state = 463
				}
			}
			create_wargoal = {
			type = take_state_focus
			target = USA
			expire = 0
			generator = { 463 }
			}
		}												
	}	
	search_filters = { FOCUS_FILTER_ANNEXATION }
}	
focus = {
	id = SOV_return_to_the_baltics_old
	text = SOV_return_to_the_baltics
	icon = GFX_focus_generic_strike_at_democracy1

	prerequisite = { focus = SOV_imperial_legacy_old }
	x = 0
	y = 1
	relative_position_id = SOV_imperial_legacy_old

	cost = 10

	ai_will_do = {
		factor = 1
	}
	available = {
		is_puppet = no
		r56_script_i_am_sane = yes
		LAT = {
			r56_script_target_is_sane = yes
		}
		LIT = {
			r56_script_target_is_sane = yes
		}
		EST = {
			r56_script_target_is_sane = yes
		}
	}
	bypass = {
		LAT = {
			r56_script_standard_bypass = yes
		}
		LIT = {
			r56_script_standard_bypass = yes
		}
		EST = {
			r56_script_standard_bypass = yes
		}
	}

	completion_reward = {
		if = {
			limit = {
				NOT = {
					191 = {
					is_fully_controlled_by = ROOT
					}
				}
			}
			add_state_claim = 191
		}
		if = {
			limit = {
				NOT = {
					13 = {
					is_fully_controlled_by = ROOT
					}
				}
			}
			add_state_claim = 13
		}
		if = {
			limit = {
				EST = {
					exists = yes
					owns_state = 191
				}
			}
			create_wargoal = {
			type = take_state_focus
			target = EST
			expire = 0
			generator = { 191 }
			}
		}
		if = {
			limit = {
				NOT = {
					12 = {
					is_fully_controlled_by = ROOT
					}
				}
			}
			add_state_claim = 12
		}
		if = {
			limit = {
				NOT = {
					190 = {
					is_fully_controlled_by = ROOT
					}
				}
			}
			add_state_claim = 190
		}				
		if = {
			limit = {
				LAT = {
					exists = yes
					owns_state = 190
				}
			}
			create_wargoal = {
			type = take_state_focus
			target = LAT
			expire = 0
			generator = { 190 }
			}
		}
		if = {
			limit = {
				NOT = {
					189 = {
					is_fully_controlled_by = ROOT
					}
				}
			}
			add_state_claim = 189
		}
		if = {
			limit = {
				NOT = {
					11 = {
					is_fully_controlled_by = ROOT
					}
				}
			}
			add_state_claim = 11
		}
		if = {
			limit = {
				NOT = {
					784 = {
					is_fully_controlled_by = ROOT
					}
				}
			}
			add_state_claim = 784
		}					
		if = {
			limit = {
				LIT = {
					exists = yes
					owns_state = 11
				}
			}
			create_wargoal = {
			type = take_state_focus
			target = LIT
			expire = 0
			generator = { 11 }
			}
		}					
	}	
	search_filters = { FOCUS_FILTER_ANNEXATION }
}
focus = {
	id = SOV_reclaim_polish_overlordship_old
	text = SOV_reclaim_polish_overlordship
	icon = GFX_goal_generic_attack_poland

	prerequisite = { focus = SOV_imperial_legacy_old }
	mutually_exclusive = {
		focus = SOV_slavic_brotherhood
	}
	x = 2
	y = 1
	relative_position_id = SOV_imperial_legacy_old

	cost = 10

	ai_will_do = {
		factor = 1
	}
	available = {
		is_puppet = no
		r56_script_i_am_sane = yes
		POL = {
			r56_script_target_is_sane = yes
		}
	}
	bypass = {
		POL = {
			r56_script_standard_bypass = yes
		}
	}

	completion_reward = {
		if = {
			limit = {
				NOT = {
					96 = {
						is_fully_controlled_by = ROOT
					}
				}
			}
			add_state_claim = 96
		}
		if = {
			limit = {
				NOT = {
					95 = {
						is_fully_controlled_by = ROOT
					}
				}
			}
			add_state_claim = 95
		}
		if = {
			limit = {
				NOT = {
					94 = {
						is_fully_controlled_by = ROOT
					}
				}
			}
			add_state_claim = 94
		}		
		add_state_claim = 93
		add_state_claim = 91
		add_state_claim = 89			
		if = {
			limit = {
				POL = {
					exists = yes
					owns_state = 96
				}
			}
			create_wargoal = {
				type = take_state_focus
				target = POL
				expire = 0
				generator = { 96 }
			}
		}				
	}	
	search_filters = { FOCUS_FILTER_ANNEXATION }
}
focus = {
	id = SOV_reclaim_bessarabia_old
	text = SOV_reclaim_bessarabia
	icon = GFX_goal_strike_romania

	prerequisite = { focus = SOV_reclaim_polish_overlordship_old }
	#mutually_exclusive = { focus = SOV_strike_the_eagle_old }
	x = 0
	y = 1
	relative_position_id = SOV_reclaim_polish_overlordship_old

	cost = 10

	ai_will_do = {
		factor = 2.5
		modifier = {
			factor = 0
			date < 1939.1.1
		}
		modifier = {
			factor = 200
			GER = { has_government = democratic }
		}
	}
	available = {
		is_puppet = no
		r56_script_i_am_sane = yes
		OR = {
			MOL = {
				r56_script_target_is_sane = yes
			}
			ROM = {
				r56_script_target_is_sane = yes
			}								
		}
	}
	bypass = {
		owns_state = 78
		owns_state = 80
		owns_state = 766

	}
	completion_reward = {			

		if = {
			limit = {
				ROM = {
					exists = yes
					owns_state = 78
				}											
			}
			create_wargoal = {
				type = take_state_focus
				target = ROM
				expire = 0
				generator = { 78 }
			}
		}
		else_if = {
			limit = {
				ROM = {
					exists = yes
					owns_state = 766
				}											
			}
			create_wargoal = {
				type = take_state_focus
				target = ROM
				expire = 0
				generator = { 766 }
			}
		}
		if = {
			limit = {
				MOL = {
					exists = yes
					owns_state = 78
				}											
			}
			create_wargoal = {
				type = take_state_focus
				target = MOL
				expire = 0
				generator = { 78 }
			}
		}
		else_if = {
			limit = {
				MOL = {
					exists = yes
					owns_state = 766
				}											
			}
			create_wargoal = {
				type = take_state_focus
				target = MOL
				expire = 0
				generator = { 766 }
			}
		}						
		add_state_claim = 78
		add_state_claim = 80
		add_state_claim = 766						
	}	
	search_filters = { FOCUS_FILTER_ANNEXATION }
}
focus = {
	id = SOV_slavic_brotherhood
	icon = GFX_goal_generic_befriend_yugoslavia

	prerequisite = { focus = SOV_imperial_legacy_old focus = SOV_polish_autonomy_old }
	mutually_exclusive = {
		focus = SOV_reclaim_polish_overlordship_old
	}
	x = 4
	y = 1
	relative_position_id = SOV_imperial_legacy_old

	cost = 10

	ai_will_do = {
		factor = 1
	}
	available = {
		is_puppet = no
		r56_script_i_am_sane = yes
		is_faction_leader = yes
		OR = {
			POL = {
				is_in_faction = no
				is_subject = no
				NOT = {
					has_war_with = ROOT
				}
			}
			BUL = {
				is_in_faction = no
				is_subject = no
				NOT = {
					has_war_with = ROOT
				}
			}
			YUG = {
				is_in_faction = no
				is_subject = no
				NOT = {
					has_war_with = ROOT
				}
			}
			CZE = {
				is_in_faction = no
				is_subject = no
				NOT = {
					has_war_with = ROOT
				}
			}
		}
	}

	completion_reward = {
		every_country = {
			limit = {
				OR = {
					original_tag = CZE
					original_tag = YUG
					original_tag = BUL
					original_tag = POL
				}
				is_subject = no
				is_in_faction = no
			}
			country_event = { id = generic.5 hours = 8 random_hours = 4 }
		}
	}	
	search_filters = { FOCUS_FILTER_ANNEXATION }
}
focus = {
	id = SOV_solve_the_karelian_question_old
	text = SOV_solve_the_karelian_question
	icon = GFX_focus_fin_karjala_question

	prerequisite = { focus = SOV_imperial_legacy_old }
	x = -2
	y = 1
	relative_position_id = SOV_imperial_legacy_old

	cost = 10

	ai_will_do = {
		factor = 1
	}
	available = {
		is_puppet = no
		r56_script_i_am_sane = yes
		FIN = {
			r56_script_target_is_sane = yes
		}
	}
	bypass = {
		FIN = {
			r56_script_standard_bypass = yes
		}
	}

	
	
	

	complete_tooltip = {

	}

	completion_reward = {
		if = {
			limit = {
				FIN = {
					exists = yes
					owns_state = 146
				}
			}
			create_wargoal = {
				type = take_state_focus
				target = FIN
				expire = 0
				generator = { 146 147 }
			}
		}
		add_state_claim = 146
		add_state_claim = 147
	}	
	search_filters = { FOCUS_FILTER_ANNEXATION }
}	


###

focus = {
	id = SOV_trotskyite_victory
	icon = GFX_goal_SOV_trotsky_victory
	prerequisite = { focus = SOV_form_a_fifth_column_old }
	mutually_exclusive = { focus = SOV_counter_coup_old }
	cost = 10
	relative_position_id = SOV_form_a_fifth_column_old
	x = -4
	y = 1
	ai_will_do = {
		factor = 10
	}
	available = {
		has_government = communism
		has_civil_war = no
	}

	bypass = {
		has_global_flag = trotsky_dead 
	}
	available_if_capitulated = yes

	completion_reward = {
		if = {
			limit = {
					has_idea = SOV_internal_chaos_1
				}
			remove_ideas = SOV_internal_chaos_1
		}
		if = {
			limit = {
				has_idea = SOV_internal_chaos_3
			}
			swap_ideas = { remove_idea = SOV_internal_chaos_3 add_idea = SOV_internal_chaos_2 }
		}
		if = {
			limit = {
				has_idea = SOV_internal_chaos_2
			}
			swap_ideas = { remove_idea = SOV_internal_chaos_2 add_idea = SOV_internal_chaos_1 }
		}
		else = {
			add_political_power = 125
		}
		if = {
			limit = {
				has_dlc = "La Resistance"
			}
			create_country_leader = {
				name = "Leon Trotsky"
				desc = "POLITICS_LEON_TROTSKY_DESC"
				picture = "gfx/leaders/SOV/r56_portrait_SOV_Leon_Trotsky.dds"
				expire = "1965.1.1"
				ideology = leninism
				traits = {
					permanent_revolutionary_LaR
				}
			}			
		}
		else = {
			create_country_leader = {
				name = "Leon Trotsky"
				desc = "POLITICS_LEON_TROTSKY_DESC"
				picture = "gfx/leaders/SOV/r56_portrait_SOV_Leon_Trotsky.dds"
				expire = "1965.1.1"
				ideology = leninism
				traits = {
					permanent_revolutionary
				}
			}			
		}
		drop_cosmetic_tag = yes						
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}
focus = {
	id = SOV_solidify_internal_control
	icon = GFX_goal_generic_communist_loyalty
	prerequisite = { focus = SOV_trotskyite_victory }
	x = 1
	y = 1
	relative_position_id = SOV_trotskyite_victory
	cost = 5
	ai_will_do = {
		factor = 10
	}

	bypass = {
		NOT = {
			OR = {
				has_idea = SOV_internal_chaos_1
				has_idea = SOV_internal_chaos_2
				has_idea = SOV_internal_chaos_3
			}
		}
	}

	available_if_capitulated = yes

	completion_reward = {
		if = {
			limit = {
				has_idea = SOV_internal_chaos_1
			}
			remove_ideas = SOV_internal_chaos_1
			add_stability = 0.1
			add_political_power = 75
		}
		else = {
			add_stability = 0.1
			add_political_power = 75
		}

		if = {
			limit = {
				has_idea = SOV_internal_chaos_3
			}
			swap_ideas = { remove_idea = SOV_internal_chaos_3 add_idea = SOV_internal_chaos_2 }
			add_stability = 0.1
			add_political_power = 25
		}
		if = {
			limit = {
				has_idea = SOV_internal_chaos_2
			}
			swap_ideas = { remove_idea = SOV_internal_chaos_2 add_idea = SOV_internal_chaos_1 }
			add_stability = 0.1
			add_political_power = 50
		}
					
		modify_timed_idea = {
			idea = officers_purged_civil_war
			days = -30
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}
focus = {
	id = SOV_initial_reforms
	icon = GFX_generic_goal_communist_reforms
	prerequisite = { focus = SOV_trotskyite_victory }
	x = -1
	y = 1
	relative_position_id = SOV_trotskyite_victory
	cost = 5
	ai_will_do = {
		factor = 10
	}

	available_if_capitulated = yes

	completion_reward = {
		if = {
			limit = {
				has_idea = SOV_internal_chaos_1
			}
			remove_ideas = SOV_internal_chaos_1
			add_stability = 0.1
			add_political_power = 75
		}
		else = {
			add_stability = 0.1
			add_political_power = 75
		}

		if = {
			limit = {
				has_idea = SOV_internal_chaos_3
			}
			swap_ideas = { remove_idea = SOV_internal_chaos_3 add_idea = SOV_internal_chaos_2 }
			add_stability = 0.1
			add_political_power = 25
		}
		if = {
			limit = {
				has_idea = SOV_internal_chaos_2
			}
			swap_ideas = { remove_idea = SOV_internal_chaos_2 add_idea = SOV_internal_chaos_1 }
			add_stability = 0.1
			add_political_power = 50
		}
		modify_timed_idea = {
				idea = officers_purged_civil_war
				days = -30
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}
focus = {
	id = SOV_industrial_strategy
	icon = GFX_focus_GRE_red_economy
	prerequisite = { focus = SOV_initial_reforms }
	prerequisite = { focus = SOV_solidify_internal_control }
	x = 0
	y = 2
	relative_position_id = SOV_trotskyite_victory
	cost = 10
	ai_will_do = {
		factor = 1
	}

	available_if_capitulated = yes

	completion_reward = {
		if = { #incase first focus was bypassed
			limit = {
				has_idea = SOV_internal_chaos_1
			}
			remove_ideas = SOV_internal_chaos_1
		}
		add_tech_bonus = {
			name = industrial_bonus
			bonus = 1
			uses = 2
			category = industry
		}
		add_ideas = CRO_idea_industrial_support
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}
focus = {
	id = SOV_begin_destalinization_old
	text = SOV_begin_destalinization
	icon = GFX_fifth_column
	prerequisite = { focus = SOV_industrial_strategy}
	x = -2
	y = 3
	relative_position_id = SOV_trotskyite_victory
	cost = 5
	ai_will_do = {
		factor = 1
	}

	available_if_capitulated = yes

	completion_reward = {
		add_tech_bonus = {
			name = mp_tech_bonus_name
			bonus = 1
			uses = 1
			category = military_police_tech
		}
		add_timed_idea = {
			idea = SOV_destalinization
			days = 100
		}
	}
}
focus = {
	id = SOV_trotskyite_narrative_old
	text = SOV_trotskyite_narrative
	icon = GFX_goal_support_fourth_int
	prerequisite = { focus =  SOV_begin_destalinization_old}
	prerequisite = { focus =  SOV_conduct_nationwide_inspections_old }
	x = -1
	y = 4
	relative_position_id = SOV_trotskyite_victory
	cost = 10
	ai_will_do = {
		factor = 1
	}

	available_if_capitulated = yes

	completion_reward = {
		add_ideas = SOV_trotskyite_narrative
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}
focus = {
	id = SOV_conduct_nationwide_inspections_old
	text = SOV_conduct_nationwide_inspections
	icon = GFX_goal_generic_commie_investments
	prerequisite = { focus = SOV_industrial_strategy}

	x = 0
	y = 3
	relative_position_id = SOV_trotskyite_victory
	cost = 10
	ai_will_do = {
		factor = 1
	}

	available_if_capitulated = yes

	completion_reward = {
		add_political_power = 125
		add_timed_idea = {
			idea = SOV_nationwide_inspections_1
			days = 45
		}
		random_owned_controlled_state = {
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
		}
		random_owned_controlled_state = {
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = arms_factory
				level = 2
				instant_build = yes
			}
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL }
}
focus = {
	id = SOV_recalibration_of_quotas_old
	text = SOV_recalibration_of_quotas
	icon = GFX_goal_stock_exchange
	prerequisite = { focus =  SOV_conduct_nationwide_inspections_old }
	prerequisite = { focus =  SOV_status_of_labour_unions_old }
	x = 1
	y = 4
	relative_position_id = SOV_trotskyite_victory
	cost = 5
	ai_will_do = {
		factor = 1
	}

	available_if_capitulated = yes

	completion_reward = {
		add_tech_bonus = {
			name = industrial_bonus
			bonus = 1
			uses = 1
			category = industry
		}

	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}
focus = {
	id = SOV_localized_quality_control_old
	text = SOV_localized_quality_control
	icon = GFX_goal_sov_soviet_ind_upgrade
	prerequisite = { focus = SOV_recalibration_of_quotas }
	prerequisite = { focus = SOV_trotskyite_narrative_old }
	x = 0
	y = 5
	relative_position_id = SOV_trotskyite_victory
	cost = 10
	ai_will_do = {
		factor = 1
	}

	available_if_capitulated = yes

	completion_reward = {
		add_tech_bonus = {
			name = infantry_weapons_bonus
			bonus = 0.5
			uses = 2
			category = infantry_weapons
		}
		add_ideas = SOV_quality_control
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}
focus = {
	id = SOV_status_of_labour_unions_old
	text = SOV_status_of_labour_unions
	icon = GFX_focus_eng_concessions_to_the_trade_unions
	prerequisite = { focus = SOV_industrial_strategy}
	x = 2
	y = 3
	relative_position_id = SOV_trotskyite_victory
	cost = 5
	ai_will_do = {
		factor = 1
	}

	available_if_capitulated = yes

	completion_reward = {
		add_ideas = SOV_status_of_labour_unions_idea
	}
	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_POLITICAL }
}

####---> Diplomacy tree <><> <><> <><>

	focus = {
		id = SOV_socialism_in_one_country_old
		text = SOV_socialism_in_one_country
		icon = GFX_goal_generic_communist_pride
		mutually_exclusive = { focus = SOV_permanent_revolution }
		prerequisite = { focus = SOV_stalin_constitution }
		x = 5
		y = 2
		relative_position_id = SOV_great_purge

		cost = 5

		ai_will_do = {
			factor = 8
		}

		available = {
			NOT = { has_idea = trotskyite_plot_nsb }
			NOT = { has_idea = officers_purged_civil_war }
			has_government = communism
			has_civil_war = no
		}

		completion_reward = {
			#add_ideas = SOV_socialism_in_one_country_idea	#not very accurate
		}
		search_filters = { FOCUS_FILTER_ANNEXATION FOCUS_FILTER_POLITICAL }
	}
	focus = {
		id = SOV_permanent_revolution
		icon = GFX_goal_support_fourth_int
		mutually_exclusive = { focus = SOV_socialism_in_one_country_old }
		prerequisite = { focus = SOV_trotskyite_victory }
		relative_position_id = SOV_trotskyite_victory
		x = -6
		y = 1


		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {
			OR = {
				has_country_leader = { ruling_only = yes name = "Leon Trotsky"}
				has_country_flag = trotsky_return_1
			}
			has_government = communism
			has_civil_war = no
		}

		bypass = {

		}

		
		
		

		complete_tooltip = {

		}

		completion_reward = {
			if = {
				limit = { 
					has_country_flag = counter_purge
					has_dlc = "La Resistance"
				}
				remove_country_leader_trait = permanent_revolutionary_LaR
				add_country_leader_trait = triumphant_revolutionary_LaR
			}			
			if = {
				limit = { 
					has_country_flag = counter_purge 
					NOT = {
						has_dlc = "La Resistance"
					}
				}
				remove_country_leader_trait = permanent_revolutionary
				add_country_leader_trait = triumphant_revolutionary
			}
			if = {
				limit = { NOT = { has_country_flag = counter_purge } }
				custom_effect_tooltip = SOV_permanent_revolution_tt2
			}
		}
	}
##---> Anti fascist diplomacy <><> <><> <><>

# focus = {
# 		id = SOV_western_expansion
# 		icon = GFX_goal_fascism_banned
# 		prerequisite = { focus = SOV_socialism_in_one_country_old }
# 		#mutually_exclusive = { focus = SOV_anti_capitalist_diplomacy focus = SOV_world_revolution_old }
# 		x = 5
# 		y = 1
# 		relative_position_id = SOV_socialism_in_one_country_old
# 		cost = 5
# 		ai_will_do = {
# 			factor = 8
# 			modifier = {
# 				has_government = fascism
# 				factor = 0
# 			}

# 			modifier = {
# 				factor = 3
# 				ai_irrationality < 25
# 			}

# 			modifier = {
# 				factor = 0.75
# 				ai_irrationality > 30
# 			}

# 			modifier = {
# 				factor = 0.5
# 				ai_irrationality > 40
# 			}
# 		}
# 		available = {
# 			is_puppet = no
# 		}

# 		available_if_capitulated = yes

# 		completion_reward = {
# 		add_named_threat = { threat = 0.2 name = SOV_anti_fascist_diplomacy_t }
# 			USA = {
# 				if = {
# 					limit = { NOT = { has_government = fascism } }
# 					add_opinion_modifier = { target = SOV modifier = anti_fascist_diplomacy_focus }
# 				}
# 			}
# 			ENG = {
# 				if = {
# 					limit = { NOT = { has_government = fascism } }
# 					add_opinion_modifier = { target = SOV modifier = anti_fascist_diplomacy_focus }
# 				}
# 			}
# 			FRA = {
# 				if = {
# 					limit = { NOT = { has_government = fascism } }
# 					add_opinion_modifier = { target = SOV modifier = anti_fascist_diplomacy_focus }
# 				}
# 			}
# 			every_other_country = {
# 				limit = { has_government = fascism }
# 				add_opinion_modifier = { target = SOV modifier = anti_fascist_diplomacy_fascists }
# 			}
# 			if = {
# 				limit = {
# 						has_idea = civilian_economy
# 					}
# 				swap_ideas = { remove_idea = civilian_economy add_idea = low_economic_mobilisation  }
# 			}
# 		}
# 	}
	focus = {
		id = SOV_policy_of_collective_security_old
		text = SOV_policy_of_collective_security
		icon = GFX_goal_anschluss
		prerequisite = { focus = SOV_socialism_in_one_country_old focus = SOV_permanent_revolution }
		mutually_exclusive = { focus = SOV_policy_of_individual_security_old }
		x = 2
		y = 1
		relative_position_id = SOV_socialism_in_one_country_old
		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL}

		completion_reward = {
			add_political_power = 35
			if = {
				limit = {
					NOT = {
						has_completed_focus = SOV_the_bloc_of_rights_and_trotskyites
					}
				}
				custom_effect_tooltip = available_political_advisor
				show_ideas_tooltip = SOV_maksim_litvinov
			}
		}
	}
	focus = {
		id = SOV_far_east_fortification_old
		text = SOV_far_east_fortification
		icon = GFX_goal_generic_construct_military
		prerequisite = { focus = SOV_policy_of_collective_security_old }
		# mutually_exclusive = {
		# 	focus = SOV_reconcile_japan_old
		# }
		x = 1
		y = 1
		relative_position_id = SOV_policy_of_collective_security_old
		cost = 10
		ai_will_do = {
			factor = 10
		}
		available = {
			has_full_control_of_state = 563
			has_full_control_of_state = 657
			has_full_control_of_state = 409
			has_full_control_of_state = 408
		}
		bypass = {
			OR = {
				MAN = {
					OR = {
						is_puppet_of = ROOT
						is_in_faction_with = ROOT
					}
				}
				NOT = {
					JAP = { is_owner_neighbor_of = ROOT	}
				}
				NOT = {
					AND = {
						563 = { is_controlled_by = ROOT }
						657 = { is_controlled_by = ROOT }
						409 = { is_controlled_by = ROOT }
						408 = { is_controlled_by = ROOT }
					}
				}
			}
		}
		completion_reward = {
			563 = {
				if = {
					limit = { is_controlled_by = ROOT }
					custom_effect_tooltip = SOV_far_east_fortification_forts_1
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 2
							province = 4719
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 2
							province = 12622
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 2
							province = 10559
							instant_build = yes
						}
					}
				}
			}
			657 = {
				if = {
					limit = { is_controlled_by = ROOT }
					custom_effect_tooltip = SOV_far_east_fortification_forts_2
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 2
							province = 7763
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 2
							province = 4725
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 2
							province = 10655
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 2
							province = 7801
							instant_build = yes
						}
					}
				}
			}
			409 = {
				if = {
					limit = { is_controlled_by = ROOT }
					custom_effect_tooltip = SOV_far_east_fortification_forts_3
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 2
							province = 12189
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 2
							province = 10466
							instant_build = yes
						}
					}
				}
			}
			408 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 2
						province = 11643
						instant_build = yes
					}
				}
			}
			# Other possible Provinces
			# 4719 12622 10559 12543 7851 10678 12657 7763 4725 10655 7801 10722 7672 4805
			# 12189 10466 11643 6686 664 6684 3787 6838 3977 11879 1755
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = SOV_two_red_flags_old
		text = SOV_two_red_flags
		icon = GFX_focus_chi_cooperation_with_the_communists
		prerequisite = { focus = SOV_far_east_fortification_old }
		x = 1
		y = 1
		relative_position_id = SOV_far_east_fortification_old
		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		mutually_exclusive = { focus = SOV_operation_zet }

		bypass = {
			OR = {
				NOT = { country_exists = PRC }
				owns_state = 622
			}
		}

		available = {
			has_government = communism
			NOT = { has_war_with = PRC }
			is_subject = no
		}
		
		search_filters = {}

		completion_reward = {
			PRC = {
				add_opinion_modifier = { #Good relations with Mao
					target = ROOT
					modifier = SOV_cooperating_with_us
				}
				country_event = { id = prc.48 days = 2 }
				add_relation_modifier = {
					target = ROOT
					modifier = SOV_soviet_chinese_relations
				}
				every_other_country = {
					limit = {
						SOV_is_free_chinese_tag = yes
					}
					add_opinion_modifier = { #Bad Relations with other Chinese tags
						target = ROOT
						modifier = SOV_cooperating_with_other
					}
				}
			}
			activate_targeted_decision = { target = PRC decision = SOV_send_infantry_equipment_asia }
			custom_effect_tooltip = SOV_volunteers_allowed_mao_tt
		}
		search_filters = { FOCUS_FILTER_ALLIANCE }
	}


	focus = {
		id = SOV_operation_zet
		icon = GFX_goal_chinese_sun
		prerequisite = { focus = SOV_far_east_fortification_old }
		mutually_exclusive = { focus = SOV_two_red_flags_old }
		available = {
			NOT = { has_war_with = CHI }
			is_subject = no
		}
		continue_if_invalid = yes
		bypass = {
			OR = {
				CHI = {
					OR = {
						exists = no
						is_puppet = yes
					}
				}
				AND = { #We have bigger problems!
					has_war_with = JAP
					CHI = {
						NOT = {
							has_war_with = JAP
						}
					}
				}

			}
			
		}
		x = -1
		y = 1
		relative_position_id = SOV_far_east_fortification_old
		cost = 10
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			CHI = {
				add_opinion_modifier = { #Good relations with Mao
					target = ROOT
					modifier = SOV_cooperating_with_us
				}
				country_event = { id = kmt.320 days = 2 }
				add_relation_modifier = {
					target = ROOT
					modifier = SOV_soviet_chinese_relations
				}
				every_other_country = {
					limit = {
						SOV_is_free_chinese_tag = yes
					}
					add_opinion_modifier = { #Bad Relations with other Chinese tags
						target = ROOT
						modifier = SOV_cooperating_with_other
					}
				}
			}
			activate_targeted_decision = { target = CHI decision = SOV_send_infantry_equipment_asia }
			custom_effect_tooltip = SOV_volunteers_allowed_kuomintang_tt
		}
	}

	focus = {
		id = SOV_annex_tannu_tuva_old
		text = SOV_annex_tannu_tuva
		icon = GFX_focus_generic_treaty
		prerequisite = { focus = SOV_operation_zet focus = SOV_spheres_of_influence_in_china_old focus = SOV_two_red_flags_old }
		available = { 
			is_puppet = no
			NOT = { has_war_with = TAN }
			TAN = { is_puppet = no }
		}
		bypass = {
			NOT = { country_exists = TAN }
		}
		x = -2
		y = 1
		relative_position_id = SOV_operation_zet
		cost = 5
		ai_will_do = {
			factor = 8
			}
		completion_reward = {
			TAN = {
				country_event = { id = soviet.14 }
			}
		}
	}

	focus = {
		id = SOV_war_with_japan
		icon = GFX_focus_attack_japan
		prerequisite = { focus = SOV_operation_zet focus = SOV_two_red_flags_old }
		x = 0
		y = 1
		relative_position_id = SOV_operation_zet
		available = {
			country_exists = JAP
			NOT = { has_idea = trotskyite_plot_nsb }
			custom_trigger_tooltip = {
				tooltip = SOV_has_not_officers_purged_tt
				NOT = { has_idea = officers_purged_civil_war }
				NOT = { has_idea = officers_purged }
				NOT = { has_idea = officers_purged_2 }
				NOT = { has_idea = officers_purged_3 }
				NOT = { has_idea = officers_purged_4 }
				NOT = { has_idea = officers_purged_5 }
				NOT = { has_idea = officers_purged_6 }
				NOT = { has_idea = officers_purged_7 }
				NOT = { has_idea = officers_purged_8 }
				NOT = { has_idea = officers_purged_9 }
				NOT = { has_idea = officers_purged_10 }
			}
		}
		will_lead_to_war_with = JAP
		cost = 10
		ai_will_do = {
			factor = 1

			modifier = {
				factor = 0

				OR = {
					AND = {
						has_completed_focus = SOV_war_with_germany
						GER = { has_capitulated = no }
					}
					has_war = yes
				}
				OR = {
					any_enemy_country = {
						is_neighbor_of = ROOT
					}
					alliance_strength_ratio > 0.9
				}
			}
		}
		bypass = {
			OR = {
				has_war_with = JAP
				NOT = { country_exists = JAP }
			}
		}
		completion_reward = {
			if = {
				limit = {
					JAP = {
						exists = yes
						owns_state = 537
						}
					}
					add_state_claim = 537
			}
			if = {
				limit = {
					JAP = {
						exists = yes
						owns_state = 555
						}
					}
					add_state_claim = 555
			}
			if = {
				limit = {
					JAP = {
						exists = yes
						owns_state = 745
						}
					}
					add_state_claim = 745
			}
			create_wargoal = {
				type = puppet_wargoal_focus
				target = JAP
				expire = 0
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	focus = {
		id = SOV_intervention_in_china_old
		text = SOV_intervention_in_china
		icon = GFX_focus_usa_focus_on_asia
		prerequisite = { focus = SOV_two_red_flags_old focus = SOV_operation_zet }
		x = 2
		y = 1
		relative_position_id = SOV_operation_zet
		cost = 10

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		available = {
			is_subject = no
		}
		
		search_filters = {}

		completion_reward = {
			custom_effect_tooltip = SOV_intervention_in_china_wargoal_tt
			hidden_effect = {
				every_country = {
					limit = {
						SOV_is_chinese_tag = yes
						exists = yes
						NOT = { is_subject_of = ROOT }
						NOT = { is_in_faction_with = ROOT }
					}
					if = {
						limit = {
							tag = SIK
							ROOT = { has_completed_focus = SOV_the_gobi_gambit }
						}
					}
					else_if = {
						limit = {
							tag = PRC
							ROOT = { has_completed_focus = SOV_two_red_flags }
						}
					}
					else_if = {
						limit = {
							tag = CHI
							ROOT = { has_completed_focus = SOV_support_the_kuomintang }
						}
					}
					else = {
						ROOT = {
							create_wargoal = {
								type = puppet_wargoal_focus
								target = PREV
							}
						}
					}
				}
			}
			if = {
				limit = {
					has_completed_focus = SOV_the_gobi_gambit
					country_exists = SIK
				}
				every_state = { #Set cores for SIK
					limit = {
						is_core_of = XSM
						is_core_of = TIB
						#is_core_of = CHI You are a buffer not the guy who I want....
					}
					add_core_of = SIK
				}
			}
		}
	}

	focus = {
		id = SOV_fortify_mongolian_border_old
		text = SOV_fortify_mongolian_border
		icon = GFX_goal_generic_construct_military
		prerequisite = { focus = SOV_intervention_in_china_old focus = SOV_war_with_japan }
		x = 1
		y = 1
		relative_position_id = SOV_war_with_japan
		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		available = {
			MON = {
				is_in_faction_with = ROOT
				has_full_control_of_state = 330
				has_full_control_of_state = 819
				has_full_control_of_state = 817
				has_full_control_of_state = 818

			}
			is_subject = no
		}
		
		search_filters = {}

		completion_reward = {
			MON = { country_event = { id = NSB_soviet_foreign_politics_events.12 hours = 2 random_hours = 1 } }
			custom_effect_tooltip = if_they_accept
			custom_effect_tooltip = SOV_fortify_mongolian_border_forts_tt
		}
	}

	focus = {
		id = SOV_send_military_advisors_to_spain_old
		text = SOV_send_military_advisors_to_spain
		icon = GFX_focus_intervention_spain_republic
		prerequisite = { focus = SOV_socialism_in_one_country_old focus = SOV_permanent_revolution }
		x = 6
		y = 1
		relative_position_id = SOV_socialism_in_one_country_old
		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		available = {
			has_civil_war = no
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				SPR_scw_in_progress = yes
				if = {
					limit = {
						NOT = { has_global_flag = spanish_civil_war }
					}
					custom_trigger_tooltip = {
					    tooltip = POR_spr_tooltip_country_exist_tt
					    country_exists = SPR
				    }
				    custom_trigger_tooltip = {
					    tooltip = POR_spr_tooltip_at_peace_tt
						NOT = { has_war_with = SPR }
				    }
				}
				else = {
					if = {
						limit = {
							has_completed_focus = SOV_covert_support_for_spanish_poum
						}
						country_exists = SPC
						NOT = { has_war_with = SPC }
					}
					else = {
						country_exists = SPD
						NOT = { has_war_with = SPD }
					}
				}
			}
			else = {
				any_other_country = {
					original_tag = SPR
					has_civil_war = yes
					NOT = { has_war_with = ROOT }
					OR = {
						has_government = democratic
						has_government = communism
					}
				}
			}
			has_government = communism
			is_subject = no
		}
		
		search_filters = {}

		completion_reward = {
			add_timed_idea = { idea = SOV_military_advisors_in_spain days = 1095 }
			
			if = {
				limit = {
					has_dlc = "La Resistance"
					has_completed_focus = SOV_covert_support_for_spanish_poum
					has_completed_focus = SOV_coup_detat
					has_global_flag = SPR_anarchist_uprising_flag
					country_exists = SPC
					SPC = { has_completed_focus = SPR_the_anti_fascist_workers_revolution }
				}
				SPC = {
					hidden_effect = { country_event = { id = NSB_soviet_foreign_politics_events.20 hours = 2 random_hours = 1 } }
					effect_tooltip = { add_timed_idea = {idea = SOV_soviet_advisors_spr days = 1095 } }
				}
			}
			else_if = {
				limit = {
					has_dlc = "La Resistance"
					country_exists = SPD
				}
				SPD = {
					hidden_effect = { country_event = { id = NSB_soviet_foreign_politics_events.20 hours = 2 random_hours = 1 } }
					effect_tooltip = { add_timed_idea = {idea = SOV_soviet_advisors_spr days = 1095 } }
				}
			}
			else_if = {
				limit = {
					has_dlc = "La Resistance"
					NOT = { country_exists = SPD }
				}
				custom_effect_tooltip = SOV_aid_republican_spain_tt
				effect_tooltip = { add_timed_idea = {idea = SOV_soviet_advisors_spr days = 1095 } }
			}
			else = {
				random_country = {
					limit = {
						original_tag = SPR
						has_civil_war = yes
						OR = {
							has_government = communism
							has_government = democratic
						}
					}
					hidden_effect = { country_event = { id = NSB_soviet_foreign_politics_events.20 hours = 2 random_hours = 1 } }
					effect_tooltip = { add_timed_idea = {idea = SOV_soviet_advisors_spr days = 1095 } }
				}
			}
			# A Spanish General will join the USSR if his side loses the SCW
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				custom_effect_tooltip = SOV_send_military_advisors_to_spain_generals_tt
				set_country_flag = SOV_spanish_refugee_generals_welcome_flag
			}
		}
	}

	focus = {
		id = SOV_anti_fascist_policies_old
		text = SOV_anti_fascist_policies
		icon = GFX_focus_generic_anti_fascist_diplomacy
		prerequisite = { focus = SOV_policy_of_collective_security_old }
		x = 4
		y = 1
		relative_position_id = SOV_policy_of_collective_security_old
		cost = 5
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
				
		search_filters = {FOCUS_FILTER_PROPAGANDA}

		completion_reward = {
			add_named_threat = { threat = 0.2 name = SOV_anti_fascist_diplomacy_t }
			if = {
				limit = {
						has_idea = civilian_economy
					}
				swap_ideas = { remove_idea = civilian_economy add_idea = low_economic_mobilisation  }
			}
			every_other_country = {
				limit = {
					is_major = yes
					OR = {
						has_government = democratic
						has_government = communism
					}
					NOT = { has_war_with = ROOT }
				}
				add_opinion_modifier = { target = SOV modifier = SOV_anti_fascist_policies_good } 
			}

			every_other_country = {
				limit = {
					is_major = yes
					has_government = fascism
				}
				add_opinion_modifier = { target = SOV modifier = SOV_anti_fascist_policies_bad } 
			}

			if = {
				limit = {
					has_dlc = "La Resistance"
					AST = {
						NOT = { has_government = communism }
					} 	
				}
				create_operative_leader = {
					name = "Rupert Lockwood"
					portrait_path = gfx/leaders/Europe/portrait_europe_generic_operative_male_10.dds 
					traits = {  }
					bypass_recruitment = no
					available_to_spy_master = yes
					female = yes
					nationalities = { SOV AST }
				}					
			}

			if = {
				limit = {
					has_government = communism
				}
				custom_effect_tooltip = unlock_propaganda_campaign_tt
				unlock_decision_tooltip = SOV_propaganda_anti_fascism
				custom_effect_tooltip = propaganda_campaign_requirement_tt
			}
		}
	}

	focus = {
		id = SOV_seek_a_defense_pact_with_the_allies_old
		text = SOV_seek_a_defense_pact_with_the_allies
		icon = GFX_focus_hol_the_fourth_ally
		prerequisite = { focus = SOV_anti_fascist_policies_old }
		x = 0
		y = 1
		relative_position_id = SOV_anti_fascist_policies_old
		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		bypass = {
			OR = {
				NOT = { country_exists = FRA }
				FRA = { has_capitulated = yes }
			}
			NOT = {
				any_other_country = {
					is_faction_leader = yes
					SOV_is_valid_collective_security_target = yes
				}
			}
		}

		available = {
			is_subject = no
		}
		
		search_filters = {}

		completion_reward = {
			if = { #FRA is default target
				limit = {
					country_exists = FRA
					FRA = {	SOV_is_valid_collective_security_target = yes }
				}
				set_variable = { SOV_collective_security_target = FRA }
				FRA = { country_event = { id = NSB_soviet_policies_of_collective_security.1 hours = 8 random_hours = 4 } }
			}
			else_if = { #ENG is first fallback target
				limit = {
					country_exists = ENG
					is_faction_leader = yes
					ENG = {	SOV_is_valid_collective_security_target = yes }
				}
				set_variable = { SOV_collective_security_target = FRA }
				ENG = { country_event = { id = NSB_soviet_policies_of_collective_security.1 hours = 8 random_hours = 4 } }
			}
			else_if = { #Non-Fascist European faction leader is next
				limit = {
					any_country = {
						is_faction_leader = yes
						capital_scope = { is_on_continent = europe }
						SOV_is_valid_collective_security_target = yes
					}
				}
				random_other_country = {
					limit = {
						is_faction_leader = yes
						capital_scope = { is_on_continent = europe }
						SOV_is_valid_collective_security_target = yes
					}
					ROOT = { set_variable = { SOV_collective_security_target = PREV } }
					country_event = { id = NSB_soviet_policies_of_collective_security.1 hours = 8 random_hours = 4 }
				}
			}
			else_if = { #Alright I don't really care anymore, pick whoever is left alive
				limit = {
					any_other_country = {
						is_faction_leader = yes
						SOV_is_valid_collective_security_target = yes
					}
				}
				random_other_country = {
					limit = {
						is_faction_leader = yes
						SOV_is_valid_collective_security_target = yes
					}
					ROOT = { set_variable = { SOV_collective_security_target = PREV } }
					country_event = { id = NSB_soviet_policies_of_collective_security.1 hours = 8 random_hours = 4 }
				}
			}

			custom_effect_tooltip = SOV_seek_a_defense_pact_with_the_allies_event_effects_tt

			if = {
				limit = {
					country_exists = POL
					POL = { SOV_is_valid_collective_security_target = yes }
					var:SOV_collective_security_target = {
						capital_scope = { is_on_continent = europe }
					}
				}
				custom_effect_tooltip = SOV_seek_a_defense_pact_with_the_allies_poland_tt
			}
		}
	}

	focus = {
		id = SOV_policy_of_individual_security_old
		text = SOV_policy_of_individual_security
		icon = GFX_goal_generic_defence
		prerequisite = { focus = SOV_socialism_in_one_country_old focus = SOV_permanent_revolution }
		mutually_exclusive = { focus = SOV_policy_of_collective_security_old }
		x = 0
		y = 1
		relative_position_id = SOV_socialism_in_one_country_old
		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}

		available = {

		}
		
		search_filters = {FOCUS_FILTER_POLITICAL}

		completion_reward = {
			add_political_power = 35

			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = SOV_vyacheslav_molotov
		}
	}

	focus = {
		id = SOV_approach_germany_old
		text = SOV_approach_germany
		icon = GFX_goal_germanic_brotherhood_full
		prerequisite = { focus = SOV_policy_of_individual_security_old }
		x = 0
		y = 1
		relative_position_id = SOV_policy_of_individual_security_old
		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		available = {
			country_exists = GER
			GER = { SOV_is_valid_subject = yes }
			NOT = { has_war_with = GER }
			is_subject = no
		}

		bypass = {
			NOT = { country_exists = GER }
		}
		
		search_filters = {}

		completion_reward = {
			GER = { country_event = { id = NSB_soviet_soviet_german_trade_agreement.1 hours = 1 } }

			custom_effect_tooltip = if_they_accept #This will also make GER more likely to take Molotov-Ribbentrop pact and less to take Anti-Soviet Pact
			effect_tooltip = {
				if = {
					limit = {
						has_dlc = "Man the Guns"
					}
					if = {
						limit = {
							NOT = { has_tech = basic_ship_hull_cruiser }
						}
						set_technology = { basic_ship_hull_cruiser = 1 }
					}
					if = {
						limit = {
							NOT = { has_tech = basic_cruiser_armor_scheme }
						}
						set_technology = { basic_cruiser_armor_scheme = 1 }
					}
					if = {
						limit = {
							has_tech = basic_medium_battery
						}
						create_equipment_variant = {
							name = "Hipper Class"
							type = ship_hull_cruiser_2
							name_group = SOV_CA_HISTORICAL
							parent_version = 0
							modules = {
								fixed_ship_battery_slot = ship_medium_battery_2
								fixed_ship_anti_air_slot = ship_anti_air_1
								fixed_ship_fire_control_system_slot = ship_fire_control_system_0
								fixed_ship_radar_slot = empty
								fixed_ship_engine_slot = cruiser_ship_engine_1
								fixed_ship_secondaries_slot = empty
								fixed_ship_armor_slot = ship_armor_cruiser_2
								front_1_custom_slot = ship_anti_air_1
								mid_1_custom_slot = ship_torpedo_1
								mid_2_custom_slot = ship_airplane_launcher_1
								rear_1_custom_slot = ship_medium_battery_2
							}
						}
					}
					else = {
						create_equipment_variant = {
							name = "Hipper Class"
							type = ship_hull_cruiser_2
							name_group = SOV_CA_HISTORICAL
							parent_version = 0
							modules = {
								fixed_ship_battery_slot = ship_medium_battery_1
								fixed_ship_anti_air_slot = ship_anti_air_1
								fixed_ship_fire_control_system_slot = ship_fire_control_system_0
								fixed_ship_radar_slot = empty
								fixed_ship_engine_slot = cruiser_ship_engine_1
								fixed_ship_secondaries_slot = empty
								fixed_ship_armor_slot = ship_armor_cruiser_2
								front_1_custom_slot = ship_anti_air_1
								mid_1_custom_slot = ship_torpedo_1
								mid_2_custom_slot = ship_airplane_launcher_1
								rear_1_custom_slot = ship_medium_battery_1
							}
						}
					}
					
					# CA: Lützow -> Petropavlovsk
					add_equipment_production = {
						equipment = {
							type = ship_hull_cruiser_2
							creator = "SOV"
							version_name = "Hipper Class"
						}
						name = "Petropavlovsk"
						requested_factories = 1
						progress = 0.5
						amount = 1
					}

					if = { #Default name
						limit = {
							has_government = communism
						}
						add_tech_bonus = {
							name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name
							bonus = 0.5
							uses = 2
							category = ship_modules_tech
							category = bb_tech
							category = dd_tech
						}
					}
					else = { #Alt name
						add_tech_bonus = {
							name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name_alt
							bonus = 0.5
							uses = 2
							category = ship_modules_tech
							category = bb_tech
							category = dd_tech
						}
					}
				}
				else = { #No MTG
					if = {
						limit = {
							NOT = { has_tech = basic_heavy_cruiser }
						}
						set_technology = { basic_heavy_cruiser = 1 }
					}
					create_equipment_variant = {
						name = "Hipper Class"
						type = heavy_cruiser_2
						parent_version = 0
						upgrades = {
							ship_reliability_upgrade = 1
							ship_engine_upgrade = 1
							ship_armor_upgrade = 2
							ship_gun_upgrade = 2
						}
					}

					add_equipment_production = {
						equipment = {
							type = heavy_cruiser_2
							creator = "SOV"
						}
						requested_factories = 1
						progress = 0.5
						amount = 1
					}

					if = { #Default name
						limit = {
							has_government = communism
						}
						add_tech_bonus = {
							name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name
							bonus = 0.5
							uses = 2
							category = ca_tech
							category = bb_tech
							category = dd_tech
						}
					}
					else = { #Alt name
						add_tech_bonus = {
							name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name_alt
							bonus = 0.5
							uses = 2
							category = ca_tech
							category = bb_tech
							category = dd_tech
						}
					}
				}

				if = { #Default name
					limit = {
						has_government = communism
					}
					add_tech_bonus = {
						name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name
						bonus = 0.5
						uses = 2
						category = air_equipment
					}
				}
				else = { #Alt name
					add_tech_bonus = {
						name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name_alt
						bonus = 0.5
						uses = 2
						category = air_equipment
					}
				}

				#Effects to Germans
				GER = {
					add_timed_idea = { idea = SOV_soviet_german_trade_agreement days = 545 } #Technically 1 year but really 18 months for Soviet payment 
					capital_scope = {
						add_dynamic_modifier = { modifier = SOV_soviet_imports }
					}
				}

				add_opinion_modifier = {
					target = GER
					modifier = SOV_strengthened_relations_with_us
				}
				GER = {
					add_opinion_modifier = {
						target = ROOT
						modifier = SOV_strengthened_relations_with_us
					}
				}
			}
		}
	}

	focus = {
		id = SOV_improve_stalin_line
		icon = GFX_goal_generic_fortify_city
		prerequisite = { focus = SOV_permanent_revolution focus = SOV_socialism_in_one_country_old }
		x = 13
		y = 1
		relative_position_id = SOV_socialism_in_one_country_old
		cost = 10
		ai_will_do = {
			factor = 8
		}
		available = {
			has_offensive_war = no
			has_full_control_of_state = 209
			has_full_control_of_state = 210
			has_full_control_of_state = 207
			has_full_control_of_state = 206
			has_full_control_of_state = 202
			has_full_control_of_state = 203
			has_full_control_of_state = 192
		}
		completion_reward = {
			209 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 6
						province = 415
						instant_build = yes
					}
				}
				#add_building_construction = {
				#	type = bunker
				#	level = 6
				#	province = 209
				#	instant_build = yes
				#}
			}
			210 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 4
						province = 3333
						instant_build = yes
					}
				}
			}
			207 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 4
						province = 3219
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 4
						province = 6371
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 4
						province = 6220
						instant_build = yes
					}
				}
			}
			206 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 4
						province = 11370
						instant_build = yes
					}
				}
			}
			202 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 7
						province = 525
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 7
						province = 3494
						instant_build = yes
					}
				}

			}
			203 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 7
						province = 11409
						instant_build = yes
					}
				}
			}
			192 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 5
						province = 754
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 5
						province = 741
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 5
						province = 11670
						instant_build = yes
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = SOV_claims_in_baltic_old
		text = SOV_claims_in_baltic
		icon = 	GFX_goal_SOV_baltic_aggression
		prerequisite = { focus = SOV_improve_stalin_line }
		#prerequisite = { focus = SOV_western_expansion }
		x = -1
		y = 1
		relative_position_id = SOV_improve_stalin_line
		cost = 10

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					has_civil_war = yes
					date < 1939.1.1
				}
			}	
		}

		mutually_exclusive = { focus = SOV_respect_baltic_self_determination_old }

		available = {
			is_subject = no
		}

		bypass = {
			all_state = {
				OR = {
					is_core_of = EST
					is_core_of = LAT
					is_core_of = LIT
				}
				NOT = { state = 188 }
				is_controlled_by = ROOT
			}
		}
		
		search_filters = {FOCUS_FILTER_ANNEXATION}

		completion_reward = {
			# Estonia + Latvia + Lithuania except Memel
			custom_effect_tooltip = SOV_claims_in_baltics_tt
			hidden_effect = {
				every_state = {
					limit = {
						OR = {
							AND = {
								NOT = {
									state = 188
								}
								region = 37
							}
							state = 784
						}
					}
					add_claim_by = ROOT
				}
			}
			#Activate targeted decisions
			activate_targeted_decision = { target = EST decision = SOV_send_ultimatum_to_country_baltic }
			activate_targeted_decision = { target = LAT decision = SOV_send_ultimatum_to_country_baltic }
			activate_targeted_decision = { target = LIT decision = SOV_send_ultimatum_to_country_baltic }

			add_named_threat = { threat = 1 name = SOV_claims_in_baltic }
		}
	}

	focus = {
		id = SOV_respect_baltic_self_determination_old
		text = SOV_respect_baltic_self_determination
		icon = GFX_goal_SOV_true_baltic_freedom
		prerequisite = { focus = SOV_improve_stalin_line }
		x = 1
		y = 1
		relative_position_id = SOV_improve_stalin_line
		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		mutually_exclusive = { focus = SOV_claims_in_baltic_old }

		bypass = {
			NOT = {
				country_exists = EST
				country_exists = LAT
				country_exists = LIT
			}
		}

		available = {
			is_subject = no
		}

		completion_reward = {
			activate_targeted_decision = { target = EST decision = SOV_promote_ideology_rallies_baltic }
			activate_targeted_decision = { target = LAT decision = SOV_promote_ideology_rallies_baltic }
			activate_targeted_decision = { target = LIT decision = SOV_promote_ideology_rallies_baltic }
			activate_targeted_decision = { target = EST decision = SOV_pressure_country_government_baltic }
			activate_targeted_decision = { target = LAT decision = SOV_pressure_country_government_baltic }
			activate_targeted_decision = { target = LIT decision = SOV_pressure_country_government_baltic }
		}
	}

	focus = {
		id = SOV_secure_leningrad_old
		text = SOV_secure_leningrad
		icon = GFX_focus_fin_karjala_question
		prerequisite = { focus = SOV_respect_baltic_self_determination_old focus = SOV_claims_in_baltic_old }
		x = 1
		y = 1
		relative_position_id = SOV_claims_in_baltic_old
		cost = 10
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		dynamic = yes 

		available = {
			is_subject = no
		}

		bypass = {
			has_full_control_of_state = 146
		}
		
		search_filters = {FOCUS_FILTER_ANNEXATION}

		completion_reward = {
			add_state_claim = 146 # Karjala
			146 = {
				controller = {
					add_timed_idea = {
						idea = communist_pressure
						days = 365
					}
					country_event = { id = finland.1 hours = 16 random_hours = 8 }
				}
			}
		}
	}

	focus = {
		id = SOV_control_scandinavia_old
		text = SOV_control_scandinavia
		icon = GFX_focus_generic_scandinavia_flags
		prerequisite = { focus = SOV_secure_leningrad_old }
		x = -2
		y = 1
		relative_position_id = SOV_secure_leningrad_old
		cost = 10

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		available = {
			is_subject = no
		}

		completion_reward = {
			every_other_country = {
				limit = {
					exists = yes
					NOT = { is_in_faction_with = ROOT }
					capital_scope = { 
						OR = {
							region = 13
							region = 12
							region = 191
							region = 192
							region = 11
							region = 10
							region = 9
							region = 206
							AND = {
								region = 6
								NOT = {
									state = 57
									state = 56
									state = 59
									state = 58
								}
							}
						}
					}  
				}
				add_timed_idea = {
					idea = communist_pressure
					days = 365
				}
				hidden_effect = {
					country_event = { id = generic.1 }
				}
			}

			custom_effect_tooltip = SOV_control_scandinavia_decisions_tt
			hidden_effect = {
				activate_targeted_decision = { target = FIN decision = SOV_promote_ideology_rallies_nordic }
				activate_targeted_decision = { target = SWE decision = SOV_promote_ideology_rallies_nordic }
				activate_targeted_decision = { target = NOR decision = SOV_promote_ideology_rallies_nordic }
				activate_targeted_decision = { target = DEN decision = SOV_promote_ideology_rallies_nordic }
				activate_targeted_decision = { target = FIN decision = SOV_pressure_country_government_nordic }
				activate_targeted_decision = { target = SWE decision = SOV_pressure_country_government_nordic }
				activate_targeted_decision = { target = NOR decision = SOV_pressure_country_government_nordic }
				activate_targeted_decision = { target = DEN decision = SOV_pressure_country_government_nordic }
			}
		}
	}

	focus = {
		id = SOV_claims_on_poland_old
		text = SOV_claims_on_poland
		icon = GFX_goal_generic_occupy_states_ongoing_war
		prerequisite = { focus = SOV_secure_leningrad_old }
		mutually_exclusive = { focus = SOV_workers_of_the_world_unite_old }
		#prerequisite = { focus = SOV_western_expansion }
		x = 0
		y = 1
		relative_position_id = SOV_secure_leningrad_old
		cost = 10
		ai_will_do = {
			factor = 9
			modifier = {
				factor = 0
				date < 1940.1.1
			}
			modifier = {
				factor = 0
				POL =  {
					OR = {
						is_in_faction_with = ENG
						is_in_faction_with = FRA
						is_guaranteed_by = ENG
						is_guaranteed_by = FRA
					}
				}
			}

			modifier = {
				add = 200
				AND = {
					date > 1940.1.1
					GER = { has_government = democratic }
				}
			}
		}
		available = {
			is_subject = no
			# NOT = {
			# 	has_completed_focus = SOV_permanent_revolution
			# }
		}
		bypass = {
			OR = {
				has_idea = SOV_molotov_ribbentrop_pact

				NOT = { country_exists = POL }

				AND = {
					OR = {
						owns_state = 784
						784 = { is_claimed_by = SOV }
					}
					OR = {
						owns_state = 862
						862 = { is_claimed_by = SOV }
					}
					OR = {
						owns_state = 863
						863 = { is_claimed_by = SOV }
					}
					OR = {
						owns_state = 91
						91 = { is_claimed_by = SOV }
					}
					OR = {
						owns_state = 93
						93 = { is_claimed_by = SOV }
					}
					OR = {
						owns_state = 94
						94 = { is_claimed_by = SOV }
					}
					OR = {
						owns_state = 95
						95 = { is_claimed_by = SOV }
					}
					OR = {
						owns_state = 96
						96 = { is_claimed_by = SOV }
					}
					OR = {
						owns_state = 89
						89 = { is_claimed_by = SOV }
					}
				}
			}
		}

		completion_reward = {
			# REVISIT Covers Polish border, may want to add/remove some states
			add_state_claim = 784
			add_state_claim = 862
			add_state_claim = 863
			add_state_claim = 96
			add_state_claim = 95
			add_state_claim = 94
			add_state_claim = 93
			add_state_claim = 91
			add_state_claim = 89
			add_named_threat = { threat = 1.5 name = SOV_claims_on_poland }

			every_other_country = {
				limit = {
					NOT = { tag = POL } #already gets a huge minus from automatic modifiers from claims or SOV owning their cores
					OR = {
						owns_state = 784
						owns_state = 862
						owns_state = 863
						owns_state = 96
						owns_state = 95
						owns_state = 94
						owns_state = 93
						owns_state = 91
						owns_state = 89
					}
				}
				add_opinion_modifier = { target = SOV modifier = claimed_eastern_poland }
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	focus = {
		id = SOV_demand_eastern_poland_old
		text = SOV_demand_eastern_poland
		icon = GFX_goal_generic_equalize_AB
		prerequisite = { focus = SOV_claims_on_poland_old }
		mutually_exclusive = { focus = SOV_offer_poland_protection_old }
		x = -3
		y = 1
		relative_position_id = SOV_claims_on_poland_old
		cost = 10
		available = {
			any_country = {
				OR = {
					original_tag = POL
				}
				exists = yes
				has_civil_war = no
				is_in_faction = no
				NOT = {
					has_war = yes
					is_justifying_wargoal_against = ROOT
				}
			}
			is_puppet = no
			NOT =  { is_in_faction_with = POL }
			NOT = { has_war_with = POL }
			POL = {
				OR = {
					784 = { is_owned_and_controlled_by = POL }
					862 = { is_owned_and_controlled_by = POL }
					863 = { is_owned_and_controlled_by = POL }
					96 = { is_owned_and_controlled_by = POL }
					95 = { is_owned_and_controlled_by = POL }
					94 = { is_owned_and_controlled_by = POL }
					93 = { is_owned_and_controlled_by = POL }
					91 = { is_owned_and_controlled_by = POL }
					89 = { is_owned_and_controlled_by = POL }
				}
				is_owner_neighbor_of = ROOT				
			}
		}

		ai_will_do = {
			factor = 180
			modifier = {
				factor = 0
				date < 1940.1.1
			}
			modifier = {
				add = 1
				POL = {
					has_government = fascism
				}
			}
			modifier = {
				factor = 0
				date > 1944.1.1
			}
			modifier = { #No WW3
				factor = 0
				date < 1947.1.1
				POL = {
					OR = {
						has_war_with = GER
						has_war_with = ITA
						has_war_with = HUN
						has_war_with = CZE
					}
					OR = {
						is_guaranteed_by = ENG
						is_guaranteed_by = FRA
						is_guaranteed_by = USA
						is_in_faction_with = ENG
						is_in_faction_with = FRA
						is_in_faction_with = USA
					}
				}
				OR = {
					ENG = {
						is_faction_leader = yes
						is_major = yes
						has_war_with = GER
						has_government = democratic
						surrender_progress < 0.10
					}
					FRA = {
						is_faction_leader = yes
						is_major = yes
						has_war_with = GER
						has_government = democratic
						surrender_progress < 0.20
					}
					USA = {
						is_faction_leader = yes
						is_major = yes
						has_war_with = GER
						has_government = democratic
						surrender_progress < 0.25
					}
				}
			}				

			modifier = {
				add = 0.1
				ai_irrationality > 20
			}
			modifier = {
				add = 0.1
				ai_irrationality > 25
			}
			modifier = {
				add = 0.1
				ai_irrationality > 30
			}
			modifier = {
				add = 0.1
				ai_irrationality > 35
			}
			modifier = {
				add = 30
				ai_irrationality > 98
			}
		}

		completion_reward = {
			add_named_threat = { threat = 1.5 name = SOV_demand_eastern_poland }
			POL = {
				country_event = { id = poland.2 }
				custom_effect_tooltip = needs_approval
			}
			effect_tooltip = {
				SOV = {
					if = {
						limit = { POL = { owns_state = 784 controls_state = 784 } }
						transfer_state = 784
					}
					if = {
						limit = { POL = { owns_state = 862 controls_state = 862 } }
						transfer_state = 862
					}
					if = {
						limit = { POL = { owns_state = 863 controls_state = 863 } }
						transfer_state = 863
					}
					if = {
						limit = { POL = { owns_state = 96 controls_state = 96 } }
						transfer_state = 96
					}
					if = {
						limit = { POL = { owns_state = 95 controls_state = 95 } }
						transfer_state = 95
					}
					if = {
						limit = { POL = { owns_state = 94 controls_state = 94 } }
						transfer_state = 94
					}
					if = {
						limit = { POL = { owns_state = 93 controls_state = 93 } }
						transfer_state = 93
					}
					if = {
						limit = { POL = { owns_state = 91 controls_state = 91 } }
						transfer_state = 91
					}
					if = {
						limit = { POL = { owns_state = 89 controls_state = 89 } }
						transfer_state = 89
					}
				}
			}
		}
	}

	focus = {
		id = SOV_offer_poland_protection_old
		text = SOV_offer_poland_protection
		icon = GFX_goal_POL_LWP
		prerequisite = { focus = SOV_claims_on_poland_old }
		mutually_exclusive = { focus = SOV_demand_eastern_poland_old }
		available = {
			POL = {
				country_exists = POL
				has_war = no
				is_puppet = no
				is_owner_neighbor_of = ROOT
			}
			is_puppet = no

		}
		x = -1
		y = 1
		relative_position_id = SOV_claims_on_poland_old
		cost = 10
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				date < 1939.1.1
			}

			modifier = {
				factor = 0.5
				ai_irrationality < 24
			}
			modifier = {
				factor = 0.5
				ai_irrationality < 20
			}
			modifier = {
				factor = 0.5
				ai_irrationality < 15
			}
			modifier = {
				factor = 0.1
				ai_irrationality < 10
			}
		}
		completion_reward = {
			POL = {
				country_event = { id = poland.5 }
				custom_effect_tooltip = needs_approval
				effect_tooltip = {
					add_state_claim = 784
					add_state_claim = 763
					add_state_claim = 63
					add_state_claim = 68
					add_state_claim = 66
					add_state_claim = 67
					custom_effect_tooltip = SOV_offer_poland_protection_tt
				}
			}
			effect_tooltip = {
				SOV = {
					if = {
						limit = { POL = { owns_state = 784 controls_state = 784 } }
						transfer_state = 784
					}
					if = {
						limit = { POL = { owns_state = 862 controls_state = 862 } }
						transfer_state = 862
					}
					if = {
						limit = { POL = { owns_state = 863 controls_state = 863 } }
						transfer_state = 863
					}
					if = {
						limit = { POL = { owns_state = 96 controls_state = 96 } }
						transfer_state = 96
					}
					if = {
						limit = { POL = { owns_state = 95 controls_state = 95 } }
						transfer_state = 95
					}
					if = {
						limit = { POL = { owns_state = 94 controls_state = 94 } }
						transfer_state = 94
					}
					if = {
						limit = { POL = { owns_state = 93 controls_state = 93 } }
						transfer_state = 93
					}
					if = {
						limit = { POL = { owns_state = 91 controls_state = 91 } }
						transfer_state = 91
					}
					if = {
						limit = { POL = { owns_state = 89 controls_state = 89 } }
						transfer_state = 89
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	focus = {
		id = SOV_claim_bessarabia
		icon = GFX_goal_strike_romania
		prerequisite = { focus = SOV_claims_on_poland_old focus = SOV_workers_of_the_world_unite_old }
		mutually_exclusive = { focus = SOV_invite_romania_old }
		x = 1
		y = 1
		relative_position_id = SOV_claims_on_poland_old
		cost = 10
		ai_will_do = {
			factor = 2.5
			modifier = {
				factor = 0
				date < 1939.1.1
			}
			modifier = {
				factor = 200
				GER = { has_government = democratic }
			}
		}
		available = {
			is_puppet = no
		}
		bypass = {
			OR = {
				owns_state = 78
			}
			OR = {
				owns_state = 80
			}
		}
		completion_reward = { #This is now generic and will target any potential (multiple) controllers for these states.
			every_state = {
				limit = {
					OR = {
						state = 78
						state = 80
						state = 766
					}
					CONTROLLER = {
						NOT = { is_in_faction_with = ROOT }
						NOT = { is_subject_of = ROOT }
					}
				}
				add_claim_by = ROOT
			}
			add_named_threat = { threat = 1 name = SOV_claim_on_bessarabia }
			every_other_country = {
				limit = {
					NOT = { is_in_faction_with = ROOT }
					NOT = { is_subject_of = ROOT }
					any_controlled_state = {
						OR = {
							state = 78
							state = 80
							state = 766
						}
					}
				}
				add_opinion_modifier = { target = SOV modifier = claimed_bessarabia }
				country_event = { id = romania.1 hours = 16 random_hours = 8 }
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}
	focus = {
		id = SOV_invite_romania_old
		text = SOV_invite_romania
		icon = GFX_goal_ROM_appoint_pro_soviet_government
		prerequisite = { focus = SOV_claims_on_poland_old focus = SOV_workers_of_the_world_unite_old }
		mutually_exclusive = {
			focus = SOV_claim_bessarabia
		}
		x = 3
		y = 1
		relative_position_id = SOV_claims_on_poland_old
		cost = 10

		ai_will_do = {
			factor = 1.5
			modifier = {
				factor = 0
				OR = {
					date < 1939.1.1
					has_civil_war = yes
				}
				is_historical_focus_on = yes
			}
			modifier = {
				factor = 5
				ROM = {
					has_government = communism
				}	
			}
		}

		available = {
			is_faction_leader = yes
			is_subject = no
			ROM = {
				is_in_faction = no
				owns_state = 78
				OR = {
					has_government = communism
					communism > 0.4
				}
			}
		}

		bypass = {
			ROM = {
				is_in_faction_with = ROOT
			}
		}
		
		completion_reward = {
			if = {
				limit = {
					is_in_faction = yes
					NOT = { is_in_faction_with = ROM }
				}
				ROM = {
					country_event = { id = generic.5 hours = 8 random_hours = 4 }
				}
			}
			if = {
				limit = {
					ROM = {
						communism > 0.4						
					}
				}
				ROM = {
					add_popularity = {
						popularity = 0.05
						ideology = communism
					}
				}
			}						
		}
		search_filters = { FOCUS_FILTER_ALLIANCE }
	}

	focus = {
		id = SOV_demand_balkan_submission_old
		text = SOV_demand_balkan_submission
		icon = GFX_focus_generic_balkans_focus
		prerequisite = { focus = SOV_claim_bessarabia focus = SOV_invite_romania_old }
		mutually_exclusive = { focus = SOV_seek_balkan_cooperation_old }
		x = 0
		y = 1
		relative_position_id = SOV_claim_bessarabia
		cost = 10

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		
		available = {
			any_other_country = {
				BUL_is_balkan_nation = yes
			}
			is_subject = no
		}
		
		search_filters = {}

		completion_reward = {
			every_other_country = {
				limit = {
					BUL_is_balkan_nation = yes
				}
				add_timed_idea = {
					idea = communist_pressure
					days = 365
				}
				hidden_effect = {
					country_event = { id = generic.1 }
				}
			}
			custom_effect_tooltip = SOV_demand_balkan_submission_decisions_tt
			hidden_effect = {
				activate_targeted_decision = { target = ROM decision = SOV_send_ultimatum_to_country_balkan }
				activate_targeted_decision = { target = BUL decision = SOV_send_ultimatum_to_country_balkan }
				activate_targeted_decision = { target = GRE decision = SOV_send_ultimatum_to_country_balkan }
				activate_targeted_decision = { target = YUG decision = SOV_send_ultimatum_to_country_balkan }
				activate_targeted_decision = { target = TUR decision = SOV_send_ultimatum_to_country_balkan }
			}
		}
	}

	focus = {
		id = SOV_seek_balkan_cooperation_old
		text = SOV_seek_balkan_cooperation
		icon = GFX_focus_BUL_free_balkan_states
		prerequisite = { focus = SOV_claim_bessarabia focus = SOV_invite_romania_old }
		mutually_exclusive = { focus = SOV_demand_balkan_submission_old }
		x = 2
		y = 1
		relative_position_id = SOV_claim_bessarabia
		cost = 10

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		available = {
			any_other_country = {
				BUL_is_balkan_nation = yes
			}
			is_subject = no
		}

		completion_reward = {
			every_other_country = {
				limit = {
					BUL_is_balkan_nation = yes
				}
				add_timed_idea = {
					idea = communist_pressure
					days = 365
				}
				hidden_effect = {
					country_event = { id = generic.1 }
				}
			}
			custom_effect_tooltip = SOV_seek_balkan_cooperation_decisions_tt
			hidden_effect = {
				activate_targeted_decision = { target = ROM decision = SOV_pressure_country_government_balkan }
				activate_targeted_decision = { target = BUL decision = SOV_pressure_country_government_balkan }
				activate_targeted_decision = { target = GRE decision = SOV_pressure_country_government_balkan }
				activate_targeted_decision = { target = YUG decision = SOV_pressure_country_government_balkan }
				activate_targeted_decision = { target = TUR decision = SOV_pressure_country_government_balkan }
				activate_targeted_decision = { target = ROM decision = SOV_promote_ideology_rallies_balkan }
				activate_targeted_decision = { target = BUL decision = SOV_promote_ideology_rallies_balkan }
				activate_targeted_decision = { target = GRE decision = SOV_promote_ideology_rallies_balkan }
				activate_targeted_decision = { target = YUG decision = SOV_promote_ideology_rallies_balkan }
				activate_targeted_decision = { target = TUR decision = SOV_promote_ideology_rallies_balkan }
			}
		}
	}

	focus = {
		id = SOV_war_with_germany
		text = SOV_eradicate_western_fascism
		icon = GFX_focus_focus_fra_fascist_threat
		prerequisite = { focus = SOV_claim_bessarabia focus = SOV_invite_romania_old }
		available = {
			is_puppet = no
			any_country = {
				OR = {
					tag = ENG
					tag = FRA
					tag = GER
					tag = ITA
				}
				has_government = fascism
				is_major = yes
			}
			NOT = { has_idea = trotskyite_plot_nsb }
			custom_trigger_tooltip = {
				tooltip = SOV_has_not_officers_purged_tt
				NOT = { has_idea = officers_purged }
				NOT = { has_idea = officers_purged_2 }
				NOT = { has_idea = officers_purged_3 }
				NOT = { has_idea = officers_purged_4 }
				NOT = { has_idea = officers_purged_5 }
				NOT = { has_idea = officers_purged_6 }
				NOT = { has_idea = officers_purged_7 }
				NOT = { has_idea = officers_purged_8 }
				NOT = { has_idea = officers_purged_9 }
				NOT = { has_idea = officers_purged_10 }
			}
		}
		# bypass = {
		# 	OR = {
		# 		has_war_with = GER
		# 		has_war_with = PRE
		# 	}
			
		# }
		#will_lead_to_war_with = GER
		#will_lead_to_war_with = PRE
		x = -2
		y = 1
		relative_position_id = SOV_claim_bessarabia
		cost = 10
		ai_will_do = {
			factor = 1

			modifier = {
				factor = 0

				OR = {
					AND = {
						has_completed_focus = SOV_war_with_japan
						JAP = { has_capitulated = no }
					}
					has_war = yes
				}
				OR = {
					any_enemy_country = {
						is_neighbor_of = ROOT
					}
					alliance_strength_ratio > 0.75
				}
			}

			modifier = {
				factor = 2

				ROM = {
					is_in_faction_with = GER
				}
			}
			modifier = {
				factor = 200
				OR = {
					AND = {
						GER = { has_government = democratic }
						FRA = { has_government = fascism }
						GER = { has_war_with = FRA }
					}
					AND = {
						FRA = { has_government = fascism }
						PRE = { has_war_with = FRA }						
					}
				}

			}
		}
		bypass = {
			NOT = {
				any_country = {
					OR = {
						tag = ENG
						tag = FRA
						tag = GER
						tag = ITA
					}
					has_government = fascism
					is_major = yes
				}		
			}
		}
		completion_reward = {
			add_timed_idea = { idea = SOV_face_western_fascism_ns days = 365 }
			
			if = {
				limit = {
					ENG = {
						has_government = fascism
					}
				}
				hidden_effect = { add_ideas = SOV_targeted_bonus_against_ENG }
				create_wargoal = {
					type = puppet_wargoal_focus
					target = ENG
				}
			}
			if = {
				limit = {
					FRA = {
						has_government = fascism
					}
				}
				hidden_effect = { add_ideas = SOV_targeted_bonus_against_FRA }
				create_wargoal = {
					type = puppet_wargoal_focus
					target = FRA
				}
			}
			if = {
				limit = {
					GER = {
						has_government = fascism
					}
				}
				hidden_effect = { add_ideas = SOV_targeted_bonus_against_GER }
				create_wargoal = {
					type = puppet_wargoal_focus
					target = GER
				}
			}
			if = {
				limit = {
					ITA = {
						has_government = fascism
					}
				}
				hidden_effect = { add_ideas = SOV_targeted_bonus_against_ITA }
				create_wargoal = {
					type = puppet_wargoal_focus
					target = ITA
				}
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}
##---> Anti capitalist diplomacy <><> <><> <><>
	# focus = {
	# 	id = SOV_anti_capitalist_diplomacy
	# 	icon = GFX_goal_molotov_ribbentrop_pact
	# 	prerequisite = { focus = SOV_socialism_in_one_country_old }
	# 	#mutually_exclusive = { focus = SOV_world_revolution_old }
	# 	#mutually_exclusive = { focus = SOV_western_expansion }
	# 	x = -5
	# 	y = 0
	# 	relative_position_id = SOV_western_expansion
	# 	cost = 5
	# 	ai_will_do = {
	# 		factor = 0.5

	# 		modifier = {
	# 			has_government = democratic
	# 			factor = 0
	# 		}

	# 		modifier = {
	# 			factor = 5
	# 			ai_irrationality > 25
	# 		}

	# 		modifier = {
	# 			factor = 5
	# 			ai_irrationality > 35
	# 		}

	# 		modifier = {
	# 			factor = 2
	# 			ai_irrationality > 40
	# 		}
	# 	}
	# 	available = {
	# 		is_puppet = no
	# 	}

	# 	available_if_capitulated = yes

	# 	completion_reward = {
	# 	add_named_threat = { threat = 0.5 name = SOV_anti_capitalist_diplomacy_t }
	# 		every_other_country = {
	# 			limit = { has_government = fascism }
	# 			add_opinion_modifier = { target = SOV modifier = anti_capitalist_diplomacy_focus }
	# 		}
	# 		USA = {
	# 			if = {
	# 				limit = { NOT = { has_government = communism } }
	# 				add_opinion_modifier = { target = SOV modifier = anti_capitalist_diplomacy_capitalists }
	# 			}
	# 		}
	# 		ENG = {
	# 			if = {
	# 				limit = { NOT = { has_government = communism } }
	# 				add_opinion_modifier = { target = SOV modifier = anti_capitalist_diplomacy_capitalists }
	# 			}
	# 		}
	# 		FRA = {
	# 			if = {
	# 				limit = { NOT = { has_government = communism } }
	# 				add_opinion_modifier = { target = SOV modifier = anti_capitalist_diplomacy_capitalists }
	# 			}
	# 		}
	# 		if = {
	# 			limit = {
	# 					has_idea = civilian_economy
	# 				}
	# 			swap_ideas = { remove_idea = civilian_economy add_idea = low_economic_mobilisation  }
	# 		}
	# 		if = {
	# 			limit = {
	# 				has_dlc = "La Resistance"
	# 				AST = {
	# 					NOT = { has_government = communism }
	# 				} 
					
	# 			}
	# 			create_operative_leader = {
	# 				name = "Rupert Lockwood"
	# 				portrait_path = gfx/leaders/Europe/portrait_europe_generic_operative_male_10.dds 
	# 				traits = {  }
	# 				bypass_recruitment = no
	# 				available_to_spy_master = yes
	# 				female = yes
	# 				nationalities = { SOV AST }
	# 			}					
	# 		}
			
	# 	}
	# }

	focus = {
		id = SOV_middle_east_diplomacy_old
		text = SOV_middle_east_diplomacy
		icon = GFX_focus_TUR_treaty_of_saadabad
		prerequisite = { focus = SOV_permanent_revolution focus = SOV_socialism_in_one_country_old }
		x = 9
		y = 1
		relative_position_id = SOV_socialism_in_one_country_old
		cost = 5
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
				
		bypass = {
			NOT = {
				country_exists = IRQ
				country_exists = PER
				country_exists = AFG
				country_exists = SAU
			}
		}

		available = {
			is_subject = no
		}
		
		search_filters = {}

		completion_reward = {
			if = {
				limit = {
					country_exists = IRQ
				}
				IRQ = {
					if = {
						limit = { ROOT = { has_government = fascism } }
						add_timed_idea = { idea = fascist_influence_weak days = 1095 }
					}
					if = {
						limit = { ROOT = { has_government = democratic } }
						add_timed_idea = { idea = democratic_influence_weak days = 1095 }
					}
					if = {
						limit = { ROOT = { has_government = communism } }
						add_timed_idea = { idea = communist_influence_weak days = 1095 }
					}
					hidden_effect = {
						country_event = { id = generic.1 }
					}
				}
			}
			if = {
				limit = {
					country_exists = PER
				}
				PER = {
					if = {
						limit = { ROOT = { has_government = fascism } }
						add_timed_idea = { idea = fascist_influence_weak days = 1095 }
					}
					if = {
						limit = { ROOT = { has_government = democratic } }
						add_timed_idea = { idea = democratic_influence_weak days = 1095 }
					}
					if = {
						limit = { ROOT = { has_government = communism } }
						add_timed_idea = { idea = communist_influence_weak days = 1095 }
					}
					hidden_effect = {
						country_event = { id = generic.1 }
					}
				}
			}
			if = {
				limit = {
					country_exists = AFG
				}
				AFG = {
					if = {
						limit = { ROOT = { has_government = fascism } }
						add_timed_idea = { idea = fascist_influence_weak days = 1095 }
					}
					if = {
						limit = { ROOT = { has_government = democratic } }
						add_timed_idea = { idea = democratic_influence_weak days = 1095 }
					}
					if = {
						limit = { ROOT = { has_government = communism } }
						add_timed_idea = { idea = communist_influence_weak days = 1095 }
					}
					hidden_effect = {
						country_event = { id = generic.1 }
					}
				}
			}
			if = {
				limit = {
					country_exists = SAU
				}
				SAU = {
					if = {
						limit = { ROOT = { has_government = fascism } }
						add_timed_idea = { idea = fascist_influence_weak days = 1095 }
					}
					if = {
						limit = { ROOT = { has_government = democratic } }
						add_timed_idea = { idea = democratic_influence_weak days = 1095 }
					}
					if = {
						limit = { ROOT = { has_government = communism } }
						add_timed_idea = { idea = communist_influence_weak days = 1095 }
					}
					hidden_effect = {
						country_event = { id = generic.1 }
					}
				}
			}
		}
	}

	focus = {
		id = SOV_southern_thrust
		icon = GFX_goal_generic_military_sphere
		prerequisite = { focus = SOV_middle_east_diplomacy_old }
		mutually_exclusive = { focus = SOV_support_afghan_ideology_old }
		x = -1
		y = 1
		relative_position_id = SOV_middle_east_diplomacy_old
		cost = 10
		ai_will_do = {
			factor = 1
			modifier = {
				has_war_with = GER
				factor = 0
			}
			modifier = {
				AND = {
					has_war_with = ENG
					surrender_progress > 0.3
				}
				factor = 0
			}
			modifier = {
				has_war_with = RAJ
				factor = 9
			}
		}
		will_lead_to_war_with = PER
		will_lead_to_war_with = IRQ
		will_lead_to_war_with = AFG
		available = {
			is_puppet = no
		}
		bypass = {
			PER = {
				NOT = { owns_state = 419 }
				NOT = { owns_state = 420 }
				NOT = { owns_state = 266 }
			}
			IRQ = {
				NOT = { owns_state = 676 }
				NOT = { owns_state = 291 }
			}
			AFG = {
				NOT = { owns_state = 267 }
				NOT = { owns_state = 415 }
			}
		}
		completion_reward = {
		add_named_threat = { threat = 0.2 name = SOV_southern_thrust_t }
			if = {
				limit = {
					PER = {
						OR = {
							owns_state = 419
							owns_state = 420
							owns_state = 266
						}
					}
				}
				create_wargoal = {
					type = take_state_focus
					target = PER
					expire = 0
					generator = { 419 420 266 }
				}
			}
			if = {
				limit = {
					IRQ = {
						OR = {
							owns_state = 676
							owns_state = 291
						}
					}
				}
				create_wargoal = {
					type = take_state_focus
					target = IRQ
					expire = 0
					generator = { 676 291 }
				}
			}
			if = {
				limit = {
					AFG = {
						exists = yes
						is_neighbor_of = SOV
					}
				}
				create_wargoal = {
					type = puppet_wargoal_focus
					target = AFG
					expire = 0
				}
			}
			ENG = {
				add_opinion_modifier = { target = SOV modifier = middle_east_expansionism }
			}
			FRA = {
				add_opinion_modifier = { target = SOV modifier = middle_east_expansionism }
			}
			USA = {
				add_opinion_modifier = { target = SOV modifier = middle_east_expansionism }
			}
			# REVISIT Possibly add other Allies faction members as well
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	focus = {
		id = SOV_support_afghan_ideology_old
		text = SOV_support_afghan_ideology
		icon = GFX_focus_generic_befriend_afghanistan
		prerequisite = { focus = SOV_middle_east_diplomacy_old }
		mutually_exclusive = { focus = SOV_southern_thrust }
		x = 1
		y = 1
		relative_position_id = SOV_middle_east_diplomacy_old
		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		bypass = {
			NOT = { country_exists = AFG }
		}

		available = {
			NOT = { has_war_with = AFG }
			is_subject = no
		}
		
		search_filters = {}

		completion_reward = {
			activate_targeted_decision = { target = AFG decision = SOV_pressure_country_government_middle_east }
			activate_targeted_decision = { target = AFG decision = SOV_promote_ideology_rallies_middle_east }
		}
	}

	focus = {
		id = SOV_preemptive_invasion_of_iran_old
		text = SOV_preemptive_invasion_of_iran
		icon = GFX_focus_generic_attack_iran
		prerequisite = { focus = SOV_support_afghan_ideology_old }
		x = 0
		y = 1
		relative_position_id = SOV_support_afghan_ideology_old
		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		available = {
			country_exists = PER
			NOT = { has_war_with = PER }
			is_subject = no
			any_enemy_country = { is_major = yes }
		}
		
		search_filters = {}

		completion_reward = {
			PER = {
				set_country_flag = SOV_ultimatum_sent_flag
				country_event = { id = NSB_soviet_foreign_politics_events.210 hours = 16 random_hours = 8 }
			}

			effect_tooltip = {
				custom_effect_tooltip = if_they_accept_tt
				ROOT = {
					puppet = PER
				}

				custom_effect_tooltip = if_they_refuse_tt
				effect_tooltip = {
					activate_mission = SOV_preparations_for_operation_countenance
					custom_effect_tooltip = SOV_preparations_for_operation_countenance_tt
				}
				custom_effect_tooltip = SOV_preemptive_invasion_of_iran_tt
			}
		}
	}

	focus = {
		id = SOV_the_khakimov_proposal_old
		text = SOV_the_khakimov_proposal
		icon = GFX_focus_generic_befriend_saudi_arabia
		prerequisite = { focus = SOV_anti_fascist_policies_old }
		prerequisite = { focus = SOV_southern_thrust focus = SOV_preemptive_invasion_of_iran_old }
		x = 0
		y = 2
		relative_position_id = SOV_southern_thrust
		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		available = {
			is_subject = no
			country_exists = SAU
			NOT = { has_war_with = SAU }
		}
		
		search_filters = {}

		completion_reward = {
			SAU = {
				add_ideas = SOV_ambassador_karim_khakimov #adds +35 communism acceptance and -50 for other ideologies
				add_opinion_modifier = { target = SOV modifier = SOV_cordial_relations_developed_by_soviet_diplomat } 
				hidden_effect = {
					country_event = { id = NSB_soviet_foreign_politics_events.211 hours = 8 random_hours = 4 }
				}
			}
			activate_targeted_decision = { target = SAU decision = SOV_pressure_country_government_middle_east }
			activate_targeted_decision = { target = SAU decision = SOV_promote_ideology_rallies_middle_east }
		}
	}

	focus = {
		id = SOV_claim_on_the_straits_old
		text = SOV_claim_on_the_straits
		icon = GFX_goal_SOV_supremacy_on_the_bosporus
		prerequisite = { focus = SOV_demand_balkan_submission_old focus = SOV_seek_balkan_cooperation_old }
		x = 1
		y = 1
		relative_position_id = SOV_demand_balkan_submission_old
		cost = 10
		ai_will_do = {
			factor = 1
		}
		available = {
			is_subject = no
		}
		bypass = {
			OR = {
				AND = {
					OR = {
						owns_state = 341
						341 = { is_claimed_by = ROOT }
					}
					OR = {
						owns_state = 347
						347 = { is_claimed_by = ROOT }
					}
					OR = {
						owns_state = 340
						340 = { is_claimed_by = ROOT }
					}
					OR = {
						owns_state = 339
						339 = { is_claimed_by = ROOT }
					}
					OR = {
						owns_state = 797
						797 = { is_claimed_by = ROOT }
					}					
				}
				TUR = {
					owns_state = 797
					owns_state = 341
					owns_state = 347
					owns_state = 340
					OR = {
						is_puppet_of = ROOT
						is_in_faction_with = ROOT
					}	
					
				}
			}

		}
		completion_reward = {
			add_state_claim = 341
			add_state_claim = 347
			add_state_claim = 340
			add_state_claim = 339
			add_state_claim = 797
			add_named_threat = { threat = 2 name = SOV_claim_on_the_straits }
			if = {
				limit = {
					TUR = {
						exists = yes
						is_neighbor_of = SOV
					}
				}
				create_wargoal = {
					type = puppet_wargoal_focus
					target = TUR
					expire = 0
				}
			}
			else = {
				if = {
					limit = {
						any_other_country = {
							NOT = {
								tag = TUR
							}
							owns_state = 797
						}
					}
					797 = {
						OWNER = {
							ROOT = {
								create_wargoal = {
									target = PREV
									expire = 0
									type = take_state_focus
									generator = { 797 340 341 }
								}
							}
						}
					}			
				}				
			}			
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	# Very weak, just use NSB-provided ultimatums or even add a decision for this effect
	# focus = {
	# 	id = SOV_ultimatum_to_greece_old
	# 	text = SOV_ultimatum_to_greece
	# 	icon = GFX_goal_italy_attack_greece
	# 	prerequisite = { focus = SOV_claim_on_the_straits_old }
	# 	available = {
	# 		is_puppet = no
	# 		341 = {
	# 			CONTROLLER = {
	# 				OR = {
	# 					tag = ROOT
	# 					is_in_faction_with = ROOT
	# 					is_subject_of = ROOT
	# 				}
	# 			}
	# 		}
	# 		347 = {
	# 			CONTROLLER = {
	# 				OR = {
	# 					tag = ROOT
	# 					is_in_faction_with = ROOT
	# 					is_subject_of = ROOT
	# 				}
	# 			}
	# 		}
	# 		340 = {
	# 			CONTROLLER = {
	# 				OR = {
	# 					tag = ROOT
	# 					is_in_faction_with = ROOT
	# 					is_subject_of = ROOT
	# 				}
	# 			}
	# 		}
	# 		339 = {
	# 			CONTROLLER = {
	# 				OR = {
	# 					tag = ROOT
	# 					is_in_faction_with = ROOT
	# 					is_subject_of = ROOT
	# 				}
	# 			}
	# 		}
	# 	}
	# 	bypass = {
	# 		187 = { is_controlled_by = SOV }
	# 	}
	# 	x = 0
	# 	y = 1
	# 	relative_position_id = SOV_claim_on_the_straits_old
	# 	cost = 10
	# 	ai_will_do = {
	# 		factor = 1
	# 	}
	# 	completion_reward = {
	# 	add_named_threat = { threat = 1 name = SOV_ultimatum_to_greece_t }
	# 		add_state_claim = 187
	# 		if = {
	# 			limit = { country_exists = GRE }
	# 			GRE = { country_event = { id = greece.1 days = 1 } }
	# 		}
	# 	}
	# 	search_filters = { FOCUS_FILTER_ANNEXATION }
	# }

	
	focus = {
		id = SOV_reconcile_japan_old
		text = SOV_reconcile_japan
		icon = GFX_goal_JAP_defence
		prerequisite = { focus = SOV_policy_of_individual_security_old }
		# mutually_exclusive = {
		# 	focus = SOV_far_east_fortification_old
		# }
		available = {
			is_puppet = no
			655 = { is_controlled_by = ROOT }
			JAP = { 
				NOT = {
					is_in_faction_with = GER
				}
			}
			NOT = { has_war_with = JAP }
		}

		bypass = {
			NOT = { country_exists = JAP }
			JAP = {
				has_completed_focus = JAP_support_the_kodoha_faction #They are coming for us
			}
		}
		x = 0
		y = 1
		relative_position_id = SOV_policy_of_individual_security_old
		cost = 5
		ai_will_do = {
			factor = 1
		}
		completion_reward = {
		add_named_threat = { threat = -0.1 name = SOV_reconcile_japan_t }
			JAP = {
				add_opinion_modifier = { target = SOV modifier = border_conflict_reconciled }
				country_event = { id = soviet.23 days = 1 }
				effect_tooltip = { transfer_state = 655 }
				add_ai_strategy = {
					type = befriend
					id = "SOV"			
					value = 25
				}
			}
		}
	}

	focus = {
		id = SOV_spheres_of_influence_in_china_old
		text = SOV_spheres_of_influence_in_china
		icon = GFX_goal_generic_position_armies
		prerequisite = { focus = SOV_reconcile_japan_old }
		x = 0
		y = 1
		relative_position_id = SOV_reconcile_japan_old
		cost = 10

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		available = {
			is_subject = no
		}
		
		search_filters = {FOCUS_FILTER_ANNEXATION}

		completion_reward = {
			if = {
				limit = {
					SIK = { NOT = { has_government = ROOT } }
				}
				create_wargoal = {
					type = puppet_wargoal_focus
					target = SIK
				} 
			}
			else = {
				SIK = { country_event = { id = NSB_soviet_foreign_politics_events.200 hours = 6 random_hours = 2 } }
			}
		}
	}

	focus = {
		id = SOV_claim_on_sinkiang
		icon = GFX_goal_CHI_sinkiang
		prerequisite = { focus = SOV_socialism_in_one_country_old }
		available = {
			#SOV controls the states in which railway lines will be built
			controls_state = 405 #TASHKENT
			controls_state = 404 #KYZYL ORDA
			controls_state = 732 #PAMIR
			controls_state = 586 #ALMA-ATA

			OR = {
				AND = { #Relevant states under Soviet control
					controls_state = 617 #URUMQI
					controls_state = 618 #DZUNGARIA
				}
				SIK = { #Relevant states under Sinkiang control
					NOT = { has_war_with = ROOT }
					controls_state = 617 #URUMQI
					controls_state = 618 #DZUNGARIA
				}
			}

			is_subject = no
		}
		x = -2
		y = 1
		relative_position_id = SOV_socialism_in_one_country_old
		cost = 10
		ai_will_do = {
			factor = 1
		}

		bypass = {
			OR = {
				NOT = { country_exists = SIK }
				AND = {
					OR = {
						owns_state = 618
						618 = { is_claimed_by = ROOT }
					}
					OR = {
						owns_state = 617
						617 = { is_claimed_by = ROOT }
					}
					OR = {
						owns_state = 619
						619 = { is_claimed_by = ROOT }
					}
					OR = {
						owns_state = 287
						287 = { is_claimed_by = ROOT }
					}
				}
			}
		}

		completion_reward = {
			hidden_effect = { #Decrease SIK's desire to join Chinese faction (and other AI strategies)
				SOV_approach_sinkiang_diplomacy_effect = yes
				SIK = {
					add_ai_strategy = { #This is added in Gobi Gambit + all 3 investment decisions
						type = alliance
						id = SOV		
						value = 4
					}
				}
			}
			if = { #If SOV controls the relevant states (for whatever weird reason -.-), then insta-build
				limit = {
					controls_state = 617 #URUMQI
					controls_state = 618 #DZUNGARIA
				}
				# Tashkent - Frunze - Alma-Ata - Urumqi
				build_railway = {
					path = { 1459 10148 10366 12397 12340 12640 7706 12583 4224 1591 10547 10619 12529 7866 1783 10674 4709 } #1840 12526 4770 4709
				}
				#Supply Hub in Alma-Ata
				586 = {
					add_building_construction = {
						type = supply_node
						level = 1
						province = 1591
						instant_build = yes
					}
				}
				custom_effect_tooltip = SOV_sinkiang_decisions_available_tt
			}
			else = { #If SIK in control of them
				SIK = { country_event = { id = NSB_soviet_foreign_politics_events.270 hours = 6 random_hours = 6 } }
				# IF THEY ACCEPT
				custom_effect_tooltip = if_they_accept_tt
				effect_tooltip = {
					add_opinion_modifier = {
						target = SIK
						modifier = SOV_complied_with_our_demands
					}
					
					# Tashkent - Frunze - Alma-Ata - Urumqi
					build_railway = {
						path = { 1459 10148 10366 12397 12340 12640 7706 12583 4224 1591 10547 10619 12529 7866 1783 10674 4709 }
					}
					#Supply Hub in Alma-Ata
					586 = {
						add_building_construction = {
							type = supply_node
							level = 1
							province = 1591
							instant_build = yes
						}
					}
					custom_effect_tooltip = SOV_sinikiang_influence_cg_tt_sov
					custom_effect_tooltip = SOV_sinkiang_decisions_available_tt
				}
				# IF THEY REFUSE
				custom_effect_tooltip = if_they_refuse_tt
				effect_tooltip = {
					add_opinion_modifier = {
						target = SIK
						modifier = SOV_rejected_our_demands
					}
					# Tashkent - Frunze - Alma-Ata
					build_railway = {
						path = { 1459 10148 10366 12397 12340 12640 7706 12583 4224 1591 }
					}
					#Supply Hub in Alma-Ata
					586 = {
						add_building_construction = {
							type = supply_node
							level = 1
							province = 1591
							instant_build = yes
						}
					}
					custom_effect_tooltip = SOV_sinikiang_influence_refuse_tt
				}
			}
			custom_effect_tooltip = SOV_volunteers_allowed_sinkiang_tt
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	focus = {
		id = SOV_into_the_plateau_old
		text = SOV_into_the_plateau
		icon = GFX_goal_TIB_monasteries_crushed
		prerequisite = { focus = SOV_claim_on_sinkiang }
		x = 0
		y = 1
		relative_position_id = SOV_claim_on_sinkiang

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {
			OR = {
				AND = {
					759 = { is_controlled_by = SOV }
					287 = { is_controlled_by = SOV }
				}
				AND = {
					SIK = {
						is_subject_of = SOV
					}
					759 = { is_controlled_by = SIK }
					287 = { is_controlled_by = SIK }
				}
			}
		}

		bypass = {
			OR = {
				AND = {
					NOT = {
						country_exists = TIB
						country_exists = NEP
						country_exists = BHU
					}
					OR = {
						owns_state = 322
						322 = { is_claimed_by = ROOT }
					}
					OR = {
						owns_state = 758
						758 = { is_claimed_by = ROOT }
					}
					OR = {
						owns_state = 757
						757 = { is_claimed_by = ROOT }
					}
					OR = {
						owns_state = 324
						324 = { is_claimed_by = ROOT }
					}
				}
			}
		}

		completion_reward = {
			add_named_threat = { threat = 1 name = SOV_into_the_plateau_t }
			add_state_claim = 322
			add_state_claim = 758
			add_state_claim = 757
			add_state_claim = 601
			add_state_claim = 324
			add_state_claim = 323
			every_other_country = {
				limit = {
					NOT = {
						is_in_faction_with = ROOT
					}
					OR = {
						controls_state = 322
						controls_state = 758
						controls_state = 757
						controls_state = 601
						controls_state = 324
						controls_state = 323
					}
				}
				SOV = {
					create_wargoal = {
						type = take_state_focus
						target = PREV
						expire = 0
					}
				}
			}
			#add_ai_strategy = {
			#	type = antagonize
			#	id = "TIB"			
			#	value = 200
			#}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	###ROAD TO 56 IRON CURTAIN###

	focus = {
		id = SOV_iron_curtain_old
		text = SOV_iron_curtain
		icon = GFX_goal_sov_iron_curtain
		prerequisite = { focus = SOV_lessons_of_war_old }
		prerequisite = { focus = SOV_war_with_germany } #focus = SOV_ultimatum_to_greece_old
		x = -23
		y = 1
		relative_position_id = SOV_war_with_germany #the other is more logical but comes later in the file

		cost = 5

		ai_will_do = {
			factor = 1.1
			modifier = { #Go for the unthinkable asap
				add = 25
				OR = {
					USA = {
						exists = yes
						is_major = yes
						has_war = no
						is_faction_leader = yes
					}
					ENG = {
						exists = yes
						is_major = yes
						has_war = no
						is_faction_leader = yes
					}
				}
				ROOT = {
					has_war = no
					is_faction_leader = yes
					is_major = yes
				}
				has_global_flag = r56_ww2_got_done_early_make_ai_move_toward_ww3
			}
		}

		available = {
			hidden_trigger = {
				is_ai = no
			}
			surrender_progress < 0.1
			is_puppet = no
			custom_trigger_tooltip = {
				tooltip = iron_curtain_tt		
				count_triggers = {
					amount = 3
					ROM = {
						has_government = ROOT
						OR = {
							is_subject_of = ROOT
							is_in_faction_with = ROOT
						}
						num_of_factories > 30
					}
					BUL = {
						has_government = ROOT
						OR = {
							is_subject_of = ROOT
							is_in_faction_with = ROOT
						}
						num_of_factories > 30
					}
					POL = {
						has_government = ROOT
						OR = {
							is_subject_of = ROOT
							is_in_faction_with = ROOT
						}
						num_of_factories > 30
					}
					DDR = {
						has_government = ROOT
						OR = {
							is_subject_of = ROOT
							is_in_faction_with = ROOT
						}
						num_of_factories > 30
					}
					GER = {
						has_government = ROOT
						OR = {
							is_subject_of = ROOT
							is_in_faction_with = ROOT
						}
						num_of_factories > 30
					}
					TUR = {
						has_government = ROOT
						OR = {
							is_subject_of = ROOT
							is_in_faction_with = ROOT
						}
						num_of_factories > 30
					}
					GRE = {
						has_government = ROOT
						OR = {
							is_subject_of = ROOT
							is_in_faction_with = ROOT
						}
						num_of_factories > 30
					}
					HUN = {
						has_government = ROOT
						OR = {
							is_subject_of = ROOT
							is_in_faction_with = ROOT
						}
						num_of_factories > 30
					}
					AUS = {
						has_government = ROOT
						OR = {
							is_subject_of = ROOT
							is_in_faction_with = ROOT
						}
						num_of_factories > 30
					}
					YUG = {
						has_government = ROOT
						OR = {
							is_subject_of = ROOT
							is_in_faction_with = ROOT
						}
						num_of_factories > 30
					}
					CZE = {
						has_government = ROOT
						OR = {
							is_subject_of = ROOT
							is_in_faction_with = ROOT
						}
						num_of_factories > 30
					}
					FIN = {
						has_government = ROOT
						OR = {
							is_subject_of = ROOT
							is_in_faction_with = ROOT
						}
						num_of_factories > 30
					}
				}
			}
		}

		completion_reward = {
			add_ideas = SOV_iron_curtain_idea
			set_faction_name = SOV_iron_curtain_faction
		}
	}

	focus = {
		id = SOV_comecon
		icon = GFX_goal_sov_comecon
		prerequisite = { focus = SOV_sino_soviet_treaty_old }
		prerequisite = { focus = SOV_interest_in_cuba_old }
		prerequisite = { focus = SOV_facilitate_a_balkan_federation_old focus = SOV_take_out_tito_old focus = SOV_overthrow_weak_king_old }
		x = 0
		y = 3
		relative_position_id = SOV_iron_curtain_old

		cost = 7

		ai_will_do = {
			factor = 0
		}

		available = {
			has_civil_war = no
			has_war = no
			num_subjects > 0
		}

		
		
		


		completion_reward = {
			add_ideas = SOV_comecon_idea
			every_country = {
				limit = {
					is_subject_of = ROOT
				}
				add_ideas = SOV_comecon_support
			}
			custom_effect_tooltip = SOV_comecon_tt	
		}
	}

	focus = {
		id = SOV_expand_western_spy_rings_old
		text = SOV_expand_western_spy_rings
		icon = GFX_goal_generic_communist_officer
		prerequisite = { focus = SOV_iron_curtain_old }
		x = 0
		y = 1
		relative_position_id = SOV_iron_curtain_old

		cost = 10

		ai_will_do = {
			factor = 1
			modifier = { #Go for the unthinkable asap
				add = 25
				OR = {
					USA = {
						exists = yes
						is_major = yes
						has_war = no
						is_faction_leader = yes
					}
					ENG = {
						exists = yes
						is_major = yes
						has_war = no
						is_faction_leader = yes
					}
				}
				ROOT = {
					has_war = no
					is_faction_leader = yes
					is_major = yes
				}
				has_global_flag = r56_ww2_got_done_early_make_ai_move_toward_ww3
			}
		}

		completion_reward = {
			every_other_country = {
				limit = {
					has_government = democratic
					OR = {
						capital_scope = {
							is_on_continent = europe
						}
						original_tag = USA
					}
				}
				add_timed_idea = { idea = comintern_influence days = 547 }
			}
		}
	}

	focus = {
		id = SOV_incite_a_greek_revolution_old
		text = SOV_incite_a_greek_revolution
		icon = GFX_focus_renounce_the_treaty_of_trianon
		prerequisite = { focus = SOV_iron_curtain_old }
		x = 4
		y = 1
		relative_position_id = SOV_iron_curtain_old

		cost = 10

		ai_will_do = {
			factor = 0.1
		}
		will_lead_to_war_with = GRE
		available = {
			country_exists = GRE
			GRE = {
				NOT = {
					has_government = communism
				}
				has_civil_war = no
				is_puppet = no
			}
		}

		bypass = {
			OR = {
				GRE = {
					is_subject_of = SOV
					has_government = communism
				}
				NOT = {
					country_exists = GRE	
				}	
			}
		}

		completion_reward = {
			add_timed_idea = { idea = SOV_support_greece days = 200 }
			create_wargoal = {
				type = puppet_wargoal_focus
				target = GRE
			}

		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	focus = {
		id = SOV_overthrow_weak_king_old
		text = SOV_overthrow_weak_king
		icon = GFX_goal_BUL_divide_yugoslavia
		prerequisite = { focus = SOV_incite_a_greek_revolution_old }
		mutually_exclusive = { focus = SOV_facilitate_a_balkan_federation_old focus = SOV_take_out_tito_old }
		x = -2
		y = 1
		relative_position_id = SOV_incite_a_greek_revolution_old
		cost = 10
		ai_will_do = {
			factor = 0
		}
		
		available_if_capitulated = yes
		
		

		available = {
			YUG = {
				NOT = {
					has_government = communism
				}
			}
		}

		bypass = {
			YUG = {
				OR = {
					has_government = communism
					exists = no
				}
			}
		}
		
		completion_reward = {
			add_political_power = -50
			YUG = {
				add_ideas = SOV_civil_war_ignited
			}
			YUG = {
				start_civil_war = {
					ideology = communism
					size = 0.6
					capital = 106
					states = { 106 878 803 802 881 108 891 }
				}
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	focus = {
		id = SOV_take_out_tito_old
		text = SOV_take_out_tito
		icon = GFX_goal_sov_kill_tito
		prerequisite = { focus = SOV_incite_a_greek_revolution_old }
		mutually_exclusive = { focus = SOV_facilitate_a_balkan_federation_old focus = SOV_overthrow_weak_king_old }
		x = 0
		y = 1
		relative_position_id = SOV_incite_a_greek_revolution_old

		cost = 10

		ai_will_do = {
			factor = 0.1
		}

		available = {
			YUG = {
				has_government = communism
				exists = yes
				has_country_leader = {
					name = "Josip Broz Tito"
					ruling_only = yes
				}
			}
		}

		bypass = {
			YUG = {
				has_government = communism
				NOT = {
					has_country_leader = {
						name = "Josip Broz Tito"
						ruling_only = yes
					}
				}
			}
		}
		will_lead_to_war_with = YUG
		
		
		


		completion_reward = {
			add_political_power = -100
			create_wargoal = {
				type = puppet_wargoal_focus
				target = YUG
			}
			hidden_effect = {
				YUG = {
					kill_country_leader = yes
				}
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	focus = {
		id = SOV_facilitate_a_balkan_federation_old
		text = SOV_facilitate_a_balkan_federation
		icon = GFX_focus_GRE_red_greece
		prerequisite = { focus = SOV_incite_a_greek_revolution_old }
		mutually_exclusive = { focus = SOV_take_out_tito_old focus = SOV_overthrow_weak_king_old  }
		x = 2
		y = 1
		relative_position_id = SOV_incite_a_greek_revolution_old

		cost = 10

		ai_will_do = {
			factor = 0
		}

		available = {
			YUG = {
				exists = yes
				has_opinion = {
					target = SOV
					value > 59
				}
				has_government = communism
			}
			BUL = {
				is_in_faction_with = SOV
				is_puppet_of = SOV
			}
			ROM = {
				is_in_faction_with = SOV
				is_puppet_of = SOV
			}
			GRE = {
				is_in_faction_with = SOV
				is_puppet_of = SOV
			}
			ALB = {
				is_in_faction_with = SOV
				is_puppet_of = SOV
			}
		}

		
		
		


		completion_reward = {
			YUG = {
				country_event = {
					id = r56.soviet.98
					days = 1
				}
			}
			custom_effect_tooltip = sov_balkan_fed_tt
		}
	}

	focus = {
		id = SOV_return_dalian_old
		text = SOV_return_dalian
		icon = GFX_goal_generic_foreign_diplomacy
		prerequisite = { focus = SOV_iron_curtain_old }
		x = -3
		y = 1
		relative_position_id = SOV_iron_curtain_old

		cost = 5

		ai_will_do = {
			factor = 0.9
		}

		available = {
			owns_state = 745
			PRC = {
				exists = yes
				has_government = communism
			}
		}

		bypass = {
			OR = {
				NOT = {
					owns_state = 745
				}
				NOT = {
					PRC = {
						exists = yes
						has_government = communism
					}
				}
			}
		}

		
		
		


		completion_reward = {
			if = {
				limit = {
					745 = {
						is_claimed_by = SOV
					}
				}
				SOV = {
					remove_state_claim = 745
				}
			}
			if = {
				limit = {
					PRC = {
						is_major = no
					}
				}
				give_guarantee = PRC
			}
			else = {
				diplomatic_relation = {
					country = PRC
					relation = non_aggression_pact
					active = yes
				}
			}
			PRC = {
				set_state_owner = 745
			}
		}
	}

	focus = {
		id = SOV_sino_soviet_treaty_old
		text = SOV_sino_soviet_treaty
		icon = GFX_focus_chi_cooperation_with_the_communists
		prerequisite = { focus = SOV_return_dalian_old }
		x = 0
		y = 1
		relative_position_id = SOV_return_dalian_old

		cost = 10

		ai_will_do = {
			factor = 0.9
		}

		available = {
			PRC = {
				exists = yes
				has_government = communism
			}
		}

		bypass = {
			PRC = {
				OR = {
					exists = no
					NOT = {
						has_government = communism
					}
				}
			}
		}
		
		


		completion_reward = {
			PRC = {
				country_event = {
					id = r56.soviet.93
					days = 1
				}
			}
		}
		search_filters = { FOCUS_FILTER_ALLIANCE }
	}

	focus = {
		id = SOV_support_vietnamese_revolutionaries_old
		text = SOV_support_vietnamese_revolutionaries
		icon = GFX_goal_generic_revolt
		cost = 5
		ai_will_do = {
			factor = 0.1
			modifier = {
				add = 1000
				date > 1950.5.18
			}
			modifier = {
				add = 1000
				date > 1948.5.18
			}
		}
		available = {
			FRI = {
				is_ai = yes
				has_war = no
				OR = {
					has_full_control_of_state = 671
					has_full_control_of_state = 670
					has_full_control_of_state = 854
					has_full_control_of_state = 286
				}
				
			}
			VIN = {
				exists = no
			}
		}
		prerequisite = {
			focus = SOV_sino_soviet_treaty_old
		}
		x = 0
		y = 1
		relative_position_id = SOV_sino_soviet_treaty_old
		completion_reward = {
			custom_effect_tooltip = SOV_support_yen_bai_mutiny_tt
			hidden_effect = {
				FRI = {
					add_days_mission_timeout = {
						mission = r56_FRI_nationist_uprising_2
						days = -5000
					}
				}	
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = SOV_interest_in_cuba_old
		text = SOV_interest_in_cuba
		icon = GFX_goal_sov_communist_cuba
		prerequisite = { focus = SOV_expand_western_spy_rings_old }
		x = 0
		y = 1
		relative_position_id = SOV_expand_western_spy_rings_old

		cost = 5

		ai_will_do = {
			factor = 0.9
			modifier = { #Go for the unthinkable asap
				add = 25
				OR = {
					USA = {
						exists = yes
						is_major = yes
						has_war = no
						is_faction_leader = yes
					}
					ENG = {
						exists = yes
						is_major = yes
						has_war = no
						is_faction_leader = yes
					}
				}
				ROOT = {
					has_war = no
					is_faction_leader = yes
					is_major = yes
				}
				has_global_flag = r56_ww2_got_done_early_make_ai_move_toward_ww3
			}
		}

		available = {
			CUB = {
				exists = yes
			}
		}

		bypass = {
			OR = {
				CUB = {
					has_government = communism
					exists = no
				}
			}
		}


		completion_reward = {
			CUB = {
				country_event = {
					id = r56.soviet.92
					days = 1
				}
			}
		}
		search_filters = { FOCUS_FILTER_ALLIANCE }
	}

	focus = {
		id = SOV_a_cold_war_old
		text = SOV_a_cold_war
		icon = GFX_goal_generic_cold_war
		prerequisite = { focus = SOV_comecon }
		mutually_exclusive = { focus = SOV_extend_the_curtain_outwards_old }
		x = 1
		y = 1
		relative_position_id = SOV_comecon

		cost = 6

		ai_will_do = {
			factor = 0.1
		}

		available = {
			has_war = no
		}


		completion_reward = {
			add_threat = -80
			add_ideas = SOV_cold_war_idea
			USA = {
				add_ideas = SOV_cold_war_idea
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_STABILITY FOCUS_FILTER_INDUSTRY FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = SOV_extend_the_curtain_outwards_old
		text = SOV_extend_the_curtain_outwards
		icon = GFX_goal_sov_east_vs_west
		prerequisite = { focus = SOV_comecon }
		mutually_exclusive = { focus = SOV_a_cold_war_old }
		x = -1
		y = 1
		relative_position_id = SOV_comecon

		cost = 10

		available = {
			is_faction_leader = yes
			is_subject = no
			any_other_country = {
				is_major = yes
				num_of_factories > 100
				has_government = democratic
				NOT = { is_in_faction_with = ROOT }
			}
		}

		bypass = {
			all_other_country = {
				is_major = yes
				num_of_factories > 100
				has_government = democratic
				has_war_with = ROOT
			}
		}

		ai_will_do = {
			factor = 0
			modifier = { #Go for the unthinkable asap
				add = 25
				any_other_country = {
					exists = yes
					is_major = yes
					num_of_factories > 100
					has_government = democratic
					has_war = no
					is_faction_leader = yes
				}
				ROOT = {
					has_war = no
					is_faction_leader = yes
					is_major = yes
				}
				has_global_flag = r56_ww2_got_done_early_make_ai_move_toward_ww3
			}
		}

		select_effect = {
			every_country = {
				limit = {
					OR ={
						AND = {
							is_major = yes
							num_of_factories > 100
						}
						is_neighbor_of = ROOT
					}
					has_government = democratic
					NOT = { is_in_faction_with = ROOT }
				}
				ROOT = {
					add_ai_strategy = {
						type = prepare_for_war
						id = PREV
						value = 100
					}
				}
			}
		}

		completion_reward = {
			custom_effect_tooltip = sov_hot_war_tt
			every_other_country = {
				limit = {
					OR ={
						AND = {
							is_major = yes
							num_of_factories > 100
						}
						is_neighbor_of = ROOT
					}
					has_government = democratic
					NOT = { is_in_faction_with = ROOT }
				}
				ROOT = {
					create_wargoal = {
						target = PREV
						type = puppet_wargoal_focus
						expire = 0
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}
##---> World Revolution <><> <><> <><>
	focus = {
		id = SOV_world_revolution_old
		text = SOV_world_revolution
		icon = GFX_goal_spread_communism
		prerequisite = { focus = SOV_permanent_revolution }
		#mutually_exclusive = { focus = SOV_anti_capitalist_diplomacy focus = SOV_western_expansion }
		relative_position_id = SOV_permanent_revolution
		x = 1
		y = 1
		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {
			is_puppet = no
		}

		bypass = {

		}

		
		
		


		completion_reward = {
			hidden_effect = {
				news_event = { id = r56.soviet.29 days = 1 }
				every_country = {
					IF = {
						limit = {
							NOT = {
							has_government = communism
							}
						}
					add_timed_idea = { idea = comintern_influence days = 365 }
					add_opinion_modifier = { target = SOV modifier = medium_decrease }
					}
				}
			}
			add_named_threat = { threat = 5 name = SOV_world_revolution_t }
			if = {
				limit = {
					has_dlc = "La Resistance"
					NOT = {
						has_intelligence_agency = yes
					}
				}
				create_intelligence_agency = yes
			}			
			if = {
				limit = {
					has_dlc = "La Resistance" 
				}
				add_ideas = SOV_world_revolution_idea_LaR
			}
			else = {
				add_ideas = SOV_world_revolution_idea
			}
			custom_effect_tooltip = SOV_world_revolution_tt
			hidden_effect = {
				every_other_country = {
					limit = {
						exists = yes
						NOT = {
							has_government = ROOT
							is_in_faction_with = ROOT
						}
					}
					ROOT = { #Makes Trotskye cray cray
						add_ai_strategy = {
							type = antagonize
							id = PREV
							value = 250
						}
						add_ai_strategy = {
							type = declare_war
							id = PREV
							value = 25
						}
						add_ai_strategy = {
							type = conquer
							id = PREV
							value = 10
						}
					}
				}
				every_other_country = {
					limit = {
						exists = yes
						has_government = ROOT
						has_war = no
						is_in_faction = no
					}
					ROOT = { #Makes Trotskye want friends, alot of friends
						add_ai_strategy = {
							type = alliance
							id = PREV
							value = 250
						}
						add_ai_strategy = {
							type = befriend
							id = PREV
							value = 25
						}
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION FOCUS_FILTER_ESPIONAGE }
	}
	focus = {
		id = SOV_ideological_propaganda_old
		text = SOV_ideological_propaganda
		icon = GFX_focus_generic_support_the_left_right
		prerequisite = { focus = SOV_world_revolution_old  }
		prerequisite = { focus = SOV_begin_destalinization_old }
		x = 2
		y = 2
		relative_position_id = SOV_world_revolution_old

		cost = 5

		ai_will_do = {
			factor = 0
		}

		allow_branch = {
			has_dlc = "La Resistance"
			if = {
				limit = {
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
				NOT = {
					has_completed_focus = SOV_great_purge
				}
			}
		}

		available = {
			has_intelligence_agency = yes
		}

		completion_reward = {
			upgrade_intelligence_agency = upgrade_psycho_warfare
			add_ideas = r56_clandestine_propaganda_techniques
		}
		search_filters = { FOCUS_FILTER_ESPIONAGE }
	}
	focus = {
		id = SOV_anti_colonialist_rebels
		icon = GFX_focus_propaganda_soviet
		prerequisite = { focus = SOV_ideological_propaganda_old focus = SOV_trotskyite_narrative_old }
		x = 0
		y = 1
		relative_position_id = SOV_ideological_propaganda_old
		cost = 10
		offset  = {
			x = 2
			y = 0
			trigger = {
				NOT = {
					has_dlc = "La Resistance"
				}
			}
		}
		ai_will_do = {
			factor = 1
		}
		completion_reward = {
			add_named_threat = { threat = 1 name = SOV_anti_colonialist_rebels }
			FRA = {
				add_timed_idea = { idea = comintern_influence days = 547 }
			}
			ENG = {
				add_timed_idea = { idea = comintern_influence days = 547 }
			}
			GER = {
				add_timed_idea = { idea = comintern_influence days = 547 }
			}
			FIN = {
				add_timed_idea = { idea = comintern_influence days = 547 }
			}
			POL = {
				add_timed_idea = { idea = comintern_influence days = 547 }
			}
			ROM = {
				add_timed_idea = { idea = comintern_influence days = 547 }
			}
		}
	}
	focus = {
		id = SOV_state_of_perpetual_warfare
		icon = GFX_goal_focus_communist_army
		prerequisite = { focus = SOV_world_revolution_old }
		x = 0
		y = 1
		relative_position_id = SOV_world_revolution_old

		cost = 10

		ai_will_do = {
			factor = 2
		}

		
		
		


		completion_reward = {
			add_ideas = SOV_state_of_perpetual_warfare_idea
				if = {
				limit = {
					OR = {
						has_idea = war_economy
						has_idea = tot_economic_mobilisation
						}
					}
					add_political_power = 125
				}
			if = {
				limit = {
						has_idea = partial_economic_mobilisation
					}
				swap_ideas = { remove_idea = partial_economic_mobilisation add_idea = war_economy }
			}
			if = {
				limit = {
						has_idea = low_economic_mobilisation
					}
				swap_ideas = { remove_idea = low_economic_mobilisation add_idea = war_economy  }
			}
			if = {
				limit = {
						has_idea = civilian_economy
					}
				swap_ideas = { remove_idea = civilian_economy add_idea = war_economy  }
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT }
	}

	# focus = { #every branch will have this in army tree
	# 	id = SOV_a_gun_in_every_hand_old
	# 	text = SOV_a_gun_in_every_hand
	# 	icon = GFX_goal_generic_small_arms
	# 	prerequisite = { focus = SOV_state_of_perpetual_warfare }
	# 	x = 0
	# 	y = 1
	# 	relative_position_id = SOV_state_of_perpetual_warfare

	# 	cost = 10

	# 	ai_will_do = {
	# 		factor = 1
	# 	}

	# 	complete_tooltip = {
	# 		add_ideas =	SOV_a_gun_in_every_hand_idea
	# 	}

	# 	completion_reward = {
	# 		add_ideas =	SOV_a_gun_in_every_hand_idea
	# 	}
	# }

	focus = {
		id = SOV_workers_of_the_world_unite_old
		text = SOV_workers_of_the_world_unite
		icon = GFX_goal_generic_multinational_army
		prerequisite = { focus = SOV_state_of_perpetual_warfare }
		mutually_exclusive = { focus = SOV_claims_on_poland_old }
		x = 0
		y = 2
		relative_position_id = SOV_state_of_perpetual_warfare

		cost = 10

		ai_will_do = {
			factor = 1
		}

		completion_reward = {
			add_ideas =	SOV_workers_of_the_world_unite_idea
		}
		search_filters = { FOCUS_FILTER_MANPOWER }
	}
	
##---> The Great Purge Branch <><> <><> <><> MOVED UP

	# focus = {
	# 	id = SOV_lessons_of_war_old
	# 	text = SOV_lessons_of_war
	# 	icon = GFX_goal_generic_military_sphere
	# 	prerequisite = { focus = SOV_nkvd_divisions }
	# 	prerequisite = { focus = SOV_partisan_suppression_old }
	# 	available = {
	# 		OR = {
	# 			date > 1941.1.1
	# 			has_country_flag = SOV_war_since_purge
	# 		}
	# 	}
	# 	x = 1
	# 	y = 1
	# 	relative_position_id = SOV_nkvd_divisions
	# 	cost = 10
	# 	ai_will_do = {
	# 		factor = 1
	# 		modifier = {
	# 			factor = 1000
	# 			any_claim = yes
	# 			has_war = yes
	# 		}
	# 	}

	# 	available_if_capitulated = yes

	# 	completion_reward = {
	# 		army_experience = 20
	# 		add_tech_bonus = {
	# 			name = armor_bonus
	# 			bonus = 1
	# 			uses = 1
	# 			category = armor
	# 		}
	# 		add_tech_bonus = {
	# 			name = armor_bonus
	# 			bonus = 1
	# 			category = land_doctrine
	# 		}
	# 		if = { limit = { has_idea = officers_purged } remove_ideas = officers_purged }
	# 		if = { limit = { has_idea = officers_purged_2 } remove_ideas = officers_purged_2 }
	# 		if = { limit = { has_idea = officers_purged_3 } remove_ideas = officers_purged_3 }
	# 		if = { limit = { has_idea = officers_purged_4 } remove_ideas = officers_purged_4 }
	# 		if = { limit = { has_idea = officers_purged_5 } remove_ideas = officers_purged_5 }
	# 		if = { limit = { has_idea = officers_purged_6 } remove_ideas = officers_purged_6 }
	# 		if = { limit = { has_idea = officers_purged_7 } remove_ideas = officers_purged_7 }
	# 		if = { limit = { has_idea = officers_purged_8 } remove_ideas = officers_purged_8 }
	# 		if = { limit = { has_idea = officers_purged_9 } remove_ideas = officers_purged_9 }
	# 		if = { limit = { has_idea = officers_purged_10 } remove_ideas = officers_purged_10 }
	# 		if = { limit = { has_idea = SOV_great_patriotic_war } remove_ideas = SOV_great_patriotic_war }
	# 		if = { limit = { has_idea = SOV_great_patriotic_war_2 } remove_ideas = SOV_great_patriotic_war_2 }
	# 		if = { limit = { has_idea = SOV_great_patriotic_war_3 } remove_ideas = SOV_great_patriotic_war_3 }
	# 		if = { limit = { has_idea = SOV_great_patriotic_war_4 } remove_ideas = SOV_great_patriotic_war_4 }
	# 		if = { limit = { has_idea = SOV_great_patriotic_war_5 } remove_ideas = SOV_great_patriotic_war_5 }
	# 	}
	# 	search_filters = { FOCUS_FILTER_RESEARCH }
	# }
	focus = {
		id = SOV_mass_firearms_production_old
		text = SOV_mass_firearms_production
		icon = GFX_goal_ammunitions
		prerequisite = { focus = SOV_rehabilitated_military_old }
		prerequisite = { focus = SOV_peoples_commissariat }
		available = {
			any_other_country = {
				is_major = yes
				has_war_with = ROOT
			}
			OR = {
				has_idea = war_economy
				has_idea = tot_economic_mobilisation
			}			
		}
		x = -4
		y = 1
		relative_position_id = SOV_rehabilitated_military_old
		cost = 10
		ai_will_do = {
			factor = 55
		}

		available_if_capitulated = yes

		completion_reward = {
			add_ideas = SOV_mass_firearms_production
		}
	}
	focus = {
		id = SOV_shocktroops_old
		text = SOV_shocktroops
		icon = GFX_goal_generic_special_forces
		prerequisite = { focus = SOV_mass_firearms_production_old }
		available = {
			any_other_country = {
				is_major = yes
				has_war_with = ROOT
			}
			OR = {
				has_idea = war_economy
				has_idea = tot_economic_mobilisation
			}			
		}
		bypass = {
		}
		x = 0
		y = 1
		relative_position_id = SOV_mass_firearms_production_old
		cost = 10
		ai_will_do = {
			factor = 55
		}

		available_if_capitulated = yes

		completion_reward = {
			add_tech_bonus = {
				name = special_forces_bonus
				bonus = 1
				uses = 2

				category = r56_shock_infantry_tech
			}
			add_tech_bonus = {
				name = special_forces_bonus
				bonus = 1.0
				uses = 2
				category = r56_special_forces_training_tech 
			}
		}
	}	
	focus = {
		id = SOV_sing_katyusha_sing_focus_old
		text = SOV_sing_katyusha_sing_focus
		icon = GFX_goal_soviet_rocketry
		prerequisite = { focus = SOV_lessons_of_war_old }
		available = {
			any_other_country = {
				is_major = yes
				has_war_with = ROOT
			}
			has_tech = motorized_rocket_unit
		}
		x = 2
		y = 1
		relative_position_id = SOV_lessons_of_war_old
		cost = 5
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			add_ideas = SOV_sing_katyusha_sing
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = SOV_voronezh_komintern_factory
			custom_effect_tooltip = manufacturer_applies_bonus_instantly_tooltip
		}
	}
	focus = {
		id = SOV_smersh_old
		text = SOV_smersh
		icon = GFX_goal_generic_forceful_treaty
		prerequisite = { focus = SOV_stalin_constitution }
		available = {
				any_country = {
					OR = {
						is_major = yes
						num_of_factories > 60
						}
					has_war_with = ROOT
					}
			    }
		bypass = {
		#	NOT = { has_idea = trotskyite_plot_purged }
		}
		x = 1
		y = 1
		relative_position_id = SOV_stalin_constitution
		cost = 5
		ai_will_do = {
			factor = 10
		}

		available_if_capitulated = yes

		completion_reward = {
			#custom_effect_tooltip = SOV_smersh_tt
			if = {
				limit = {
					has_idea = trotskyite_plot_purged
				}
				remove_ideas = trotskyite_plot_purged
			}
			
			add_ideas = smersh
		}
		search_filters = { FOCUS_FILTER_ESPIONAGE }
	}

	focus = {
		id = SOV_partisan_suppression_old
		text = SOV_partisan_suppression
		icon = GFX_goal_crush_resistance
		prerequisite = { focus = SOV_smersh_old }
		x = 0
		y = 1
		relative_position_id = SOV_smersh_old
		cost = 10
		ai_will_do = {
			factor = 10
		}
	
		available_if_capitulated = yes
	
		completion_reward = {
			add_ideas = partisan_suppression_focus
			add_tech_bonus = {
				name = mp_tech_bonus_name
				bonus = 1
				uses = 1
				category = military_police_tech
			}		
		}
	}

	### DING DONG THE WITCH IS DEAD, DROWN IN HIS VOMIT

	focus = {
		id = SOV_grieve_stalin_old
		text = SOV_grieve_stalin
		icon = GFX_focus_fra_loyalty_stalin
		available = {
			has_global_flag = stalin_dead
			has_government = communism
		}
		allow_branch = {
			has_completed_focus = SOV_great_purge
		}
		x = 0
		y = 4
		relative_position_id = SOV_tank_programs
		cost = 10
		ai_will_do = {
			factor = 1000
		}
		completion_reward = {
			add_political_power = -50
			add_stability = 0.01	

		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}	
	focus = {
		id = SOV_consolidate_malenkovs_position_old
		text = SOV_consolidate_malenkovs_position
		icon = GFX_focus_generic_soviet_politics
		prerequisite = { focus = SOV_grieve_stalin_old }
		mutually_exclusive = { focus = SOV_khruschev_takes_the_lead_old focus = SOV_berias_goons_strike_old }
		available = {
			has_global_flag = stalin_dead
			has_government = communism
		}
		bypass = {
			
		}
		
		x = 0
		y = 1
		relative_position_id = SOV_grieve_stalin_old
		cost = 20
		ai_will_do = {
			factor = 1000
		}
		completion_reward = {
			remove_country_leader_trait = sov_power_truggle
			set_country_flag = purge_beria
			add_country_leader_trait = captain_of_industry	

		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	focus = {
		id = SOV_khruschev_takes_the_lead_old
		text = SOV_khruschev_takes_the_lead
		icon = GFX_fifth_column
		prerequisite = { focus = SOV_grieve_stalin_old }
		mutually_exclusive = { focus = SOV_consolidate_malenkovs_position_old focus = SOV_berias_goons_strike_old }
		available = {
			has_global_flag = stalin_dead
			NOT = {
				has_country_flag = purged_khrushchev
			}
			has_government = communism
		}
		bypass = {
			
		}
		
		x = -2
		y = 1
		relative_position_id = SOV_grieve_stalin_old
		cost = 20
		ai_will_do = {
			factor = 1500
		}
		completion_reward = {			
			kill_country_leader = yes

			create_country_leader = {
				name = "Nikita Khrushchev"
				desc = "POLITICS_KHRUSCHEV_DESC"
				picture = "gfx/leaders/SOV/r56_portrait_SOV_Nikita_Khrushchev.dds"
				expire = "1965.1.1"
				ideology = marxism
				traits = {
					veteran_communist
				}
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	focus = {
		id = SOV_berias_goons_strike_old
		text = SOV_berias_goons_strike
		icon = GFX_goal_HON_nkvd_assistance
		prerequisite = { focus = SOV_grieve_stalin_old }
		mutually_exclusive = { focus = SOV_khruschev_takes_the_lead_old focus = SOV_consolidate_malenkovs_position_old }
		available = {
			has_global_flag = stalin_dead
			has_government = communism
			custom_trigger_tooltip = {
				tooltip =  SOV_beria_idea
				has_country_flag = purge_2_group_a
			}
		}
		bypass = {
			
		}
		
		x = 2
		y = 1
		relative_position_id = SOV_grieve_stalin_old
		cost = 20
		ai_will_do = {
			factor = 1000
		}
		completion_reward = {
			kill_country_leader = yes	
			create_country_leader = {
				name = "Lavrentiy Beria"
				desc = "POLITICS_BERIA_DESC"
				picture = "gfx/leaders/SOV/r56_portrait_SOV_Lavrenti_Beria.dds"
				expire = "1965.1.1"
				ideology = marxism
				traits = {
					prince_of_terror
				}
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}			
}
